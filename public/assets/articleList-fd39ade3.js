import{A as w,a as I,a2 as C}from"./apiService-aee0d783.js";import{U as O}from"./util-5fdb7bcf.js";import{J as v}from"./jquery-331624d0.js";import{_ as S,r,o as i,c as n,a as l,F as A,b as U,t as m,e as b,j as u,i as V,m as P,d as g,w as L,n as N,p as R,f as z}from"./index-e9ed42ea.js";import{g as M,n as J,a as F}from"./galleryList-ac242cd9.js";import{a as B}from"./articleUpass-a374b16b.js";import{S as G,a as $}from"./swiper-51351a31.js";import{c as x}from"./config-2d27fdd7.js";import{m as j}from"./mobile-9de1c1d4.js";import{p as E}from"./paging-70693336.js";import"./axios-c24e582b.js";const H={name:"pcBoardNormalList",props:["articleData","imageSize","categoryNames","boardCategoryUse"],watch:{articleData(e){this.setArticleList()}},data(){return{articleList:[],util:O}},created(){this.setData()},methods:{setData(){this.setArticleList()},setArticleList(){this.articleList=[];for(const e of this.articleData)this.articleList.push(e)},articleView(e){this.$emit("boardAction",{type:"view",item:e})},registArtice(){this.$emit("boardAction",{type:"write"})}}},Q={class:"article-box"},q={class:"article-list"},K=["onClick"],W={class:"subject-content"},X={key:0,class:"category"},Y={class:"main string-cut"},Z={class:"subject"},ee={class:"author"},te={class:"date"};function ae(e,t,a,d,s,o){const h=r("font-awesome-icon");return i(),n("div",Q,[l("ul",q,[(i(!0),n(A,null,U(s.articleList,(c,f)=>(i(),n("li",{onClick:y=>o.articleView(c)},[l("div",W,[a.boardCategoryUse&&c.category?(i(),n("div",X,m(a.categoryNames[c.category]),1)):b("",!0),l("div",Y,[c.secret=="yes"?(i(),u(h,{key:0,class:"icon",icon:"fa-solid fa-lock"})):b("",!0),l("div",Z,m(c.subject),1)]),l("div",ee,m(c.userName),1),l("div",te,m(c.created_at.substring(0,10)),1)])],8,K))),256))])])}const se=S(H,[["render",ae],["__scopeId","data-v-f61cb50a"]]);const ie={name:"mobileArticleList",components:{normalList:se,galleryList:M,articleUpassComponent:B,Swiper:G,SwiperSlide:$},watch:{listScrollMore(e){e&&this.handleLoadMore()}},computed:{...V(x,["listScrollMore"])},data(){return{passDialogShow:!1,articleData:{},boardData:{},limit:12,page:1,total:0,lastPage:0,scrolling:!1,boardShow:"",bid:"",imageSize:{},memberInfo:{},isLogin:!1,userPass:"",articleId:"",categoryNames:{},boardCategoryUse:!1,boardName:"",categoryList:[],serverInit:!1}},beforeUnmount(){this.emitter.off("articleListReload"),localStorage.setItem("articleList","")},created(){this.emitter.on("articleListReload",this.articleReload),localStorage.setItem("articleList","create");const e=w.getSession();e&&(e!=null&&e.memberInfo)&&(this.memberInfo=e.memberInfo,this.isLogin=!0);let t=this.$route.params.bid;this.bid=t.toString().replace("b",""),this.getData()},methods:{...P(j,["setClass","setTitle"]),...P(x,["setListScroll","setListScrollMore"]),articleReload(e){this.bid=e.bid,this.category="",this.passDialogShow=!1,this.articleData={},this.boardData={},this.page=1,this.total=0,this.lastPage=0,this.boardShow="",this.userPass="",this.articleId="",this.categoryNames={},this.boardCategoryUse=!1,this.boardName="",this.categoryList=[],this.serverInit=!1,this.scrolling=!1,this.getData()},getData(){const e=this.getSearchParams();I.get(C,e,t=>{this.total=t.data.articleList.total;for(let a of t.data.articleList.data)t.data.memberset&&t.data.memberset.nickUse=="yes"&&a.nick?a.userName=a.nick:a.name?a.userName=a.name:a.userName=a.user_name;if(this.articleData=t.data.articleList.data,this.lastPage=t.data.articleList.last_page,this.scrolling=!1,this.page<this.lastPage?(this.setListScroll(!0),this.setListScrollMore(!1)):this.setListScroll(!1),!this.serverInit){if(this.boardData=t.data.boardInfo,this.boardName=this.boardData.bname,this.boardData.categoryUse=="yes"){this.categoryList=[],this.categoryList.push({text:"전체",value:"all",active:"active"});for(let a of JSON.parse(this.boardData.categoryList))this.categoryNames[a.code]=a.name,this.categoryList.push({text:a.name,value:a.code,active:""});this.boardCategoryUse=!0}this.boardShow=this.boardData.btype,this.imageSize=t.data.imageset.blist,this.serverInit=!0}this.init()})},init(){this.setTitle("");let e=this.$route.params.bid;this.bid=e.toString().replace("b","");const t=w.getSession();t&&(t!=null&&t.memberInfo)&&(this.memberInfo=t.memberInfo,this.isLogin=!0),sessionStorage.getItem("eventBoardTop")&&setTimeout(()=>{v("html,body").scrollTop(sessionStorage.getItem("eventBoardTop")),sessionStorage.setItem("eventBoardTop","")},50),this.setClass("main")},getDataList(){this.scrolling=!0;const e=this.getSearchParams();I.get(C,e,t=>{for(let a of t.data.articleList.data)t.data.memberset&&t.data.memberset.nickUse=="yes"&&a.nick?a.userName=a.nick:a.name?a.userName=a.name:a.userName=a.user_name,this.articleData.push(a);this.lastPage=t.data.articleList.last_page,this.scrolling=!1,this.page<this.lastPage?(this.setListScroll(!0),this.setListScrollMore(!1)):this.setListScroll(!1)})},getSearchParams(){return{bid:this.bid,category:this.category,limit:this.limit,page:this.page}},searchCategory(e){for(let t of this.categoryList)t.value==e?t.active="active":t.active="";e=="all"&&(e=""),this.page=1,this.category=e,this.getData()},boardAction(e){switch(e.type){case"view":this.articelView(e.item);break}},articelView(e){let t=!1;if(e.secret=="yes")if(e.user_id)e.user_id==this.memberInfo.id&&(t=!0);else{this.articleId=e.id,this.passDialogShow=!0;return}else t=!0;t&&(sessionStorage.setItem("eventBoardTop",v("html,body").scrollTop()),this.$router.push("/board/articleView/"+this.boardData.id+"/"+e.id))},registArtice(){if(this.boardData.wauth=="user"&&!this.isLogin){let e={message:"먼저 로그인 하세요"};this.emitter.emit("modalOpen",e);return}sessionStorage.setItem("eventBoardTop",v("html,body").scrollTop()),this.$router.push("/board/articleRegist/"+this.boardData.id+"/regist")},viewSuccess(){sessionStorage.setItem("eventBoardTop",v("html,body").scrollTop()),this.$router.push("/board/articleView/"+this.boardData.id+"/"+this.articleId)},handleLoadMore(){this.page<this.lastPage&&(this.page++,this.getDataList())}}},oe={class:"board-container"},re={key:0,class:"menu-container"},ce=["onClick"],le={class:"board-title"},ne={class:"write-button"},de={key:1,style:{padding:"0 20px","margin-top":"-40px"}};function ge(e,t,a,d,s,o){const h=r("swiper-slide"),c=r("swiper"),f=r("font-awesome-icon"),y=r("v-btn"),D=r("galleryList"),p=r("normalList"),k=r("articleUpassComponent");return i(),n("div",oe,[s.boardCategoryUse?(i(),n("div",re,[g(c,{slidesPerView:"auto"},{default:L(()=>[(i(!0),n(A,null,U(s.categoryList,(_,T)=>(i(),u(h,{style:{width:"auto"},class:N(_.active),key:T},{default:L(()=>[l("div",{class:N("cate-item "+_.active),onClick:Ce=>o.searchCategory(_.value)},m(_.text),11,ce)]),_:2},1032,["class"]))),128))]),_:1})])):b("",!0),l("div",le,m(s.boardName),1),l("div",ne,[g(y,{class:"blackButton",depressed:"",rounded:"",onClick:t[0]||(t[0]=_=>o.registArtice())},{default:L(()=>[g(f,{icon:"fa-solid fa-pen"})]),_:1})]),s.boardShow=="photo"?(i(),n("div",de,[g(D,{onBoardAction:o.boardAction,imageSize:s.imageSize,categoryNames:s.categoryNames,boardCategoryUse:s.boardCategoryUse,articleData:s.articleData},null,8,["onBoardAction","imageSize","categoryNames","boardCategoryUse","articleData"])])):s.boardShow=="list"?(i(),u(p,{key:2,onBoardAction:o.boardAction,categoryNames:s.categoryNames,boardCategoryUse:s.boardCategoryUse,articleData:s.articleData},null,8,["onBoardAction","categoryNames","boardCategoryUse","articleData"])):b("",!0),g(k,{bid:s.bid,articleId:s.articleId,modelOpen:s.passDialogShow,onParentOpenFalse:t[1]||(t[1]=_=>s.passDialogShow=!1),onUpassSuccess:o.viewSuccess},null,8,["bid","articleId","modelOpen","onUpassSuccess"])])}const me=S(ie,[["render",ge],["__scopeId","data-v-2a608678"]]);const he={name:"pcArticleList",components:{normalList:J,galleryList:F,articleUpassComponent:B,paging:E},data(){return{passDialogShow:!1,articleData:{},boardData:{},limit:12,page:1,total:0,pageGroup:10,paging:{},pagingReload:!1,boardShow:"",bid:"",imageSize:{},memberInfo:{},isLogin:!1,userPass:"",articleId:"",categoryNames:{},boardCategoryUse:!1,boardName:"",category:"",categoryList:[],serverInit:!1}},created(){let e=this.$route.params.bid;this.bid=e.toString().replace("b","");const t=w.getSession();if(t&&(t!=null&&t.memberInfo)&&(this.memberInfo=t.memberInfo,this.isLogin=!0),sessionStorage.getItem("tempParams")){const a=JSON.parse(sessionStorage.getItem("tempParams"));this.page=a.page,this.category=a.category,sessionStorage.setItem("tempParams","")}this.getData()},methods:{getData(){const e=this.getSearchParams();I.get(C,e,t=>{this.total=t.data.articleList.total;for(let a of t.data.articleList.data)t.data.memberset&&t.data.memberset.nickUse=="yes"&&a.nick?a.userName=a.nick:a.name?a.userName=a.name:a.userName=a.user_name;if(this.paging=t.data.articleList,this.articleData=t.data.articleList.data,this.pagingReload=!0,setTimeout(()=>{this.pagingReload=!1},100),!this.serverInit){if(this.boardData=t.data.boardInfo,this.boardName=this.boardData.bname,this.boardData.categoryUse=="yes"){this.categoryList=[];const a=!this.category||this.category=="all"?"active":"";this.categoryList.push({text:"전체",value:"all",active:a});for(let d of JSON.parse(this.boardData.categoryList)){this.categoryNames[d.code]=d.name;const s=this.category&&this.category==d.code?"active":"";this.categoryList.push({text:d.name,value:d.code,active:s})}this.boardCategoryUse=!0}this.boardShow=this.boardData.btype,this.imageSize=t.data.imageset.blist,this.serverInit=!0}})},getSearchParams(){return{bid:this.bid,category:this.category,limit:this.limit,page:this.page}},pageMode(e){this.page=e.page,this.getData()},searchCategory(e){for(let t of this.categoryList)t.value==e?t.active="active":t.active="";e=="all"&&(e=""),this.page=1,this.category=e,this.getData()},boardAction(e){switch(e.type){case"view":this.articelView(e.item);break}},articelView(e){let t=!1;if(e.secret=="yes")if(e.user_id)e.user_id==this.memberInfo.id&&(t=!0);else{this.articleId=e.id,this.passDialogShow=!0;return}else t=!0;if(t){const a={page:this.page,category:this.category};sessionStorage.setItem("tempParams",JSON.stringify(a)),this.$router.push("/board/articleView/"+this.boardData.id+"/"+e.id)}},viewSuccess(){const e={page:this.page,category:this.category};sessionStorage.setItem("tempParams",JSON.stringify(e)),this.$router.push("/board/articleView/"+this.boardData.id+"/"+this.articleId)},registArtice(){if(this.boardData.wauth=="user"&&!this.isLogin){let e={message:"먼저 로그인 하세요"};this.emitter.emit("modalOpen",e);return}this.$router.push("/board/articleRegist/"+this.boardData.id+"/regist")}}},pe=e=>(R("data-v-58ee958a"),e=e(),z(),e),ue={class:"board-container"},_e={class:"board-title"},be={key:0,class:"search-box"},fe=["onClick"],ye={class:"write-button"},ve=pe(()=>l("span",null,"글쓰기",-1));function Le(e,t,a,d,s,o){const h=r("v-btn"),c=r("galleryList"),f=r("normalList"),y=r("paging"),D=r("articleUpassComponent");return i(),n("div",ue,[l("div",_e,m(s.boardName),1),s.boardCategoryUse?(i(),n("div",be,[l("ul",null,[(i(!0),n(A,null,U(s.categoryList,p=>(i(),n("li",{class:N(p.active),onClick:k=>o.searchCategory(p.value)},m(p.text),11,fe))),256))])])):b("",!0),l("div",ye,[g(h,{class:"blackButton",depressed:"",rounded:"",onClick:t[0]||(t[0]=p=>o.registArtice())},{default:L(()=>[ve]),_:1})]),s.boardShow=="photo"?(i(),u(c,{key:1,onBoardAction:o.boardAction,imageSize:s.imageSize,categoryNames:s.categoryNames,boardCategoryUse:s.boardCategoryUse,articleData:s.articleData},null,8,["onBoardAction","imageSize","categoryNames","boardCategoryUse","articleData"])):s.boardShow=="list"?(i(),u(f,{key:2,onBoardAction:o.boardAction,categoryNames:s.categoryNames,boardCategoryUse:s.boardCategoryUse,articleData:s.articleData},null,8,["onBoardAction","categoryNames","boardCategoryUse","articleData"])):b("",!0),g(y,{paging:s.paging,pageGroup:s.pageGroup,reload:s.pagingReload,onPageMove:o.pageMode},null,8,["paging","pageGroup","reload","onPageMove"]),g(D,{bid:s.bid,articleId:s.articleId,onUpassSuccess:o.viewSuccess,modelOpen:s.passDialogShow,onParentOpenFalse:t[1]||(t[1]=p=>s.passDialogShow=!1)},null,8,["bid","articleId","onUpassSuccess","modelOpen"])])}const Se=S(he,[["render",Le],["__scopeId","data-v-58ee958a"]]);const De={name:"boardArticleList",components:{mobileArticleList:me,pcArticleList:Se},data(){return{mobile:!1}},created(){this.mobile=this.$isMobile()}},we={class:"page-container"};function Ie(e,t,a,d,s,o){const h=r("mobileArticleList"),c=r("pcArticleList");return i(),n("div",we,[s.mobile?(i(),u(h,{key:0})):(i(),u(c,{key:1}))])}const ze=S(De,[["render",Ie],["__scopeId","data-v-674346fc"]]);export{ze as default};
