import{a as x,aQ as z,aR as H,aS as G,aT as Q,aU as Y,aV as J,aW as W,aX as X,aY as Z,aZ as K,a_ as tt,a$ as et}from"./apiService-0aea4262.js";import{U as C}from"./util-c02dbcf9.js";import{s as st}from"./shopTable-08e3e8cc.js";import{J as T}from"./jquery-d0ecd42c.js";import{a as O,ab as it,ac as ot}from"./apiService-6a3981ff.js";import{_ as A,r as _,o as d,c,a as e,t as L,F as S,g as E,b as l,w as h,k as f,p as U,f as N,e as v,j as D,d as F,n as k,s as B,W as P,v as at}from"./index-7c0b344a.js";import{Q as lt}from"./vue-quill.esm-bundler-54b853e3.js";import"./axios-c24e582b.js";const nt={name:"pcCommentList",props:["ptype","pid"],data(){return{limit:1e3,page:1,lastPage:1,total:0,commentList:[],insertFlag:!1}},created(){this.getData()},methods:{getData(){const s=this.getSearchParams();O.get(it,s,t=>{var o;this.commentList=[],this.total=C.numberFormat(t.data.commentList.total),this.$emit("updateCommentCnt",{total:t.data.commentList.total}),this.setCommentList(t.data.commentList),this.isLogin&&(this.memberImg=(o=t.data.memberInfo)!=null&&o.img?t.data.memberInfo.img:"")})},setCommentList(s){this.lastPage=s.last_page;for(let t of s.data){t.viewName=t.memNick?t.memNick:t.memName,t.modifyButton=!!(this.isLogin&&this.memberId==t.user_id);for(let o of t.subList)o.viewName=o.memNick?o.memNick:o.memName,o.modifyButton=!!(this.isLogin&&this.memberId==o.user_id);this.commentList.push(t)}},getSearchParams(){return{parentType:this.ptype,parentId:this.pid,limit:this.limit,page:this.page}},deleteComment(s){const t={type:"confirm",message:"댓글을 삭제하시겠습니까?",doAction:()=>{const o=this.commentList[s].id;this.blindAction(o,"main")}};this.$eventBus.$emit("modalOpen",t)},deleteSubComment(s,t){const o={type:"confirm",message:"답글을 삭제하시겠습니까?",doAction:()=>{const a=this.commentList[s].subList[t].id;this.blindAction(a,"sub")}};this.$eventBus.$emit("modalOpen",o)},blindAction(s,t){const o={id:s};this.$eventBus.$emit("overlay","open"),O.post(ot,o,a=>{this.$eventBus.$emit("overlay","hide"),this.page=1,this.getData();const n={message:(t=="sub"?"답글":"댓글")+"이 삭제되었습니다"};this.$eventBus.$emit("modalOpen",n)})}}},$=s=>(U("data-v-3a0aeebc"),s=s(),N(),s),dt={class:"comment-container",id:"comment-base"},rt={class:"comment-title"},ct={class:"comment-box"},mt={class:"main-comment-ul"},ut=["id"],ht={class:"main-comment"},_t={class:"user-box"},pt={class:"uname"},bt=["innerHTML"],yt={class:"rdate"},gt={class:"modify-button-box"},ft=$(()=>e("span",null,"삭제",-1)),vt={key:0,class:"sub-comment"},Lt={class:"sub-comment-ul"},wt=["id"],xt={class:"user-box"},It={class:"uname"},kt=["innerHTML"],Ct={class:"rdate"},Vt={class:"modify-button-box"},Dt=$(()=>e("span",null,"삭제",-1));function At(s,t,o,a,i,n){const p=_("v-btn");return d(),c("div",dt,[e("div",rt,"댓글 ("+L(i.total)+")",1),e("div",ct,[e("ul",mt,[(d(!0),c(S,null,E(i.commentList,(u,b)=>(d(),c("li",{key:u.id,id:"comment_"+u.id},[e("div",ht,[e("div",_t,[e("div",pt,L(u.viewName),1)]),e("div",{class:"content",innerHTML:u.content},null,8,bt),e("div",yt,L(u.created_at.substring(0,10)),1),e("div",gt,[l(p,{class:"whiteButton",onClick:y=>n.deleteComment(b),depressed:"",rounded:""},{default:h(()=>[ft]),_:2},1032,["onClick"])])]),u.subList.length>0?(d(),c("div",vt,[e("ul",Lt,[(d(!0),c(S,null,E(u.subList,(y,w)=>(d(),c("li",{key:y.id,id:"comment_"+y.id},[e("div",xt,[e("div",It,L(y.viewName),1)]),e("div",{class:"content",innerHTML:y.content},null,8,kt),e("div",Ct,L(y.created_at.substring(0,10)),1),e("div",Vt,[l(p,{class:"whiteButton",onClick:r=>n.deleteSubComment(b,w),depressed:"",rounded:""},{default:h(()=>[Dt]),_:2},1032,["onClick"])])],8,wt))),128))])])):f("",!0)],8,ut))),128))])])])}const Ut=A(nt,[["render",At],["__scopeId","data-v-3a0aeebc"]]);const Nt={props:["info"],components:{commentList:Ut},data(){return{replyShow:!1,id:"",commentCnt:0}},created(){this.info.replyUse=="yes"&&(this.replyShow=!0),this.id=this.info.id},methods:{modifyItem(){this.$emit("updateItem",{type:"update"})},deleteItem(){const s={type:"confirm",message:"게시글을 삭제 하시겠습니까?",doAction:()=>{this.$emit("updateItem",{type:"delete"})}};this.$eventBus.$emit("modalOpen",s)},updateCommentCnt(s){this.commentCnt=C.numberFormat(s.total)}},mounted(){T(".content p").css({"line-height":"130%",margin:0}),T(".content img").css({"max-width":"100%"})},update(){T(".content p").css({"line-height":"130%",margin:0}),T(".content img").css({"max-width":"100%"})}},j=s=>(U("data-v-82f675c0"),s=s(),N(),s),Tt={class:"page-container"},St={class:"article-container"},Et={class:"article-info"},Bt={class:"bname"},Ft={class:"bsubject"},Mt={key:0},Rt={key:1},Ot={class:"summary"},Pt={key:0},$t=j(()=>e("span",null,"수정",-1)),jt=j(()=>e("span",null,"삭제",-1)),qt={key:0,class:"img"},zt=["src"],Ht=["innerHTML"],Gt={class:"comment-info"};function Qt(s,t,o,a,i,n){const p=_("font-awesome-icon"),u=_("v-btn"),b=_("commentList");return d(),c("div",Tt,[e("div",St,[e("ul",Et,[e("li",Bt,L(o.info.bid)+" 게시판 ",1),e("li",Ft,[o.info.category?(d(),c("span",Mt,"["+L(o.info.categoryName)+"]",1)):f("",!0),v(L(o.info.subject)+" ",1),o.info.secret=="yes"?(d(),c("span",Rt,[l(p,{icon:"fa-solid fa-lock"})])):f("",!0)]),e("li",Ot,[e("div",null,[e("span",null,"작성자 : "+L(o.info.name),1),i.replyShow?(d(),c("span",Pt,"댓글수 : "+L(i.commentCnt),1)):f("",!0),e("span",null,"조회수 : "+L(o.info.hit),1),e("span",null,"등록일 : "+L(o.info.created_at),1)]),e("div",null,[l(u,{class:"white-button",onClick:t[0]||(t[0]=y=>n.modifyItem()),depressed:""},{default:h(()=>[$t]),_:1}),l(u,{class:"red-button",onClick:t[1]||(t[1]=y=>n.deleteItem()),depressed:""},{default:h(()=>[jt]),_:1})])])]),o.info.img?(d(),c("div",qt,[e("img",{src:o.info.img},null,8,zt)])):f("",!0),e("div",{innerHTML:o.info.content,class:"content"},null,8,Ht),e("div",Gt,[i.replyShow?(d(),D(b,{key:0,onUpdateCommentCnt:n.updateCommentCnt,ptype:"board",pid:i.id},null,8,["onUpdateCommentCnt","pid"])):f("",!0)])])])}const Yt=A(Nt,[["render",Qt],["__scopeId","data-v-82f675c0"]]);const Jt={components:{shopTable:st,boardArticleView:Yt},watch:{datalimit(s){this.getDataList(1)},bid(s){if(this.categoryList=[],this.category="",s)if(this.orgCategoryList[s]){this.boardCategoryUse=!0,this.categoryList.push({title:"카테고리 전체",value:""});for(let t of this.orgCategoryList[s])this.categoryList.push(t)}else this.boardCategoryUse=!1;else this.boardCategoryUse=!1}},data(){return{util:C,columns:[{name:"선택",id:"id",sort:!1,width:60,type:"allCheckbox"},{name:"번호",id:"number",sort:!1,width:60},{name:"게시판명",id:"bid",width:120,sort:!0},{name:"카테고리",id:"categoryName",width:120},{name:"제목",id:"subject",width:450,textStyle:{"text-align":"left","padding-left":"10px"},type:"underline-action",action:"articleView"},{name:"작성자",id:"name",width:100,sort:!0},{name:"댓글수",id:"commentCnt",width:80,sort:!0},{name:"조회수",id:"hit",sort:!0,width:80},{name:"등록일",id:"created_at",sort:!0,width:120}],ids:[],fixed:0,articleList:[],bid:"",boardList:[{title:"게시판 전체",value:""}],boardCategoryUse:!1,orgCategoryList:{},category:"",categoryList:[],boardNames:{},categoryNames:{},paging:{total:"",links:[],currentPage:1,lastPage:1},page:1,datalimit:20,dataSort:{field:"id",sort:"desc"},keywordCmd:"subject",keywordCmdList:[{title:"제목",value:"subject"},{title:"작성자",value:"name"}],keyword:"",stdate:"",endate:"",vmenu1:!1,vmenu2:!1,dateCmd:"created_at",datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],dayClass:{to:"",yer:"",thr:"active",week:"",mon:"",tmon:""},boardDatas:{},articleDialog:!1,selectedArticle:{},selectedId:""}},created(){this.setDay("thr"),this.getData(1)},methods:{setDay(s){for(let n in this.dayClass)n==s?this.dayClass[n]="active":this.dayClass[n]="";const t=new Date;let o=t.getMonth()+1,a=t.getDate();const i=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);switch(this.endate=i,s){case"to":this.stdate=i;break;case"yer":t.setDate(a-1),o=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);break;case"thr":t.setDate(a-3),o=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);break;case"week":t.setDate(a-7),o=t.getMonth()+1,a=t.getDate(),this.stdate=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);break;case"mon":t.setMonth(o-1),o=t.getMonth(),a=t.getDate(),this.stdate=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);break;case"tmon":t.setMonth(o-3),o=t.getMonth(),a=t.getDate(),this.stdate=t.getFullYear()+"-"+(o<10?"0"+o:o)+"-"+(a<10?"0"+a:a);break}},searchReset(){this.keywordCmd="subject",this.keyword="",this.stdate="",this.endate="",this.bid="",this.category="",this.dateCmd="created_at",this.setDay("thr")},getSearchParams(s){return this.page=s,{orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit,page:s,keywordCmd:this.keywordCmd,keyword:this.keyword,stdate:this.stdate,endate:this.endate,dateCmd:this.dateCmd,bid:this.bid,category:this.category}},getData(s){const t=this.getSearchParams(s);x.post(z,t,o=>{for(let a of o.data.boardList){if(this.boardList.push({title:a.bname,value:a.id}),this.boardNames[a.id]=a.bname,a.categoryUse=="yes"){this.orgCategoryList[a.id]=[];for(let i of JSON.parse(a.categoryList))this.categoryNames[i.code]=i.name,this.orgCategoryList[a.id].push({title:i.name,value:i.code})}this.boardDatas[a.id]=a}this.setDataList(o.data.articleList)})},getDataList(s){const t=this.getSearchParams(s);x.post(H,t,o=>{this.setDataList(o.data)})},setDataList(s){this.articleList=[],this.paging={total:s.total,links:s.links,currentPage:s.current_page,lastPage:s.last_page};const t=parseInt(s.total)-this.datalimit*(parseInt(s.current_page)-1);let o=0;for(let a of s.data)a.number=t-o,a.created_at=a.created_at.substring(0,10),a.orgBid=a.bid,a.bid=this.boardNames[a.bid],a.category?a.categoryName=this.categoryNames[a.category]:a.categoryName="",a.commentCnt=a.commentCnt?C.numberFormat(a.commentCnt):0,a.hit=a.hit?C.numberFormat(a.hit):0,this.articleList.push(a),o++},pageMove(s){this.getDataList(s.page)},tableEventAction(s){switch(s.type){case"dataSort":this.dataSort=s.sort,this.getDataList(1);break}},search(){this.getDataList(1)},checkDataList(s){this.ids=[];for(let t in s)this.ids.push(t)},articleView(s){this.selectedId=s.id;for(let t of this.articleList)if(t.id==s.id){t.replyUse=this.boardDatas[t.orgBid].replyUse,this.selectedArticle=t;break}this.articleDialog=!0},deleteArticle(){if(this.ids.length<1){const t={message:"게시글을 하나 이상 선택하세요"};this.emitter.emit("modalOpen",t);return}const s={type:"confirm",message:"게시글을 삭제 하시겠습니까?",doAction:()=>{this.deleteAction(this.ids)}};this.emitter.emit("modalOpen",s)},updateItem(s){s.type=="update"?this.selectedId&&(this.articleDialog=!1,this.$emit("boardViewType",{type:"modify",id:this.selectedId})):s.type=="delete"&&this.selectedId&&this.deleteAction([this.selectedId])},deleteAction(s){const t={ids:s};this.emitter.emit("overlay","open"),x.post(G,t,o=>{this.emitter.emit("overlay","hide");const a={message:"게시글이 삭제되었습니다"};this.emitter.emit("modalOpen",a),this.getDataList(this.page)})}}},V=s=>(U("data-v-ffafefb3"),s=s(),N(),s),Wt={class:"table-box"},Xt={class:"search-box"},Zt={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},Kt=V(()=>e("th",null,"게시판",-1)),te={style:{display:"flex"}},ee=V(()=>e("th",null,"검색어",-1)),se={style:{display:"flex"}},ie={style:{"margin-left":"20px",width:"300px"}},oe=V(()=>e("th",{style:{"border-radius":"5px"}},"등록일 검색",-1)),ae={style:{display:"flex","max-height":"40px","padding-top":"6px"}},le={class:"date-box"},ne={style:{display:"flex","margin-top":"-5px","margin-left":"10px"}},de={style:{width:"160px"}},re=V(()=>e("div",{style:{width:"30px","text-align":"center","line-height":"50px",height:"50px"}},"~ ",-1)),ce={style:{width:"160px"}},me={class:"button-row"},ue=V(()=>e("span",null,"초기화",-1)),he=V(()=>e("span",null,"검색",-1)),_e={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},pe={class:"sub-title"},be={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},ye={class:"total"},ge={class:"modal-layout",style:{height:"800px",background:"#fff"}},fe={class:"modal-header"},ve=V(()=>e("div",{class:"modal-title"},"게시글 보기",-1)),Le={class:"modal-body",style:{height:"670px","overflow-x":"hidden"}},we={class:"modal-button-row",style:{"text-align":"center","padding-top":"15px"}};function xe(s,t,o,a,i,n){const p=_("v-select"),u=_("v-text-field"),b=_("v-btn"),y=_("shopTable"),w=_("font-awesome-icon"),r=_("boardArticleView"),g=_("v-dialog");return d(),c("div",null,[e("div",Wt,[e("form",{novalidate:"",onSubmit:t[13]||(t[13]=F((...m)=>n.search&&n.search(...m),["prevent"]))},[e("div",Xt,[e("table",Zt,[e("tbody",null,[e("tr",null,[Kt,e("td",null,[e("div",te,[l(p,{modelValue:i.bid,"onUpdate:modelValue":t[0]||(t[0]=m=>i.bid=m),density:"compact",variant:"outlined",style:{"max-width":"200px"},items:i.boardList},null,8,["modelValue","items"]),i.boardCategoryUse?(d(),D(p,{key:0,modelValue:i.category,"onUpdate:modelValue":t[1]||(t[1]=m=>i.category=m),density:"compact",variant:"outlined",style:{"max-width":"200px","margin-left":"20px"},items:i.categoryList},null,8,["modelValue","items"])):f("",!0)])])]),e("tr",null,[ee,e("td",null,[e("div",se,[l(p,{modelValue:i.keywordCmd,"onUpdate:modelValue":t[2]||(t[2]=m=>i.keywordCmd=m),density:"compact",variant:"outlined",style:{"max-width":"150px"},items:i.keywordCmdList},null,8,["modelValue","items"]),e("div",ie,[l(u,{density:"compact",variant:"outlined",modelValue:i.keyword,"onUpdate:modelValue":t[3]||(t[3]=m=>i.keyword=m)},null,8,["modelValue"])])])])]),e("tr",null,[oe,e("td",null,[e("div",ae,[e("div",le,[l(b,{variant:"outlined",class:k("white-button "+i.dayClass.to),onClick:t[4]||(t[4]=m=>n.setDay("to"))},{default:h(()=>[v("오늘 ")]),_:1},8,["class"]),l(b,{variant:"outlined",class:k("white-button "+i.dayClass.yer),onClick:t[5]||(t[5]=m=>n.setDay("yer"))},{default:h(()=>[v(" 어제 ")]),_:1},8,["class"]),l(b,{variant:"outlined",class:k("white-button "+i.dayClass.thr),onClick:t[6]||(t[6]=m=>n.setDay("thr"))},{default:h(()=>[v(" 3일 ")]),_:1},8,["class"]),l(b,{variant:"outlined",class:k("white-button "+i.dayClass.week),onClick:t[7]||(t[7]=m=>n.setDay("week"))},{default:h(()=>[v(" 1주일 ")]),_:1},8,["class"]),l(b,{variant:"outlined",class:k("white-button "+i.dayClass.mon),onClick:t[8]||(t[8]=m=>n.setDay("mon"))},{default:h(()=>[v(" 1개월 ")]),_:1},8,["class"]),l(b,{variant:"outlined",class:k("white-button "+i.dayClass.tmon),onClick:t[9]||(t[9]=m=>n.setDay("tmon"))},{default:h(()=>[v(" 3개월 ")]),_:1},8,["class"])]),e("div",ne,[e("div",de,[l(u,{type:"date",modelValue:i.stdate,"onUpdate:modelValue":t[10]||(t[10]=m=>i.stdate=m),density:"compact",variant:"outlined"},null,8,["modelValue"])]),re,e("div",ce,[l(u,{type:"date",density:"compact",variant:"outlined",modelValue:i.endate,"onUpdate:modelValue":t[11]||(t[11]=m=>i.endate=m)},null,8,["modelValue"])])])])])])])])]),e("div",me,[l(b,{class:"white-button",variant:"outlined",onClick:t[12]||(t[12]=m=>n.searchReset())},{default:h(()=>[ue]),_:1}),l(b,{class:"search-button",type:"submit",variant:"outlined"},{default:h(()=>[he]),_:1})])],32),e("div",_e,[e("div",pe,[v("게시글 리스트 "),l(b,{variant:"outlined",color:"primary",outlined:"",class:"sdel-button",rounded:"",onClick:t[14]||(t[14]=m=>n.deleteArticle())},{default:h(()=>[v("선택삭제")]),_:1})]),e("div",be,[e("div",ye,"전체게시글수 "+L(i.util.numberFormat(i.paging.total))+"개",1),l(p,{modelValue:i.datalimit,"onUpdate:modelValue":t[15]||(t[15]=m=>i.datalimit=m),density:"compact","bg-color":"#fff",style:{"max-width":"100px"},items:i.datalimitList},null,8,["modelValue","items"])])]),l(y,{datas:i.articleList,fixed:i.fixed,onPageMove:n.pageMove,onParentEvent:n.tableEventAction,onArticleView:n.articleView,columns:i.columns,paging:i.paging,onCheckDataList:n.checkDataList},null,8,["datas","fixed","onPageMove","onParentEvent","onArticleView","columns","paging","onCheckDataList"])]),l(g,{modelValue:i.articleDialog,"onUpdate:modelValue":t[18]||(t[18]=m=>i.articleDialog=m),width:"1000",persistent:"",rounded:"",style:{"z-index":"100"}},{default:h(()=>[e("div",ge,[e("div",fe,[ve,e("div",{class:"modal-close",onClick:t[16]||(t[16]=m=>i.articleDialog=!1)},[l(w,{icon:"fa-solid fa-circle-xmark"})])]),e("div",Le,[i.articleDialog?(d(),D(r,{key:0,onUpdateItem:n.updateItem,info:i.selectedArticle},null,8,["onUpdateItem","info"])):f("",!0)]),e("div",we,[l(b,{class:"white-button",style:{width:"120px",border:"solid 2px #555"},rounded:"",onClick:t[17]||(t[17]=m=>i.articleDialog=!1),variant:"outlined"},{default:h(()=>[v("닫기")]),_:1})])])]),_:1},8,["modelValue"])])}const Ie=A(Jt,[["render",xe],["__scopeId","data-v-ffafefb3"]]);const ke={watch:{categoryUse(s){if(s=="yes"&&this.categoryList.length<1){this.categoryNames.push("");let t=this.bcode+"_"+(this.categoryList.length+1);this.categoryList.push({code:t,name:""})}}},data(){return{form:null,baseBoardId:"newBoard",boardList:[],boardRegistTitle:"게시판 상세설정",boardId:"",bcode:"",bname:"",buse:"yes",buttonTitle:"저장",serverFlag:!1,wauth:"all",authList:[{title:"모든 사용자",value:"all"},{title:"회원만 가능",value:"user"}],rauthList:[{title:"회원만 가능",value:"user"}],categoryUse:"no",yesNoList:[{title:"사용",value:"yes"},{title:"사용안함",value:"no"}],secret:"no",btype:"list",btypeList:[{title:"일반형",value:"list"},{title:"갤러리형",value:"photo"}],replyUse:"yes",rauth:"user",categoryNames:[],categoryList:[],categoryFocus:[]}},created(){this.getData()},methods:{bnameErrors(s){return s?!0:"게시판명을 입력하세요"},getData(){this.serverFlag||(this.serverFlag=!0,x.post(Q,{},s=>{this.serverFlag=!1,this.boardList=[];for(let t of s.data)t.active="",this.boardList.push(t);this.boardList[0]&&this.choiceBoard(this.boardList[0].id)}))},choiceBoard(s){let t={};for(let o of this.boardList)o.id==s?(o.active="active",t=o):o.active="";if(this.bcode="b"+t.id,this.boardId=t.id,this.bname=t.bname,this.buse=t.buse,this.categoryUse=t.categoryUse,this.categoryUse=="yes"&&t.categoryList){this.categoryNames=[],this.categoryList=JSON.parse(t.categoryList);for(let o in this.categoryList)this.categoryNames.push(this.categoryList[o].name)}else this.categoryNames=[],this.categoryList=[];this.wauth=t.wauth,this.secret=t.secret,this.btype=t.btype,this.replyUse=t.replyUse},addBoard(){if(this.boardList.length>20){const t={message:"더이상 게시판를 추가할수 없습니다"};this.emitter.emit("modalOpen",t);return}if(this.serverFlag)return;const s=this.baseBoardId;for(let t of this.boardList)t.active="";this.boardList.push({bname:"새 게시판",id:s,active:"active"}),this.boardId=s,this.bname="새 게시판",this.buse="no",this.categoryUse="no",this.categoryNames=[],this.categoryList=[],this.wauth="all",this.secret="no",this.btype="list",this.replyUse="yes",this.validate()},deleteBoard(s,t){this.deleteConfirm(s,t)},deleteConfirm(s,t){const o={type:"confirm",message:"선택된 게시판를 삭제하시겠습니까?",doAction:()=>{this.deleteAction(s,t)}};this.emitter.emit("modalOpen",o)},deleteAction(s,t){this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),x.post(Y,{id:s},o=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),o.status=="success"){const a={message:"선택된 게시판가 삭제되었습니다"};this.emitter.emit("modalOpen",a),this.boardList.splice(t,1),this.boardId==s&&this.boardList[0]&&this.choiceBoard(this.boardList[0].id)}else{const a={message:"선택된 게시판에 상품이 존재하므로 삭제할수 없습니다"};this.emitter.emit("modalOpen",a)}}))},validate(){if(this.form){if(this.categoryUse=="yes"){let o=0,a=!1;for(let i of this.categoryList)this.categoryFocus[o]=!1,this.categoryNames[o]?i.name=this.categoryNames[o]:(this.categoryNameError(o),this.categoryFocus[o]=!0,a=!0),o++;if(a)return}else this.categoryList=[];let s={bname:this.bname,buse:this.buse,categoryUse:this.categoryUse,categoryList:JSON.stringify(this.categoryList),wauth:this.wauth,secret:this.secret,btype:this.btype,replyUse:this.replyUse,rauth:this.rauth},t=W;if(this.boardId&&this.boardId!=this.baseBoardId&&(t=X,s.id=this.boardId),this.serverFlag)return;this.serverFlag=!0,this.emitter.emit("overlay","open"),x.post(t,s,o=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),o.data){if(s.id){let a={message:"게시판정보가 수정 되었습니다"};this.emitter.emit("modalOpen",a)}this.updateSet(s.id,o.data)}})}},updateSet(s,t){let o=0;for(let a of this.boardList){if(a.id==this.boardId){const i=this.updateDataSet(a,s,t);this.boardList[o]=i;break}o++}},updateDataSet(s,t,o){return t?(s=o,s.active="active"):(s=o,s.active="active",this.boardId=s.id),s},upDownBoard(s){this.boardId&&(this.serverFlag||(this.serverFlag=!0,x.post(J,{id:this.boardId,cmd:s},t=>{if(this.serverFlag=!1,t.data){if(t.data=="stay")return;this.boardList=[];for(let o of t.data)o.id==this.boardId?o.active="active":o.active="",this.boardList.push(o)}})))},addCategory(){if(this.categoryList.length>7){let t={message:"카테고리는 최대 8개까지 추가 가능합니다"};this.emitter.emit("modalOpen",t);return}this.categoryNames.push("");let s=this.bcode+"_"+(this.categoryList.length+1);this.categoryList.push({code:s,name:""})},categoryNameErrors(s){return s?!0:"카테고리명을 입력해주세요"},deleteCategory(s){this.categoryNames.splice(s,1),this.categoryList.splice(s,1)}}},M=s=>(U("data-v-adf17848"),s=s(),N(),s),Ce={class:"page-container"},Ve={class:"board-container"},De={class:"board-list"},Ae={class:"board-list-header"},Ue={class:"up-down"},Ne={class:"add"},Te={class:"board-list-body"},Se={class:"main-board"},Ee={class:"main-li"},Be=["onClick"],Fe=["onClick"],Me={class:"board-regist"},Re={key:0},Oe={class:"board-title"},Pe={class:"board-reg-box",style:{display:"flex"}},$e={class:"table-ul"},je={class:"label-input"},qe={class:"input-box"},ze={class:"label-input"},He={class:"input-box"},Ge={key:0},Qe={class:"label-input"},Ye={class:"input-box"},Je={key:1},We={class:"label-input"},Xe={class:"input-box"},Ze={key:2},Ke={class:"label-input"},ts={class:"input-box"},es={key:3},ss={class:"label-input"},is={class:"input-box"},os={key:4},as={class:"label-input"},ls={class:"input-box"},ns={key:5},ds={class:"label-input"},rs={class:"input-box"},cs=M(()=>e("div",{class:"label"}," 게시판 사용여부 ",-1)),ms={class:"label-input"},us={class:"radio-box"},hs={key:0,style:{"margin-left":"50px"}},_s={style:{display:"flex","justify-content":"space-between"}},ps=M(()=>e("div",{class:"board-title",style:{"font-size":"14px","padding-bottom":"0"}},"카테고리 설정",-1)),bs={class:"add",style:{margin:"-5px 70px 0 0"}},ys={class:"table-ul"},gs={class:"label-input"},fs={class:"input-box"},vs={class:"del",style:{"min-width":"70px"}},Ls=M(()=>e("span",{style:{"font-size":"12px"}},"삭제",-1)),ws={class:"button-row"};function xs(s,t,o,a,i,n){const p=_("font-awesome-icon"),u=_("v-btn"),b=_("v-text-field"),y=_("v-select"),w=_("v-form");return d(),c("div",Ce,[e("div",Ve,[e("div",De,[e("div",Ae,[e("div",Ue,[l(u,{class:"white-button",onClick:t[0]||(t[0]=r=>n.upDownBoard("up")),style:{"margin-right":"5px"},variant:"outlined"},{default:h(()=>[l(p,{icon:"fa-solid fa-angle-up"})]),_:1}),l(u,{class:"white-button",onClick:t[1]||(t[1]=r=>n.upDownBoard("down")),variant:"outlined"},{default:h(()=>[l(p,{icon:"fa-solid fa-angle-down"})]),_:1})]),e("div",Ne,[l(u,{class:"white-button",onClick:t[2]||(t[2]=r=>n.addBoard()),variant:"outlined"},{default:h(()=>[l(p,{icon:"fa-solid fa-plus"}),v(" 게시판 추가 ")]),_:1})])]),e("div",Te,[(d(!0),c(S,null,E(i.boardList,(r,g)=>(d(),c("ul",Se,[e("li",Ee,[e("div",{class:k("main-data "+r.active)},[e("div",{class:"gname",onClick:m=>n.choiceBoard(r.id)},[v(L(r.bname)+" ",1),r.buse=="yes"?(d(),D(p,{key:0,icon:"fa-solid fa-eye"})):(d(),D(p,{key:1,icon:"fa-solid fa-eye-slash"}))],8,Be),r.btype!="faq"&&r.btype!="notice"?(d(),c("div",{key:0,class:"btn",onClick:m=>n.deleteBoard(r.id,g)},[l(p,{icon:"fa-solid fa-circle-minus"})],8,Fe)):f("",!0)],2)])]))),256))])]),e("div",Me,[i.boardId?(d(),c("div",Re,[e("div",Oe,L(i.boardRegistTitle),1),l(w,{modelValue:i.form,"onUpdate:modelValue":t[14]||(t[14]=r=>i.form=r),novalidate:"",onSubmit:F(n.validate,["prevent"])},{default:h(()=>[e("div",Pe,[e("ul",$e,[e("li",null,[e("div",je,[e("div",qe,[l(b,{modelValue:i.bcode,"onUpdate:modelValue":t[3]||(t[3]=r=>i.bcode=r),density:"compact",variant:"outlined",label:"게시판 아이디",readonly:""},null,8,["modelValue"])])])]),e("li",null,[e("div",ze,[e("div",He,[l(b,{modelValue:i.bname,"onUpdate:modelValue":t[4]||(t[4]=r=>i.bname=r),rules:[n.bnameErrors],density:"compact",variant:"outlined",label:"게시판명",placeholder:"게시판명을 입력해주세요"},null,8,["modelValue","rules"])])])]),i.btype!="faq"&&i.btype!="notice"?(d(),c("li",Ge,[e("div",Qe,[e("div",Ye,[l(y,{modelValue:i.btype,"onUpdate:modelValue":t[5]||(t[5]=r=>i.btype=r),density:"compact",variant:"outlined",items:i.btypeList,label:"게시판 타입"},null,8,["modelValue","items"])])])])):f("",!0),i.btype!="faq"&&i.btype!="notice"?(d(),c("li",Je,[e("div",We,[e("div",Xe,[l(y,{modelValue:i.wauth,"onUpdate:modelValue":t[6]||(t[6]=r=>i.wauth=r),items:i.authList,density:"compact",variant:"outlined",label:"글쓰기 권한"},null,8,["modelValue","items"])])])])):f("",!0),i.btype!="notice"?(d(),c("li",Ze,[e("div",Ke,[e("div",ts,[l(y,{modelValue:i.categoryUse,"onUpdate:modelValue":t[7]||(t[7]=r=>i.categoryUse=r),density:"compact",variant:"outlined",items:i.yesNoList,label:"카테고리 사용여부"},null,8,["modelValue","items"])])])])):f("",!0),i.btype!="faq"&&i.btype!="notice"?(d(),c("li",es,[e("div",ss,[e("div",is,[l(y,{modelValue:i.secret,"onUpdate:modelValue":t[8]||(t[8]=r=>i.secret=r),density:"compact",variant:"outlined",items:i.yesNoList,label:"비밀글 사용여부"},null,8,["modelValue","items"])])])])):f("",!0),i.btype!="faq"&&i.btype!="notice"?(d(),c("li",os,[e("div",as,[e("div",ls,[l(y,{modelValue:i.replyUse,"onUpdate:modelValue":t[9]||(t[9]=r=>i.replyUse=r),density:"compact",variant:"outlined",items:i.yesNoList,label:"댓글 사용여부"},null,8,["modelValue","items"])])])])):f("",!0),i.replyUse=="yes"&&i.btype!="notice"?(d(),c("li",ns,[e("div",ds,[e("div",rs,[l(y,{modelValue:i.rauth,"onUpdate:modelValue":t[10]||(t[10]=r=>i.rauth=r),items:i.rauthList,readonly:!0,density:"compact",variant:"outlined",label:"댓글쓰기 권한"},null,8,["modelValue","items"])])])])):f("",!0),e("li",null,[cs,e("div",ms,[e("div",us,[e("label",null,[B(e("input",{type:"radio","onUpdate:modelValue":t[11]||(t[11]=r=>i.buse=r),value:"yes"},null,512),[[P,i.buse]]),v(" 사용 ")]),e("label",null,[B(e("input",{type:"radio","onUpdate:modelValue":t[12]||(t[12]=r=>i.buse=r),value:"no"},null,512),[[P,i.buse]]),v(" 사용안함 ")])])])])]),i.categoryUse=="yes"?(d(),c("div",hs,[e("div",_s,[ps,e("div",bs,[l(u,{class:"white-button",onClick:t[13]||(t[13]=r=>n.addCategory()),variant:"outlined"},{default:h(()=>[v(" 카테고리 추가 ")]),_:1})])]),e("ul",ys,[(d(!0),c(S,null,E(i.categoryList,(r,g)=>(d(),c("li",null,[e("div",gs,[e("div",fs,[l(b,{modelValue:i.categoryNames[g],"onUpdate:modelValue":m=>i.categoryNames[g]=m,rules:[n.categoryNameErrors],density:"compact",variant:"outlined",autofocus:i.categoryFocus[g],suffix:"code : "+r.code,label:"카테고리명",placeholder:"카테고리명을 입력해주세요"},null,8,["modelValue","onUpdate:modelValue","rules","autofocus","suffix"])])]),e("div",vs,[g>0?(d(),D(u,{key:0,class:"delete-button",style:{"margin-top":"13px","min-width":"50px","max-width":"50px","min-height":"30px","max-height":"30px"},onClick:m=>n.deleteCategory(g),variant:"outlined"},{default:h(()=>[Ls]),_:2},1032,["onClick"])):f("",!0)])]))),256))])])):f("",!0)]),e("div",ws,[l(u,{class:"submit-button",type:"submit"},{default:h(()=>[v("게시판정보 "+L(i.buttonTitle),1)]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):f("",!0)])])])}const Is=A(ke,[["render",xs],["__scopeId","data-v-adf17848"]]);const ks={components:{QuillEditor:lt},props:["id"],watch:{bid(s){for(let t of this.boardList)if(s==t.id){this.boardInfo=t;break}if(this.btype=this.boardInfo.btype,this.secretUse=this.boardInfo.secret,this.categoryUse=this.boardInfo.categoryUse,this.categoryUse=="yes"){this.category="",this.categoryList=[{title:"카테고리를 선택하세요",value:""}];for(let t of JSON.parse(this.boardInfo.categoryList))this.categoryList.push({title:t.name,value:t.code})}this.getInfoFlag&&(this.setAddInfo(),this.getInfoFlag=!1)}},data(){return{form:null,bid:"",info:{},boardInfo:{},boardList:[],bidList:[{title:"게시판을 선택하세요",value:""}],subject:"",content:"",editorOption:{placeholder:"내용을 입력하세요",theme:"snow",modules:{toolbar:{container:[[{header:1},{header:2}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["image"],["clean"]],handlers:{image:this.editorImageHandler}}}},btype:"",category:"",categoryList:[],categoryUse:"no",secretUse:"no",secret:"",bidDisabled:!1,imgs:[{isfile:"",file:null,url:""}],imgIndex:0,imgSize:{width:640,height:640,title:"640×640"},formHasErrors:!1,serverFlag:!1,getInfoFlag:!1,uploadImgType:"list",editor:null}},created(){this.getData()},methods:{onEditorReady(s){this.editor=s},getData(){const s={id:this.id};x.post(Z,s,t=>{var o;if(t.data){this.boardList=t.data.boardList;for(let a of t.data.boardList)this.bidList.push({title:a.bname,value:a.id});this.imgSize.width=t.data.imgSize.width,this.imgSize.height=t.data.imgSize.height,this.imgSize.text=t.data.imgSize.width+"×"+t.data.imgSize.height,(o=t.data.info)!=null&&o.id&&(this.info=t.data.info,this.getInfoFlag=!0,this.bid=this.info.bid,this.bidDisabled=!0,this.subject=this.info.subject,this.content=this.info.content)}this.id&&this.$emit("boardViewType",{type:"deleteArticleId"})})},setAddInfo(){this.boardInfo.categoryUse=="yes"&&this.info.category&&(this.category=this.info.category),this.boardInfo.secret=="yes"&&this.info.secret=="yes"&&(this.secret="yes"),this.boardInfo.btype=="photo"&&this.info.img&&(this.imgs=[],this.imgs.push({isfile:"yes",file:null,url:this.info.img}))},editorImageHandler(){this.uploadImgType="contentEditor",this.$refs.img.click()},deleteImg(s){this.imgs.splice(s,1),this.imgs.push({isfile:"",file:null,url:""})},insertImg(s){this.uploadImgType="list",this.$refs.img.click()},imgUpload(){const s=this.$refs.img.files;let t=s.length>0?s[0]:null;switch(this.uploadImgType){case"contentEditor":const o=new FormData;o.append("image",t),x.postFile(K,o,i=>{const n=this.editor.getSelection();this.editor.insertEmbed(n.index,"image",i.data)});break;default:let a={isfile:"",file:t,url:URL.createObjectURL(t)};this.imgs.splice(0,1,a);break}this.$refs.img.value=""},validate(){var n,p;if(!this.form)return;const s=new FormData,t=this.$refs.myQuillEditor.getHTML(),o=C.stripTags(t);if(!C.isImgTags(t)&&!o){let u={message:"내용을 입력하세요"};this.emitter.emit("modalOpen",u);return}if(s.append("bid",this.bid),s.append("subject",this.subject),s.append("category",this.category),s.append("content",t),s.append("secret",this.secret?"yes":"no"),s.append("btype",this.boardInfo.btype),this.btype=="photo"){if(this.imgs[0].file)s.append("img",this.imgs[0].file);else if(this.imgs[0].isfile!="yes"){let u={message:"이미지를 등록하세요"};this.emitter.emit("modalOpen",u);return}}if(this.serverFlag)return;this.serverFlag=!0,(n=this.info)!=null&&n.id&&s.append("id",this.info.id),this.emitter.emit("overlay","open");const i=(p=this.info)!=null&&p.id?tt:et;x.postFile(i,s,u=>{var b;if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),u.data){let y="저장";(b=this.info)!=null&&b.id&&(y="수정");let w={message:"게시글 정보가 "+y+" 되었습니다",doAction:()=>{this.$emit("boardViewType",{type:"list"})}};this.emitter.emit("modalOpen",w)}})}},mounted(){T(".quill-content-box .ql-editor").css("min-height","400px")}},I=s=>(U("data-v-93d044f6"),s=s(),N(),s),Cs={class:"page-container"},Vs={class:"product-container"},Ds={class:"product-regist"},As=I(()=>e("div",{class:"product-title"},"기본정보",-1)),Us={class:"product-form"},Ns={class:"table-regist",cellspacing:"0",cellpadding:"0",border:"0"},Ts=I(()=>e("th",null,[e("span",{class:"required-icon"},"*"),v("게시판 선택")],-1)),Ss={class:"select-box",id:"bid-required"},Es={key:0},Bs=I(()=>e("th",null,[e("span",{class:"required-icon"},"*"),v("카테고리")],-1)),Fs={id:"category-required"},Ms={class:"select-box"},Rs={key:1},Os=I(()=>e("th",null,"비밀글 여부",-1)),Ps={class:"radio-box",style:{"max-height":"40px"}},$s=I(()=>e("th",null,[e("span",{class:"required-icon"},"*"),v("제목")],-1)),js={id:"subject-required"},qs={class:"input-box",style:{width:"830px"}},zs=I(()=>e("th",null,[e("span",{class:"required-icon"},"*"),v("내용")],-1)),Hs={class:"quill-content-box",style:{width:"830px","padding-bottom":"12px"}},Gs={key:0,class:"product-title",style:{"padding-top":"30px"}},Qs={key:1,class:"product-form"},Ys={class:"table-regist",cellspacing:"0",cellpadding:"0",border:"0"},Js=I(()=>e("th",null,"목록 이미지",-1)),Ws={class:"detail-img-box",style:{"padding-top":"5px"}},Xs={class:"add-detial-img-ul"},Zs={class:"reg-img-box"},Ks={key:0,class:"is-img"},ti=["onClick"],ei=["src"],si=["onClick"],ii={class:"guide-img-icon"},oi=I(()=>e("div",{class:"guide-img-title"},"이미지",-1)),ai={class:"guide-img-size"},li={class:"button-row"};function ni(s,t,o,a,i,n){const p=_("v-select"),u=_("v-text-field"),b=_("quill-editor"),y=_("font-awesome-icon"),w=_("v-btn"),r=_("v-form");return d(),c("div",Cs,[e("div",Vs,[l(r,{modelValue:i.form,"onUpdate:modelValue":t[5]||(t[5]=g=>i.form=g),novalidate:"",onSubmit:F(n.validate,["prevent"])},{default:h(()=>[e("input",{type:"file",style:{display:"none"},ref:"img",accept:"image/*",onChange:t[0]||(t[0]=(...g)=>n.imgUpload&&n.imgUpload(...g))},null,544),e("div",Ds,[As,e("div",Us,[e("table",Ns,[e("tbody",null,[e("tr",null,[Ts,e("td",null,[e("div",Ss,[l(p,{ref:"bid",modelValue:i.bid,"onUpdate:modelValue":t[1]||(t[1]=g=>i.bid=g),rules:[()=>!!i.bid||"게시판을 선택하세요"],density:"compact",variant:"outlined",disabled:i.bidDisabled,style:{"max-width":"330px"},items:i.bidList},null,8,["modelValue","rules","disabled","items"])])])]),i.categoryUse=="yes"?(d(),c("tr",Es,[Bs,e("td",Fs,[e("div",Ms,[l(p,{modelValue:i.category,"onUpdate:modelValue":t[2]||(t[2]=g=>i.category=g),density:"compact",variant:"outlined",rules:[()=>!!i.category||"카테고리를 선택하세요"],ref:"category",style:{"max-width":"330px"},items:i.categoryList},null,8,["modelValue","rules","items"])])])])):f("",!0),i.secretUse=="yes"?(d(),c("tr",Rs,[Os,e("td",null,[e("div",Ps,[e("label",null,[B(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=g=>i.secret=g),value:"yes"},null,512),[[at,i.secret]]),v(" 비밀글 ")])])])])):f("",!0),e("tr",null,[$s,e("td",js,[e("div",qs,[l(u,{modelValue:i.subject,"onUpdate:modelValue":t[4]||(t[4]=g=>i.subject=g),rules:[()=>!!i.subject||"제목을 입력하세요"],density:"compact",variant:"outlined",ref:"subject",maxLength:"45"},null,8,["modelValue","rules"])])])]),e("tr",null,[zs,e("td",null,[e("div",Hs,[l(b,{ref:"myQuillEditor",onReady:n.onEditorReady,options:i.editorOption},null,8,["onReady","options"])])])])])])]),i.btype=="photo"?(d(),c("div",Gs,"이미지")):f("",!0),i.btype=="photo"?(d(),c("div",Qs,[e("table",Ys,[e("tbody",null,[e("tr",null,[Js,e("td",null,[e("div",Ws,[e("ul",Xs,[(d(!0),c(S,null,E(i.imgs,(g,m)=>(d(),c("li",Zs,[g.url?(d(),c("div",Ks,[e("div",{class:"is-img-close",onClick:q=>n.deleteImg(m)},[l(y,{icon:"fa-solid fa-xmark"})],8,ti),e("img",{src:g.url},null,8,ei)])):(d(),c("div",{key:1,class:"guide-img",onClick:q=>n.insertImg(m)},[e("div",ii,[l(y,{icon:"fa-solid fa-plus"})]),oi,e("div",ai,"권장 "+L(i.imgSize.text),1)],8,si))]))),256))])])])])])])])):f("",!0)]),e("div",li,[l(w,{class:"submit-button",type:"submit"},{default:h(()=>[v("게시글 저장")]),_:1})])]),_:1},8,["modelValue","onSubmit"])])])}const di=A(ks,[["render",ni],["__scopeId","data-v-93d044f6"]]);const ri={components:{boardArticleList:Ie,boardList:Is,boardArticleRegist:di},data(){return{cmd:0,boardId:"",articleType:"list"}},created(){},methods:{boardViewType(s){s.type=="list"?this.cmd=1:s.type=="modify"||s.type=="regist"?(s.type=="modify"?this.boardId=s.id:this.boardId="",this.cmd=2):s.type=="deleteArticleId"&&(this.boardId="")}}},R=s=>(U("data-v-7b7912bd"),s=s(),N(),s),ci={class:"page-container"},mi={class:"tab-box"},ui=R(()=>e("span",{class:"bold"},"게시판 관리",-1)),hi=R(()=>e("span",{class:"bold"},"게시글 관리",-1)),_i=R(()=>e("span",{class:"bold"},"게시글 등록",-1)),pi={key:0,class:"board-container"},bi={key:1,class:"board-container"},yi={key:2,class:"board-container"};function gi(s,t,o,a,i,n){const p=_("v-tab"),u=_("v-tabs"),b=_("boardList",!0),y=_("boardArticleList"),w=_("boardArticleRegist");return d(),c("div",ci,[e("div",mi,[l(u,{modelValue:i.cmd,"onUpdate:modelValue":t[0]||(t[0]=r=>i.cmd=r)},{default:h(()=>[l(p,{class:"tab"},{default:h(()=>[ui]),_:1}),l(p,{class:"tab"},{default:h(()=>[hi]),_:1}),l(p,{class:"tab"},{default:h(()=>[_i]),_:1})]),_:1},8,["modelValue"])]),i.cmd<1?(d(),c("div",pi,[l(b)])):i.cmd==1?(d(),c("div",bi,[l(y,{onBoardViewType:n.boardViewType},null,8,["onBoardViewType"])])):i.cmd==2?(d(),c("div",yi,[l(w,{id:this.boardId,onBoardViewType:n.boardViewType},null,8,["id","onBoardViewType"])])):f("",!0)])}const Vi=A(ri,[["render",gi],["__scopeId","data-v-7b7912bd"]]);export{Vi as default};
