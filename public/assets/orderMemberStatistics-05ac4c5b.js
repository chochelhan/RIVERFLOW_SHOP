import{C as S,p as k,a as V,b as w,L as E,c as A,d as B,P as G,e as M}from"./index-8c66701e.js";import{a as v,b5 as N,b6 as P}from"./apiService-0aea4262.js";import"./jquery-331624d0.js";import{_ as R,r,o as m,c as y,a as l,d as n,w as c,n as b,j as g,g as u,p as F,f as U}from"./index-e9ed42ea.js";import"./axios-c24e582b.js";S.register(k,V,w,E,A,B,G);const O={components:{LineChartGenerator:M},watch:{cmd(a){this.setInit()}},data(){return{chartData:{labels:[],datasets:[]},chartOptions:{responsive:!0,maintainAspectRatio:!1},chartShow:!1,height:600,dateClass:{year:"",month:"",day:"active"},dateType:"day",month:"",yearList:[],styear:"",enyear:"",dayList:[],menu1:!1,label:"",colorList:["#C62828","#4A148C","#3949AB","#1E88E5","#00ACC1","#00897B","#43A047","#827717","#FFB300","#F4511E"],memberList:[{title:"상위 10위 회원들",value:""}],userId:"",memberNames:{},cmd:0}},created(){this.setInit()},methods:{setInit(){const a=new Date,t=a.getFullYear();for(let o=t;o>=2010;o--)this.yearList.push({title:o+"년",value:o});this.styear=t-5,this.enyear=a.getFullYear();let e=parseInt(a.getMonth())+1;e<10&&(e="0"+e),this.month=t+"-"+e,this.getData()},getData(){const a=this.setDataParams();v.post(N,a,t=>{for(const e of t.data.memberList)this.memberNames[e.id]={name:e.name,uid:e.uid},this.memberList.push({title:e.name,value:e.id});this.setGraph(t.data.list)})},getDataList(){const a=this.setDataParams();v.post(P,a,t=>{this.setGraph(t.data)})},setDataParams(){return this.chartShow=!1,this.setDateList(),{dateType:this.dateType,styear:this.styear,enyear:this.enyear,month:this.month,user_id:this.userId,type:this.cmd<1?"price":"count"}},setDateList(){let a,t;switch(this.dateType){case"day":const e=this.month.split("-");a=new Date(e[0],e[1],0).getDate(),t=1,this.label=this.month+"월 주문 현황";break;case"month":a=12,t=1,this.styear==this.enyear?this.label=this.styear+"년 월별 주문 현황":this.label=this.styear+"년 ~ "+this.enyear+"년까지 월별 주문 현황";break;case"year":this.styear==this.enyear?this.label=this.styear+"년 주문 현황":this.label=this.styear+"년 ~ "+this.enyear+"년까지 연도별 주문 현황",a=this.enyear,t=this.styear;break}this.dayList=[];for(let e=t;e<=a;e++){let o=e<10?"0"+e:e;this.dayList.push(o)}},setDateType(a){this.dateType=a;for(const t in this.dateClass)t==a?this.dateClass[t]="active":this.dateClass[t]=""},search(){this.getDataList()},setGraph(a){this.chartData.labels=[];for(const o of this.dayList)this.chartData.labels.push(o);this.chartData.datasets=[];let t=0,e=[];if(a.length>0)for(const o of a){let s={};e=[];for(const d of o.datas)s[d.dateGroup]=d.total;for(const d of this.dayList)s[d]?e.push(s[d]):e.push(0);let h={label:this.memberNames[o.user_id].name+"("+this.memberNames[o.user_id].uid+")",backgroundColor:this.colorList[t],data:e};this.chartData.datasets.push(h),t++}else{for(const s of this.dayList)e.push(0);let o={label:"",backgroundColor:this.colorList[0],data:e};this.chartData.datasets.push(o)}this.chartShow=!0}}},_=a=>(F("data-v-b28341bf"),a=a(),U(),a),z={class:"page-container"},Y={class:"tab-box"},j=_(()=>l("span",{class:"bold"},"주문금액별 통계",-1)),K=_(()=>l("span",{class:"bold"},"주문건수별 통계",-1)),q={class:"product-container"},H=_(()=>l("div",{class:"statis-title"},"[구매확정된 주문만 통계에 반영합니다]",-1)),J={style:{display:"flex"}},Q={class:"date-box"},W={key:0,class:"month-box"},X={key:1,class:"year-box"},Z=_(()=>l("span",null,"-",-1)),$={class:"member-box",style:{"padding-left":"40px"}},tt={class:"button-box"},et={class:"graph-box"};function st(a,t,e,o,s,h){const d=r("v-tab"),D=r("v-tabs"),p=r("v-btn"),L=r("v-text-field"),f=r("v-select"),C=r("v-autocomplete"),I=r("font-awesome-icon"),x=r("LineChartGenerator"),T=r("v-progress-circular");return m(),y("div",z,[l("div",Y,[n(D,{modelValue:s.cmd,"onUpdate:modelValue":t[0]||(t[0]=i=>s.cmd=i)},{default:c(()=>[n(d,{class:"tab"},{default:c(()=>[j]),_:1}),n(d,{class:"tab"},{default:c(()=>[K]),_:1})]),_:1},8,["modelValue"])]),l("div",q,[H,l("div",J,[l("div",Q,[n(p,{variant:"outlined",class:b("white-button "+s.dateClass.year),onClick:t[1]||(t[1]=i=>h.setDateType("year"))},{default:c(()=>[u("년도별 ")]),_:1},8,["class"]),n(p,{variant:"outlined",class:b("white-button "+s.dateClass.month),onClick:t[2]||(t[2]=i=>h.setDateType("month"))},{default:c(()=>[u("월별 ")]),_:1},8,["class"]),n(p,{variant:"outlined",class:b("white-button "+s.dateClass.day),onClick:t[3]||(t[3]=i=>h.setDateType("day"))},{default:c(()=>[u(" 일별 ")]),_:1},8,["class"])]),s.dateClass.day=="active"?(m(),y("div",W,[n(L,{type:"date",density:"compact",variant:"outlined",modelValue:s.month,"onUpdate:modelValue":t[4]||(t[4]=i=>s.month=i)},null,8,["modelValue"])])):(m(),y("div",X,[n(f,{class:"year-item",modelValue:s.styear,"onUpdate:modelValue":t[5]||(t[5]=i=>s.styear=i),density:"compact",variant:"outlined",items:s.yearList},null,8,["modelValue","items"]),Z,n(f,{class:"year-item",density:"compact",variant:"outlined",modelValue:s.enyear,"onUpdate:modelValue":t[6]||(t[6]=i=>s.enyear=i),items:s.yearList},null,8,["modelValue","items"])])),l("div",$,[n(C,{"auto-select-first":"",density:"compact",variant:"outlined",solo:"",modelValue:s.userId,"onUpdate:modelValue":t[7]||(t[7]=i=>s.userId=i),items:s.memberList},null,8,["modelValue","items"])]),l("div",tt,[n(p,{variant:"outlined",class:"white-button submit-button",onClick:t[8]||(t[8]=i=>h.search())},{default:c(()=>[n(I,{icon:"fa-solid fa-magnifying-glass",style:{"margin-right":"6px"}}),u(" 검색 ")]),_:1})])]),l("div",et,[s.chartShow?(m(),g(x,{key:0,options:s.chartOptions,data:s.chartData,height:s.height},null,8,["options","data","height"])):(m(),g(T,{key:1,size:100,class:"progress-box",color:"#880E4F",indeterminate:""}))])])])}const rt=R(O,[["render",st],["__scopeId","data-v-b28341bf"]]);export{rt as default};
