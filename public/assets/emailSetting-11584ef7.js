import{a as b,ab as w,ac as V}from"./apiService-0aea4262.js";import{Q as O}from"./vue-quill.esm-bundler-54b853e3.js";import{J as R}from"./jquery-d0ecd42c.js";import{U as y}from"./util-c02dbcf9.js";import{_ as M,r as u,o as n,c as r,a as e,n as I,F as S,g as x,t as g,b as l,w as h,d as U,k as j,e as p,j as T,s as k,W as E,S as F,p as P,f as Q}from"./index-7c0b344a.js";import"./axios-c24e582b.js";const q={components:{QuillEditor:O},data(){return{form:null,baseActive:"active",emailId:"base",emailSetList:[{name:"회원가입",id:"join",use:"no"},{name:"회원가입 인증메일",id:"joinAuth",use:"no"},{name:"비밀번호 찾기",id:"findUpass",use:"no"},{name:"상품구매 미입금(무통장)",id:"notpay",use:"no"},{name:"상품구매 입금완료(무통장)",id:"income",use:"no"},{name:"상품발송",id:"delivery",use:"no"},{name:"주문취소완료",id:"CC",use:"no"},{name:"반품완료",id:"RC",use:"no"},{name:"교환완료",id:"EC",use:"no"}],replaceOrgList:{join:[{name:"회원이름",code:"userName"},{name:"회원아이디",code:"userId"},{name:"회원가입일",code:"regDate"}],joinAuth:[{name:"인증번호",code:"authNumber"}],findUpass:[{name:"회원이름",code:"userName"},{name:"회원아이디",code:"userId"},{name:"새비밀번호",code:"newpass"}],notpay:[{name:"회원이름",code:"userName"},{name:"회원아이디",code:"userId"},{name:"구매일",code:"orderDate"},{name:"구매정보",code:"orderInfo"},{name:"결제정보",code:"paymentInfo"},{name:"계좌정보",code:"accountInfo"},{name:"입금만료일",code:"bankExpire"}],buy:[{name:"회원이름",code:"userName"},{name:"회원아이디",code:"userId"},{name:"구매일",code:"orderDate"},{name:"구매정보",code:"orderInfo"},{name:"결제정보",code:"paymentInfo"}],income:[{name:"회원이름",code:"userName"},{name:"구매일",code:"orderDate"},{name:"구매정보",code:"orderInfo"},{name:"결제정보",code:"paymentInfo"}],delivery:[{name:"회원이름",code:"userName"},{name:"구매일",code:"orderDate"},{name:"구매정보",code:"orderInfo"},{name:"결제정보",code:"paymentInfo"}],OC:[{name:"회원이름",code:"userName"},{name:"구매일",code:"orderDate"},{name:"구매정보",code:"orderInfo"},{name:"결제정보",code:"paymentInfo"}],CC:[{name:"회원이름",code:"userName"},{name:"취소상품정보",code:"cancleProduct"},{name:"환불금 정보",code:"refundPrice"}],RC:[{name:"회원이름",code:"userName"},{name:"반품상품정보",code:"returnProduct"},{name:"환불금정보",code:"refundPrice"}],EC:[{name:"회원이름",code:"userName"},{name:"교환상품정보",code:"exchangeProduct"}]},emailTitle:"발송 이메일 정보",serverFlag:!1,email:"",name:"",subject:"",content:"",guse:"no",joinAuthReadOnly:!1,authTypeEmail:!1,refCheck:!1,replaceItemShow:!1,replaceItemList:[],emailDataList:{},editorOption:{placeholder:"내용을 입력하세요",theme:"snow",modules:{toolbar:{container:[[{header:1},{header:2}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["image"],["clean"]]}}}}},created(){this.getData()},methods:{onEditorReady(i){this.editor=i},emailErrors(i){return i?y.email(i)?!0:"잘못된 이메일 형식입니다":"발신이메일을 입력하세요"},nameErrors(i){return i?!0:"발신자 이름을 입력하세요"},initReplaceItem(){this.replaceItemList=this.replaceOrgList[this.emailId]},replaceTextOpen(){this.replaceItemShow=!0},setReplaceItem(i){const t=this.editor.getSelection();t?this.editor.insertText(t.index,"{{$"+i+"}}"):this.editor.insertText(0,"{{$"+i+"}}")},getData(){this.serverFlag||(this.serverFlag=!0,b.post(w,{gtype:"email"},i=>{if(this.serverFlag=!1,i.data.settingInfo){for(const t of i.data.settingInfo){const o=t.content?JSON.parse(t.content):"";if(t.gid=="base"&&o)this.name=o.name,this.email=o.email;else if(t.gid!="base"){const d=t.emailTemplate?t.emailTemplate:"";this.emailDataList[t.gid]={guse:t.guse,subject:o?o.subject:"",content:d}}}for(let t of this.emailSetList)this.emailDataList[t.id]&&(t.use=this.emailDataList[t.id].guse);if(i.data.joinSetting&&JSON.parse(i.data.joinSetting.member).authType=="email"){this.emailDataList.joinAuth.guse="yes",this.authTypeEmail=!0;for(let o of this.emailSetList)o.id=="joinAuth"&&(o.use="yes")}}}))},choiceMenu(i){let t={};for(let o of this.emailSetList)o.id==i?(o.active="active",t=o):o.active="";if(this.replaceItemShow=!1,this.emailId=i,i=="base")this.baseActive="active",this.emailTitle="발송 이메일 정보";else{this.initReplaceItem();let o="";if(this.emailDataList[this.emailId]){const d=this.emailDataList[this.emailId];this.guse=d.guse,this.subject=d.subject,o=d.content,this.subject?this.refCheck=!1:this.refCheck=!0}else this.guse="no",this.subject="",this.refCheck=!0;this.$refs.myQuillEditor?this.$refs.myQuillEditor.setHTML(o):setTimeout(()=>{this.$refs.myQuillEditor.setHTML(o)},300),this.joinAuthReadOnly=!1,this.authTypeEmail&&this.emailId=="joinAuth"&&(this.joinAuthReadOnly=!0),this.baseActive="",this.emailTitle=t.name}},validate(){if(this.serverFlag||!this.form)return;let i="",t={};if(this.emailId=="base")t={name:this.name,email:this.email};else{i=this.$refs.myQuillEditor.getHTML();const o=y.stripTags(i);if(o==null||!o||o==" "||o==""){let d={message:"메일 내용을 입력하세요"};this.emitter.emit("modalOpen",d);return}t={guse:this.guse,subject:this.subject,content:i}}t.gid=this.emailId,t.gtype="email",this.serverFlag=!0,this.emitter.emit("overlay","open"),b.post(V,t,o=>{this.serverFlag=!1,this.emitter.emit("overlay","hide"),this.emailDataList[this.emailId]={guse:this.guse,subject:this.subject,content:i};for(let s of this.emailSetList)if(s.id==this.emailId){s.use=this.guse;break}let d={message:"정보가 저장 되었습니다"};this.emitter.emit("modalOpen",d)})}},updated(){R(".quill-content-box .ql-editor").css("min-height","400px")}},m=i=>(P("data-v-e1566fa0"),i=i(),Q(),i),B={class:"page-container"},J={class:"imageSet-container"},z={class:"imageSet-list"},G=m(()=>e("div",{class:"imageSet-list-header"},[e("div",{class:"imageSet-title",style:{padding:"3px 0 0 0"}},"기본 정보")],-1)),H={class:"imageSet-list-body",style:{"min-height":"30px",height:"70px"}},W={class:"main-imageSet"},K={class:"main-li"},X=m(()=>e("div",{class:"gname"}," 발송 이메일 정보 ",-1)),Y=[X],Z=m(()=>e("div",{class:"imageSet-list-header",style:{"border-top":"solid 1px #ccc"}},[e("div",{class:"imageSet-title",style:{padding:"3px 0 0 0"}},"이메일 템플릿")],-1)),$={class:"imageSet-list-body"},ee={class:"main-imageSet"},te={class:"main-li"},ie=["onClick"],se={class:"gname"},oe={class:"imageSet-regist"},ae={key:0},ne={class:"imageSet-title"},le={key:0},de={class:"table-ul"},re={class:"label-input"},ce={class:"input-box"},me={class:"label-input"},ue={class:"input-box"},he=m(()=>e("div",{style:{color:"#880E4F","font-size":"12px","margin-bottom":"70px"}}," 반드시 서버에 메일서버를 셋팅하신후에 발신메일 도메인과 현재 도메인이 동일해야 메일이 정상 발송됩니다 ",-1)),pe={key:1},_e={class:"table-ul"},fe=m(()=>e("div",{class:"label"}," 사용여부 ",-1)),ve={class:"label-input"},ge={class:"radio-box"},be=["readonly"],ye=["readonly"],Ie={class:"label-input"},Se={class:"input-box",style:{width:"830px"}},xe={class:"quill-content-box",style:{width:"830px","padding-bottom":"12px","margin-top":"-10px"}},je={class:"replace-text-box"},Te=m(()=>e("span",null,"치환정보 삽입",-1)),ke=m(()=>e("span",null," 회원정보, 구매정보 등을 실제내용에 맞게 메일내용에 삽입할수 있습니다 ",-1)),Ee={key:0,class:"replace-item-box"},Le={class:"replace-item-header"},Ce={class:"replace-item-body"},Ae={class:"button-row"};function De(i,t,o,d,s,c){const _=u("font-awesome-icon"),f=u("v-text-field"),L=u("v-tooltip"),v=u("v-btn"),C=u("quill-editor"),A=u("v-form");return n(),r("div",B,[e("div",J,[e("div",z,[G,e("div",H,[e("ul",W,[e("li",K,[e("div",{class:I("main-data "+s.baseActive),onClick:t[0]||(t[0]=a=>c.choiceMenu("base"))},Y,2)])])]),Z,e("div",$,[(n(!0),r(S,null,x(s.emailSetList,(a,D)=>(n(),r("ul",ee,[e("li",te,[e("div",{class:I("main-data "+a.active),onClick:N=>c.choiceMenu(a.id)},[e("div",se,[p(g(a.name)+" ",1),a.use=="yes"?(n(),T(_,{key:0,icon:"fa-solid fa-eye"})):(n(),T(_,{key:1,icon:"fa-solid fa-eye-slash"}))])],10,ie)])]))),256))])]),e("div",oe,[s.emailId?(n(),r("div",ae,[e("div",ne,g(s.emailTitle),1),l(A,{modelValue:s.form,"onUpdate:modelValue":t[8]||(t[8]=a=>s.form=a),novalidate:"",onSubmit:U(c.validate,["prevent"])},{default:h(()=>[s.emailId=="base"?(n(),r("div",le,[e("ul",de,[e("li",null,[e("div",re,[e("div",ce,[l(f,{modelValue:s.name,"onUpdate:modelValue":t[1]||(t[1]=a=>s.name=a),rules:[c.nameErrors],density:"compact",variant:"outlined",label:"발신자 이름",placeholder:"발신자 이름을 입력해주세요"},null,8,["modelValue","rules"])])])]),e("li",null,[e("div",me,[e("div",ue,[l(f,{modelValue:s.email,"onUpdate:modelValue":t[2]||(t[2]=a=>s.email=a),rules:[c.emailErrors],density:"compact",variant:"outlined",label:"발신 이메일",placeholder:"발신 이메일 정보를 입력해주세요"},null,8,["modelValue","rules"])])])])]),he])):(n(),r("div",pe,[e("ul",_e,[e("li",null,[fe,e("div",ve,[e("div",ge,[e("label",null,[k(e("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=a=>s.guse=a),readonly:s.joinAuthReadOnly,value:"yes"},null,8,be),[[E,s.guse]]),p(" 사용 ")]),e("label",null,[k(e("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=a=>s.guse=a),readonly:s.joinAuthReadOnly,value:"no"},null,8,ye),[[E,s.guse]]),p(" 사용안함 ")])])])]),e("li",null,[e("div",Ie,[e("div",Se,[l(f,{modelValue:s.subject,"onUpdate:modelValue":t[5]||(t[5]=a=>s.subject=a),rules:[()=>!!s.subject||"이메일제목을 입력하세요"],ref:"subject",density:"compact",variant:"outlined",label:"이메일 제목",placeholder:"이메일제목을 입력해주세요"},null,8,["modelValue","rules"])])])])]),e("div",xe,[e("div",je,[l(v,{onClick:t[6]||(t[6]=a=>c.replaceTextOpen()),class:"white-button",variant:"outlined",rounded:""},{default:h(()=>[Te,l(L,{bottom:""},{activator:h(({props:a})=>[l(_,F(a,{class:"help-icon",icon:"fa-solid fa-circle-question"}),null,16)]),default:h(()=>[ke]),_:1})]),_:1}),s.replaceItemShow?(n(),r("div",Ee,[e("div",Le,[l(_,{class:"icon",onClick:t[7]||(t[7]=a=>s.replaceItemShow=!1),icon:"fa-solid fa-xmark"})]),e("div",Ce,[e("ul",null,[(n(!0),r(S,null,x(s.replaceItemList,(a,D)=>(n(),r("li",null,[l(v,{class:"item-btn",onClick:N=>c.setReplaceItem(a.code),rounded:"",variant:"outlined",color:"#01579B"},{default:h(()=>[p(g(a.name),1)]),_:2},1032,["onClick"])]))),256))])])])):j("",!0)]),l(C,{ref:"myQuillEditor",onReady:c.onEditorReady,options:s.editorOption},null,8,["onReady","options"])])])),e("div",Ae,[l(v,{class:"submit-button",style:{width:"250px"},type:"submit"},{default:h(()=>[p("정보 저장")]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):j("",!0)])])])}const Ue=M(q,[["render",De],["__scopeId","data-v-e1566fa0"]]);export{Ue as default};
