import{a as m,R as _,Q as v}from"./apiService-6a3981ff.js";import{_ as b,m as A,r as c,o as P,c as S,a as s,b as r,w as u,d as V,s as y,v as k,e as a,t as T,p as x,f as w}from"./index-7c0b344a.js";import{m as C}from"./mobile-8dd88b05.js";import"./axios-c24e582b.js";const I={name:"mobileShippingRegist",data(){return{form:null,shippingId:"",shippingTitle:"",shippingName:"",shippingZip:"",shippingAddr1:"",shippingAddr2:"",shippingPcs:"",shippingPcsError:!1,jibunAddr1:"",defaultShipping:!1,shippingRegTitle:"추가",serverFlag:!1,locationCount:1}},created(){this.shippingId=this.$route.params.id,this.shippingId!="new"&&(this.setTitle("배송지 수정"),this.getData())},methods:{...A(C,["setClass","setTitle"]),getData(){m.post(_,{id:this.shippingId},e=>{this.updateItem(e.data)})},updateItem(e){this.shippingRegTitle="수정",this.shippingTitle=e.title,this.shippingName=e.rname,this.shippingAddr1=e.raddr1,this.shippingZip=e.rpost,this.shippingAddr2=e.raddr2,this.shippingPcs=e.rpcs,e.defaultShipping=="yes"?this.defaultShipping=!0:this.defaultShipping=!1,this.registShow=!0},validate(){if(!this.serverFlag&&this.form){if(this.shippingPcsError)return;let e={id:"",title:this.shippingTitle,jibunAddr:this.jibunAddr1,defaultShipping:this.defaultShipping?"yes":"no",rname:this.shippingName,rpcs:this.shippingPcs,raddr1:this.shippingAddr1,raddr2:this.shippingAddr2,rpost:this.shippingZip};this.shippingId!="new"&&(e.id=this.shippingId),this.emitter.emit("overlay","open"),this.serverFlag=!0,m.post(v,e,i=>{this.emitter.emit("overlay","hide"),this.serverFlag=!1,this.$router.go(-1*this.locationCount);const l={message:"배송지 정보를 "+this.shippingRegTitle+" 하였습니다"};this.emitter.emit("modalOpen",l)})}},showDaumAddress(){const e=this.$refs.wrap,i=Math.max(document.body.scrollTop,document.documentElement.scrollTop);new window.daum.Postcode({oncomplete:l=>{this.locationCount++;let o="";l.userSelectedType==="R"?o=l.roadAddress:o=l.jibunAddress,this.shippingZip=l.zonecode,this.shippingAddr1=o,this.jibunAddr1=l.jibunAddress,e.style.display="none",document.body.scrollTop=i},onresize:function(l){},width:"100%",height:"100%"}).embed(e),e.style.display="block"},foldDaumPostcode(){const e=this.$refs.wrap;e.style.display="none"},shippingTitleCheck(){return this.shippingTitle?!0:"배송지명을 입력하세요"},shippingNameCheck(){return this.shippingName?!0:"수령인을 입력하세요"},shippingAddr1Check(){return this.shippingAddr1?!0:"주소를 입력하세요"},shippingAddr2Check(){return this.shippingAddr2?!0:"상세주소를 입력하세요"},shippingPcsCheck(){if(this.shippingPcs){let e=this.shippingPcs.toString().replace(/-/gi,"");if(this.shippingPcsError=!0,isNaN(e))return"휴대폰번호는 숫자만 입력가능합니다";{let i=e.substr(0,3),l=e.substr(3,4),o=e.substr(7,4);if(e.length>3&&e.length<8)this.shippingPcs=i+"-"+l;else if(e.length>=8&&e.length<=11)this.shippingPcs=i+"-"+l+"-"+o,this.shippingPcsError=!1;else if(e.length>11)return"잘못된 휴대폰번호 입니다"}return!0}else return"연락처를 입력하세요"},registShippingHide(){this.$router.back()}}},h=e=>(x("data-v-e01eb0ea"),e=e(),w(),e),N={class:"mypage-container"},R={ref:"wrap",id:"daumFrame"},U={class:"shipping-info"},D=h(()=>s("div",{class:"label"},[a(" 배송지명"),s("span",null,"*")],-1)),E={class:"field-box"},F=h(()=>s("div",{class:"label"},[a(" 수령인"),s("span",null,"*")],-1)),j={class:"field-box"},B=h(()=>s("div",{class:"label"},[a(" 주소"),s("span",null,"*")],-1)),Z={class:"field-box"},G={class:"flex-area"},M=h(()=>s("span",null,"우편번호 검색",-1)),z=h(()=>s("div",{class:"label"},[a(" 연락처"),s("span",null,"*")],-1)),H={class:"field-box"},L={class:"shipping-checkbox"},W={style:{"font-weight":"bold",cursor:"pointer"}},O={class:"button-row"},Y=h(()=>s("span",null,"취소",-1));function Q(e,i,l,o,n,p){const d=c("v-text-field"),g=c("v-btn"),f=c("v-form");return P(),S("div",N,[s("div",R,[s("img",{src:"//t1.daumcdn.net/postcode/resource/images/close.png",id:"btnFoldWrap",style:{cursor:"pointer",position:"absolute",right:"0px",top:"-1px","z-index":"1"},onClick:i[0]||(i[0]=(...t)=>p.foldDaumPostcode&&p.foldDaumPostcode(...t)),alt:"접기 버튼"})],512),r(f,{modelValue:n.form,"onUpdate:modelValue":i[10]||(i[10]=t=>n.form=t),class:"order-form",novalidate:"",onSubmit:V(p.validate,["prevent"])},{default:u(()=>[s("ul",U,[s("li",null,[D,s("div",E,[r(d,{modelValue:n.shippingTitle,"onUpdate:modelValue":i[1]||(i[1]=t=>n.shippingTitle=t),ref:"shippingTitle",rules:[p.shippingTitleCheck],placeholder:"배송지명",rounded:"",variant:"outlined"},null,8,["modelValue","rules"])])]),s("li",null,[F,s("div",j,[r(d,{modelValue:n.shippingName,"onUpdate:modelValue":i[2]||(i[2]=t=>n.shippingName=t),ref:"shippingName",rules:[p.shippingNameCheck],placeholder:"수령인 이름",rounded:"",variant:"outlined"},null,8,["modelValue","rules"])])]),s("li",null,[B,s("div",Z,[s("div",G,[r(d,{modelValue:n.shippingZip,"onUpdate:modelValue":i[3]||(i[3]=t=>n.shippingZip=t),placeholder:"우편번호",readonly:!0,rounded:"",variant:"outlined"},null,8,["modelValue"]),r(g,{class:"blackButton",type:"button",onClick:i[4]||(i[4]=t=>p.showDaumAddress()),variant:"outlined",rounded:""},{default:u(()=>[M]),_:1})]),r(d,{modelValue:n.shippingAddr1,"onUpdate:modelValue":i[5]||(i[5]=t=>n.shippingAddr1=t),ref:"shippingAddr1",rules:[p.shippingAddr1Check],readonly:!0,placeholder:"주소를 입력하세요",rounded:"",variant:"outlined"},null,8,["modelValue","rules"]),r(d,{modelValue:n.shippingAddr2,"onUpdate:modelValue":i[6]||(i[6]=t=>n.shippingAddr2=t),ref:"shippingAddr2",rules:[p.shippingAddr2Check],placeholder:"상세주소를 입력하세요",rounded:"",variant:"outlined"},null,8,["modelValue","rules"])])]),s("li",null,[z,s("div",H,[r(d,{modelValue:n.shippingPcs,"onUpdate:modelValue":i[7]||(i[7]=t=>n.shippingPcs=t),ref:"shippingPcs",maxLength:"13",rules:[p.shippingPcsCheck],placeholder:"휴대폰번호를 입력하세요",rounded:"",variant:"outlined"},null,8,["modelValue","rules"])])])]),s("div",L,[s("label",W,[y(s("input",{type:"checkbox","onUpdate:modelValue":i[8]||(i[8]=t=>n.defaultShipping=t)},null,512),[[k,n.defaultShipping]]),a(" 기본 배송지로 등록 ")])]),s("div",O,[r(g,{class:"whiteButton",onClick:i[9]||(i[9]=t=>p.registShippingHide()),rounded:"",variant:"outlined"},{default:u(()=>[Y]),_:1}),r(g,{class:"blackButton",type:"submit",rounded:"",variant:"outlined"},{default:u(()=>[s("span",null,"배송지 "+T(n.shippingRegTitle),1)]),_:1})])]),_:1},8,["modelValue","onSubmit"])])}const $=b(I,[["render",Q],["__scopeId","data-v-e01eb0ea"]]);export{$ as default};
