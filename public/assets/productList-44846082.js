import{a as _,aw as D,ax as N,ay as T}from"./apiService-0aea4262.js";import{U as y}from"./util-5fdb7bcf.js";import{s as U}from"./shopTable-d56388e3.js";import{i as P}from"./inventoryHistory-e244ea78.js";import{_ as A,r as h,o as L,c as x,a as s,u as w,q as b,v as g,g as c,d,w as v,t as B,e as C,p as E,f as H}from"./index-e9ed42ea.js";import"./axios-c24e582b.js";import"./jquery-331624d0.js";const F={components:{shopTable:U,inventoryHistory:P},watch:{datalimit(o){this.getDataList(1)},cate1(o){this.subCategoryList=[];let t={title:"2차카테고리 선택",value:""};this.subCategoryList.push(t),this.subSubCategoryList=[];let a={title:"3차카테고리 선택",value:""};if(this.subSubCategoryList.push(a),this.cate2="",this.cate3="",this.orgSubCategoryList=[],o){for(let l of this.orgCategoryList)if(l.id==o&&l.subList&&l.subList.length>0)for(let e of l.subList)t={title:e.cname,value:e.id},this.subCategoryList.push(t),this.orgSubCategoryList.push(e)}},cate2(o){this.subSubCategoryList=[];let t={title:"3차카테고리 선택",value:""};if(this.subSubCategoryList.push(t),this.cate3="",o){for(let a of this.orgSubCategoryList)if(a.id==o&&a.subList&&a.subList.length>0)for(let l of a.subList)t={title:l.cname,value:l.id},this.subSubCategoryList.push(t)}}},data(){return{util:y,form:null,columns:[{name:"선택",id:"id",type:"allCheckbox",width:70},{name:"변경이력",id:"id",width:100,type:"button",action:"inventoryHistory"},{name:"이미지",id:"listImg",width:100,type:"image"},{name:"상품명",id:"pname",width:300,sort:!0},{name:"판매가능재고",id:"able_amt",width:120,sort:!0},{name:"판매불가재고",id:"disable_amt",width:120,sort:!0},{name:"총재고",id:"total_amt",width:100,sort:!0},{name:"판매된갯수",id:"sale_amt",width:110,sort:!0},{name:"판매상태",id:"pstatus",width:100},{name:"카테고리",id:"category",width:300},{name:"브랜드",id:"brandId",width:200},{name:"정가",id:"price",width:100},{name:"할인가",id:"dcprice",width:100},{name:"등록일",id:"created_at",sort:!0,width:100}],fixed:9,productList:[],paging:{total:"",links:[],currentPage:1,lastPage:1},categoryListNames:{},categoryList:[],subCategoryList:[],subSubCategoryList:[],orgCategoryList:[],orgSubCategoryList:[],cate1:"",cate2:"",cate3:"",brandList:[],brandListNames:{},page:1,datalimit:20,pstatusList:{sale:"정상판매",hidden:"노출금지",soldout:"품절"},serviceTypeList:{normal:"배송상품군",service:"서비스상품군"},yesNoList:{yes:"가능",no:"불가능"},platform:[],pstatus:[],keywordCmd:"pname",keywordCmdList:[{title:"상품명",value:"pname"},{title:"키워드",value:"keyword"}],keyword:"",brand:"",stdate:"",endate:"",vmenu1:!1,vmenu2:!1,dateCmd:"created_at",dateCmdList:[{title:"상품등록일",value:"created_at"},{title:"판매시작일",value:"periodStdate"},{title:"판매종료일",value:"periodEndate"}],datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],ivtId:"",stickyTop:0,dataSort:{field:"id",sort:"desc"},inventoryDialog:!1,productInfo:{},type:"up",typeList:[{title:"입고",value:"up"},{title:"출고",value:"down"}],amt:"",updateBoxShow:!1,ids:[],formHasErrors:!1}},created(){this.getData(1)},methods:{searchReset(){this.keywordCmd="pname",this.keyword="",this.brand="",this.stdate="",this.endate="",this.dateCmd="created_at",this.cate1="",this.cate2="",this.cate3="",this.platform=[],this.pstatus=[]},getSearchParams(o){let t=[];this.cate1&&t.push(this.cate1),this.cate2&&t.push(this.cate2),this.cate3&&t.push(this.cate3);let a={orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit,page:o,keywordCmd:this.keywordCmd,keyword:this.keyword,brand:this.brand,stdate:this.stdate,endate:this.endate,dateCmd:this.dateCmd,category:t.length>0?t.join(","):""};return this.platform.length>0&&(a.platform=this.platform.join(",")),this.pstatus.length>0&&(a.pstatus=this.pstatus.join(",")),a},getData(o){const t=this.getSearchParams(o);_.post(D,t,a=>{this.orgCategoryList=a.data.categoryList;let l={title:"1차카테고리 선택",value:""};this.categoryList.push(l);let e={title:"2차카테고리 선택",value:""};this.subCategoryList.push(e);let u={title:"3차카테고리 선택",value:""};this.subSubCategoryList.push(u),this.categoryListNames={};for(let n of a.data.categoryList)if(l={title:n.cname,value:n.id},this.categoryList.push(l),this.categoryListNames[n.id]=n.cname,n.subList){for(let m of n.subList)if(this.categoryListNames[m.id]=m.cname,m.subList)for(let f of m.subList)this.categoryListNames[f.id]=f.cname}this.brandListNames={};let p={title:"브랜드 선택",value:""};this.brandList.push(p);for(let n of a.data.brandList){let m={title:n.bname,value:n.id};this.brandList.push(m),this.brandListNames[n.id]=n.bname}this.setDataList(a.data.productList)})},getDataList(o){const t=this.getSearchParams(o);_.post(N,t,a=>{this.setDataList(a.data)})},setDataList(o){this.productList=[],this.paging={total:o.total,links:o.links,currentPage:o.current_page,lastPage:o.last_page};const t=parseInt(o.total)-this.datalimit*(parseInt(o.current_page)-1);let a=0;for(let l of o.data){l.number=t-a,l.created_at=l.created_at.substring(0,10),l.able_amt?parseInt(l.able_amt)<1&&(l.pstatus="soldout"):l.pstatus="soldout",l.able_amt=y.numberFormat(l.able_amt),l.disable_amt=y.numberFormat(l.disable_amt),l.total_amt=y.numberFormat(l.total_amt),l.sale_amt=y.numberFormat(l.sale_amt);let e=l.category1.split(","),u=this.categoryListNames[e[0]];e[1]&&(u+=" > "+this.categoryListNames[e[1]]),e[2]&&(u+=" > "+this.categoryListNames[e[2]]),l.category=u,l.pstatus=this.pstatusList[l.pstatus],l.serviceType=this.serviceTypeList[l.serviceType],l.price=y.numberFormat(l.price),l.dcprice=y.numberFormat(l.dcprice),l.brandId=this.brandListNames[l.brandId],this.productList.push(l),a++}},pageMove(o){this.getDataList(o.page)},inventoryHistory(o){this.inventoryDialog=!0;for(const t of this.productList)if(t.id==o.id){this.ivtId=t.ivtId,this.productInfo={listImg:t.listImg,pname:t.pname,dcprice:t.dcprice,price:t.price,category:t.category};break}},search(){this.getDataList(1)},tableEventAction(o){switch(o.type){case"dataSort":this.dataSort=o.sort,this.getDataList(1);break}},updateAmt(){let o={};if(this.ids.length<1){o={message:"재고 변경할 상품을 하나 이상 선택하세요"},this.emitter.emit("modalOpen",o);return}this.form&&(o={type:"confirm",message:"선택된 상품의 재고를 변경하시겠습니까?",doAction:()=>{this.actionAmt()}},this.emitter.emit("modalOpen",o))},actionAmt(){const o={ids:this.ids,amt:this.amt,type:this.type};this.emitter.emit("overlay","open"),_.post(T,o,t=>{this.emitter.emit("overlay","hide");let a={message:"선택된 상품의 재고가 변경되었습니다"};this.amt="",this.type="up",this.updateBoxShow=!1,this.emitter.emit("modalOpen",a),this.getDataList(this.page)})},updateBoxToggle(){this.updateBoxShow?this.updateBoxShow=!1:this.updateBoxShow=!0},checkDataList(o){this.ids=[];let t={};for(let a in o)a&&(t[a]=a);for(let a of this.productList)t[a.id]&&a.ivtId&&this.ids.push(a.ivtId)}}},r=o=>(E("data-v-00066449"),o=o(),H(),o),M={class:"page-container",style:{position:"relative"}},O=r(()=>s("div",{class:"tip-strong"},"미옵션상품/추가옵션상품중 필수옵션이 없는 상품의 재고를 표시합니다",-1)),R={class:"table-box"},j={class:"search-box"},Y={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},z=r(()=>s("th",null,"판매상태",-1)),G={style:{display:"flex"}},q=r(()=>s("div",{style:{width:"20px"}},null,-1)),J=r(()=>s("div",{style:{width:"20px"}},null,-1)),K=r(()=>s("th",null,"플랫폼",-1)),Q={style:{display:"flex"}},W=r(()=>s("div",{style:{width:"20px"}},null,-1)),X=r(()=>s("th",null,"검색어",-1)),Z={style:{display:"flex"}},$=r(()=>s("th",null,"브랜드",-1)),tt=r(()=>s("th",null,"카테고리",-1)),et={colspan:"3"},st={style:{display:"flex"}},it=r(()=>s("div",{style:{width:"20px"}},null,-1)),ot=r(()=>s("div",{style:{width:"20px"}},null,-1)),lt=r(()=>s("th",{style:{"border-radius":"5px"}},"기간검색",-1)),at={colspan:"3"},dt={style:{display:"flex"}},nt={style:{"margin-right":"20px"}},rt={style:{width:"160px"}},ut=r(()=>s("div",{style:{width:"30px","text-align":"center","line-height":"50px",height:"50px"}},"~ ",-1)),mt={style:{width:"160px"}},pt={class:"button-row"},ct=r(()=>s("span",null,"초기화",-1)),ht=r(()=>s("span",null,"검색",-1)),yt={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},vt={class:"sub-title"},bt={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},gt={class:"total"},ft={key:0,class:"status-change-box"},_t={class:"select-box"},Lt={class:"number-box"},xt={class:"input-box price",style:{width:"160px"}},wt={class:"button-box",style:{"max-width":"250px"}},Ct={class:"modal-layout",style:{height:"760px"}},Vt={class:"modal-header"},It=r(()=>s("div",{class:"modal-title"},"재고 변경 이력",-1)),kt={key:0,class:"modal-body",style:{height:"700px"}};function St(o,t,a,l,e,u){const p=h("v-select"),n=h("v-text-field"),m=h("v-btn"),f=h("v-form"),V=h("shopTable"),I=h("font-awesome-icon"),k=h("inventoryHistory"),S=h("v-dialog");return L(),x("div",M,[O,s("div",R,[s("form",{novalidate:"",onSubmit:t[15]||(t[15]=w((...i)=>u.search&&u.search(...i),["prevent"]))},[s("div",j,[s("table",Y,[s("tbody",null,[s("tr",null,[z,s("td",null,[s("div",G,[s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=i=>e.pstatus=i),value:"sale"},null,512),[[g,e.pstatus]]),c(" 정상판매 ")]),q,s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=i=>e.pstatus=i),value:"hidden"},null,512),[[g,e.pstatus]]),c(" 노출중지 ")]),J,s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=i=>e.pstatus=i),value:"soldout"},null,512),[[g,e.pstatus]]),c(" 품절 ")])])]),K,s("td",null,[s("div",Q,[s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=i=>e.platform=i),value:"pc"},null,512),[[g,e.platform]]),c(" PC ")]),W,s("label",null,[b(s("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=i=>e.platform=i),value:"mw"},null,512),[[g,e.platform]]),c(" 모바일 웹 ")])])])]),s("tr",null,[X,s("td",null,[s("div",Z,[d(p,{modelValue:e.keywordCmd,"onUpdate:modelValue":t[5]||(t[5]=i=>e.keywordCmd=i),density:"compact",variant:"outlined",style:{"max-width":"150px"},items:e.keywordCmdList},null,8,["modelValue","items"]),d(n,{style:{width:"300px","margin-left":"20px"},density:"compact",variant:"outlined",modelValue:e.keyword,"onUpdate:modelValue":t[6]||(t[6]=i=>e.keyword=i)},null,8,["modelValue"])])]),$,s("td",null,[d(p,{modelValue:e.brand,"onUpdate:modelValue":t[7]||(t[7]=i=>e.brand=i),density:"compact",variant:"outlined",style:{"max-width":"200px"},items:e.brandList},null,8,["modelValue","items"])])]),s("tr",null,[tt,s("td",et,[s("div",st,[d(p,{modelValue:e.cate1,"onUpdate:modelValue":t[8]||(t[8]=i=>e.cate1=i),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:e.categoryList},null,8,["modelValue","items"]),it,d(p,{modelValue:e.cate2,"onUpdate:modelValue":t[9]||(t[9]=i=>e.cate2=i),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:e.subCategoryList},null,8,["modelValue","items"]),ot,d(p,{modelValue:e.cate3,"onUpdate:modelValue":t[10]||(t[10]=i=>e.cate3=i),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:e.subSubCategoryList},null,8,["modelValue","items"])])])]),s("tr",null,[lt,s("td",at,[s("div",dt,[s("div",nt,[d(p,{modelValue:e.dateCmd,"onUpdate:modelValue":t[11]||(t[11]=i=>e.dateCmd=i),density:"compact",variant:"outlined",style:{"max-width":"150px"},items:e.dateCmdList},null,8,["modelValue","items"])]),s("div",rt,[d(n,{type:"date",modelValue:e.stdate,"onUpdate:modelValue":t[12]||(t[12]=i=>e.stdate=i),density:"compact",variant:"outlined"},null,8,["modelValue"])]),ut,s("div",mt,[d(n,{type:"date",density:"compact",variant:"outlined",modelValue:e.endate,"onUpdate:modelValue":t[13]||(t[13]=i=>e.endate=i)},null,8,["modelValue"])])])])])])])]),s("div",pt,[d(m,{class:"white-button",variant:"outlined",onClick:t[14]||(t[14]=i=>u.searchReset())},{default:v(()=>[ct]),_:1}),d(m,{class:"search-button",type:"submit",variant:"outlined"},{default:v(()=>[ht]),_:1})])],32),s("div",yt,[s("div",vt,[c(" 상품 리스트 "),d(m,{depressed:"",color:"primary",variant:"outlined",class:"sdel-button",rounded:"",onClick:t[16]||(t[16]=i=>u.updateBoxToggle())},{default:v(()=>[c(" 재고 변경 ")]),_:1})]),s("div",bt,[s("div",gt,"전체상품수 "+B(e.util.numberFormat(e.paging.total))+"개",1),d(p,{modelValue:e.datalimit,"onUpdate:modelValue":t[17]||(t[17]=i=>e.datalimit=i),density:"compact","bg-color":"#fff",style:{"max-width":"100px"},items:e.datalimitList},null,8,["modelValue","items"])])]),d(f,{modelValue:e.form,"onUpdate:modelValue":t[21]||(t[21]=i=>e.form=i),onSubmit:w(u.updateAmt,["prevent"])},{default:v(()=>[e.updateBoxShow?(L(),x("div",ft,[s("div",_t,[d(p,{modelValue:e.type,"onUpdate:modelValue":t[18]||(t[18]=i=>e.type=i),density:"compact",variant:"outlined",style:{width:"150px"},items:e.typeList},null,8,["modelValue","items"])]),s("div",Lt,[s("div",xt,[d(n,{density:"compact",variant:"outlined",modelValue:e.amt,"onUpdate:modelValue":t[19]||(t[19]=i=>e.amt=i),ref:"amt",suffix:"개",rules:[()=>!!e.amt||"변경재고를 입력하세요",()=>!isNaN(e.amt)||"재고는 숫자만 입력가능합니다"]},null,8,["modelValue","rules"])])]),s("div",wt,[d(m,{depressed:"",color:"#006064",variant:"outlined",type:"submit",class:"sdel-button",style:{width:"70px"},rounded:""},{default:v(()=>[c("확인 ")]),_:1}),d(m,{depressed:"",color:"#880E4F",variant:"outlined",type:"button",class:"sdel-button",style:{width:"70px","margin-left":"10px"},rounded:"",onClick:t[20]||(t[20]=i=>e.updateBoxShow=!1)},{default:v(()=>[c("취소 ")]),_:1})])])):C("",!0)]),_:1},8,["modelValue","onSubmit"]),d(V,{datas:e.productList,updateStickyTop:e.stickyTop,fixed:e.fixed,onPageMove:u.pageMove,onParentEvent:u.tableEventAction,onInventoryHistory:u.inventoryHistory,columns:e.columns,paging:e.paging,onCheckDataList:u.checkDataList},null,8,["datas","updateStickyTop","fixed","onPageMove","onParentEvent","onInventoryHistory","columns","paging","onCheckDataList"])]),d(S,{modelValue:e.inventoryDialog,"onUpdate:modelValue":t[24]||(t[24]=i=>e.inventoryDialog=i),width:"800",persistent:"",rounded:"",style:{"z-index":"100"}},{default:v(()=>[s("div",Ct,[s("div",Vt,[It,s("div",{class:"modal-close",onClick:t[22]||(t[22]=i=>e.inventoryDialog=!1)},[d(I,{icon:"fa-solid fa-circle-xmark"})])]),e.inventoryDialog?(L(),x("div",kt,[d(k,{ivtId:e.ivtId,productInfo:e.productInfo,onInventoryDialogHide:t[23]||(t[23]=i=>e.inventoryDialog=!1)},null,8,["ivtId","productInfo"])])):C("",!0)])]),_:1},8,["modelValue"])])}const Et=A(F,[["render",St],["__scopeId","data-v-00066449"]]);export{Et as default};
