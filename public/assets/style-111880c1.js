import{L as q,M as re,I as z,N as T,O as N,C as H,o as j,c as W,s as F,P as X,a as C,Q as V,n as L,u as B,d as ae,k as oe,F as J,D as ie,R as se,S as ce,g as ue,b as de,T as fe,U as he,V as ve}from"./index-7c0b344a.js";var me=typeof global=="object"&&global&&global.Object===Object&&global;const be=me;var pe=typeof self=="object"&&self&&self.Object===Object&&self,ge=be||pe||Function("return this")();const Z=ge;var ye=Z.Symbol;const R=ye;var ee=Object.prototype,Se=ee.hasOwnProperty,Te=ee.toString,P=R?R.toStringTag:void 0;function we(e){var l=Se.call(e,P),t=e[P];try{e[P]=void 0;var s=!0}catch{}var o=Te.call(e);return s&&(l?e[P]=t:delete e[P]),o}var xe=Object.prototype,Ee=xe.toString;function Ie(e){return Ee.call(e)}var Oe="[object Null]",ze="[object Undefined]",U=R?R.toStringTag:void 0;function Pe(e){return e==null?e===void 0?ze:Oe:U&&U in Object(e)?we(e):Ie(e)}function Le(e){return e!=null&&typeof e=="object"}var Me="[object Symbol]";function $e(e){return typeof e=="symbol"||Le(e)&&Pe(e)==Me}var He=/\s/;function je(e){for(var l=e.length;l--&&He.test(e.charAt(l)););return l}var We=/^\s+/;function Ce(e){return e&&e.slice(0,je(e)+1).replace(We,"")}function D(e){var l=typeof e;return e!=null&&(l=="object"||l=="function")}var Y=0/0,Re=/^[-+]0x[0-9a-f]+$/i,De=/^0b[01]+$/i,ke=/^0o[0-7]+$/i,_e=parseInt;function M(e){if(typeof e=="number")return e;if($e(e))return Y;if(D(e)){var l=typeof e.valueOf=="function"?e.valueOf():e;e=D(l)?l+"":l}if(typeof e!="string")return e===0?e:+e;e=Ce(e);var t=De.test(e);return t||ke.test(e)?_e(e.slice(2),t?2:8):Re.test(e)?Y:+e}function Ae(e,l,t){return e===e&&(t!==void 0&&(e=e<=t?e:t),l!==void 0&&(e=e>=l?e:l)),e}function $(e,l,t){return t===void 0&&(t=l,l=void 0),t!==void 0&&(t=M(t),t=t===t?t:0),l!==void 0&&(l=M(l),l=l===l?l:0),Ae(M(e),l,t)}var Ne=function(){return Z.Date.now()};const A=Ne;var Be="Expected a function",Fe=Math.max,Xe=Math.min;function te(e,l,t){var s,o,u,a,i,c,f=0,v=!1,d=!1,b=!0;if(typeof e!="function")throw new TypeError(Be);l=M(l)||0,D(t)&&(v=!!t.leading,d="maxWait"in t,u=d?Fe(M(t.maxWait)||0,l):u,b="trailing"in t?!!t.trailing:b);function x(r){var n=s,h=o;return s=o=void 0,f=r,a=e.apply(h,n),a}function E(r){return f=r,i=setTimeout(p,l),v?x(r):a}function I(r){var n=r-c,h=r-f,S=l-n;return d?Xe(S,u-h):S}function w(r){var n=r-c,h=r-f;return c===void 0||n>=l||n<0||d&&h>=u}function p(){var r=A();if(w(r))return y(r);i=setTimeout(p,I(r))}function y(r){return i=void 0,b&&s?x(r):(s=o=void 0,a)}function O(){i!==void 0&&clearTimeout(i),f=0,s=c=o=i=void 0}function m(){return i===void 0?a:y(A())}function g(){var r=A(),n=w(r);if(s=arguments,o=this,c=r,n){if(i===void 0)return E(c);if(d)return clearTimeout(i),i=setTimeout(p,l),x(c)}return i===void 0&&(i=setTimeout(p,l)),a}return g.cancel=O,g.flush=m,g}var Ve="Expected a function";function le(e,l,t){var s=!0,o=!0;if(typeof e!="function")throw new TypeError(Ve);return D(t)&&(s="leading"in t?!!t.leading:s,o="trailing"in t?!!t.trailing:o),te(e,l,{leading:s,maxWait:l,trailing:o})}var Ue=Object.defineProperty,Ye=Object.defineProperties,Ge=Object.getOwnPropertyDescriptors,G=Object.getOwnPropertySymbols,Ke=Object.prototype.hasOwnProperty,Qe=Object.prototype.propertyIsEnumerable,K=(e,l,t)=>l in e?Ue(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,k=(e,l)=>{for(var t in l||(l={}))Ke.call(l,t)&&K(e,t,l[t]);if(G)for(var t of G(l))Qe.call(l,t)&&K(e,t,l[t]);return e},ne=(e,l)=>Ye(e,Ge(l));const qe=["onPointerdown"],Je={name:"ScrollbarThumb"};function Ze(e,{expose:l}){const t=e;re(n=>({"1fb98f78":fe(s)}));const s=z(()=>{var n;return`${(n=t.thumbWidth)!=null?n:12}px`});let o=null,u=T(null);const a={pageX:0,pageY:0,scrollPos:0};let i=null;const c=()=>{o=setTimeout(()=>{u.value&&u.value.classList.remove("scrollbar__thumbPlaceholder--scrolling"),o=null},t.autoHideDelay)},f=()=>{o!==null&&clearTimeout(o)};N(f);const v=le(n=>{n.stopPropagation(),n.preventDefault();const h=t.type==="horizontal"?"pageX":"pageY",S=(n[h]-a[h])/t.scrollInfo.wrapperMainSize*t.scrollInfo.contentMainSize;t.wrapperEl.scrollTo({[t.type==="horizontal"?"left":"top"]:a.scrollPos+S,behavior:"auto"})},16),d=()=>{c(),u.value.removeEventListener("pointermove",v),u.value.removeEventListener("pointerup",d),u.value.removeEventListener("pointercancel",d),u.value.removeEventListener("mousewheel",d),document.removeEventListener("mousewheel",d),typeof i=="number"&&u.value.releasePointerCapture(i),i=null},b=n=>{n.ctrlKey||n.button!==0||(f(),a.pageX=n.pageX,a.pageY=n.pageY,a.scrollPos=t.wrapperEl[t.type==="horizontal"?"scrollLeft":"scrollTop"],i=n==null?void 0:n.pointerId,u.value.setPointerCapture(i),u.value.addEventListener("pointermove",v),u.value.addEventListener("pointerup",d),u.value.addEventListener("pointercancel",d),u.value.addEventListener("mousewheel",d,{passive:!1}),document.addEventListener("mousewheel",d,{passive:!1}),u.value.classList.add("scrollbar__thumbPlaceholder--scrolling"))};l({autoHideAfterScroll:()=>{f(),u.value&&u.value.classList.add("scrollbar__thumbPlaceholder--scrolling"),c()}});let E=T(!1),I=T(!1),w=T(null),p=null,y=null,O=z(()=>t.fixedThumb&&!I.value);const m=([n])=>I.value=n.isIntersecting,g=([n])=>E.value=n.isIntersecting,r=()=>{p&&(p.disconnect(),p=null),y&&(y.disconnect(),y=null)};return H(()=>[t.fixedThumb,t.wrapperEl],()=>{if(!t.fixedThumb||!t.wrapperEl)return r();r(),y=new IntersectionObserver(g,{threshold:[0,.5]}),y.observe(t.wrapperEl),p=new IntersectionObserver(m),p.observe(w.value)}),N(r),(n,h)=>(j(),W(J,null,[F(C("div",{class:L(["scrollbar__thumbPlaceholder",`scrollbar__thumbPlaceholder--${e.type}`,{"scrollbar__thumbPlaceholder--autoHide":e.autoHide,"scrollbar__thumbPlaceholder--autoExpand":e.autoExpand}]),style:B({width:e.type==="horizontal"?`${e.scrollInfo.thumbSize}px`:"",height:e.type==="vertical"?`${e.scrollInfo.thumbSize}px`:"",position:O.value?"fixed":"absolute",[e.type==="vertical"?"top":"left"]:O.value?`${e.scrollInfo.boundaryDistance+3}px`:"3px"}),ref:(S,_)=>{_.thumbEl=S,u.value=S},onPointerdown:ae(b,["stop"])},[h[0]||(V(-1),h[0]=C("div",{class:L(["scrollbar__thumb",`scrollbar__thumb--${e.type}`])},null,2),V(1),h[0])],46,qe),[[X,!!e.scrollInfo.thumbSize&&(e.fixedThumb?E.value:!0)]]),t.fixedThumb?F((j(),W("div",{key:0,ref:(S,_)=>{_.shepherdEl=S,w.value=S},class:L(["scrollbar__shepherd",`scrollbar__shepherd--${e.type}`])},null,2)),[[X,!!e.scrollInfo.thumbSize]]):oe("",!0)],64))}const et=q(ne(k({},Je),{props:{type:null,autoExpand:null,autoHide:null,autoHideDelay:null,fixedThumb:null,scrollInfo:null,thumbWidth:null,wrapperEl:null},setup:Ze})),tt={wait:333,type:"debounce"};function Q(...e){const l="value"in(e==null?void 0:e[0]);let t;l?t=e==null?void 0:e[1]:t=e==null?void 0:e[0];const{wait:s,type:o,callback:u}=k(k({},tt),t),a=l?e[0]:T(null),i=he({left:0,top:0,right:0,bottom:0,width:0,height:0,x:0,y:0}),c=()=>{const b=a.value.getBoundingClientRect();i.left=b.left,i.top=b.top,i.right=b.right,i.bottom=b.bottom,i.width=b.width,i.height=b.height,i.x=b.x,i.y=b.y,u==null||u()};let f=null,v=null;const d=()=>{f&&window.removeEventListener("resize",f),v&&(v.disconnect(),v=null)};return ve(()=>{a.value&&(d(),f=c,o==="throttle"&&s>=4?f=le(f,s):o==="debounce"&&s>=4&&(f=te(f,s)),window.addEventListener("resize",f),v=new ResizeObserver(f),v.observe(a.value))}),N(d),l?i:[a,i]}const lt={name:"CustomScrollbar",inheritAttrs:!1};function nt(e,{expose:l,emit:t}){const s=e,o={horizontal:{el:null,instance:null},vertical:{el:null,instance:null}},u=(m,g)=>{o[g].instance||(o[g].instance=m)};let a=T(null),i=T(null);ie(()=>{var m;const g=Array.from((m=a.value.parentElement)==null?void 0:m.childNodes);for(const r in o)o[r].el=g.find(n=>{var h;return(h=n==null?void 0:n.classList)==null?void 0:h.contains(`scrollbar__thumbPlaceholder--${r}`)})});const c=Q(a,{wait:s.throttleWait,type:s.throttleType,callback:b}),f=Q(i,{wait:s.throttleWait,type:s.throttleType,callback:b});let v=T(0),d=T(0);function b(){v.value=Math.max(a.value.scrollHeight-c.height|0,0),d.value=Math.max(a.value.scrollWidth-c.width|0,0)}let x=z(()=>({thumbSize:d.value?$(c.width/a.value.scrollWidth*c.width,s.thumbMinSize>c.width?48:s.thumbMinSize,s.thumbMaxSize):0,contentMainSize:f.width,wrapperMainSize:c.width,boundaryDistance:Math.abs(c.left)})),E=z(()=>({thumbSize:v.value?$(c.height/a.value.scrollHeight*c.height,s.thumbMinSize>c.height?48:s.thumbMinSize,s.thumbMaxSize):0,contentMainSize:f.height,wrapperMainSize:c.height,boundaryDistance:Math.abs(c.top)})),I=z(()=>c.height-E.value.thumbSize-5),w=z(()=>c.width-x.value.thumbSize-5);const p=()=>{d.value&&(o.horizontal.el.style.transform=`translate3d(${a.value.scrollLeft/d.value*w.value}px, 0, 0)`,o.horizontal.instance.autoHideAfterScroll()),v.value&&(o.vertical.el.style.transform=`translate3d(0, ${a.value.scrollTop/v.value*I.value}px, 0)`,o.vertical.instance.autoHideAfterScroll())};H(()=>[d.value,v.value],p);const y=m=>{m.stopPropagation();const g=a.value.scrollLeft,r=a.value.scrollTop,n=$(g+((m==null?void 0:m.deltaX)||0),0,d.value)|0,h=$(r+((m==null?void 0:m.deltaY)||0),0,v.value)|0;a.value.scrollLeft=n,a.value.scrollTop=h,d.value&&(o.horizontal.el.style.transform=`translate3d(${n/d.value*w.value}px, 0, 0)`,o.horizontal.instance.autoHideAfterScroll()),v.value&&(o.vertical.el.style.transform=`translate3d(0, ${h/v.value*I.value}px, 0)`,o.vertical.instance.autoHideAfterScroll()),t("scroll",{target:a.value,scrollLeft:n,scrollTop:h})},O=m=>{s.simulateScroll?y(m):p()};return H(c,()=>t("wrapperResize",c)),H(f,()=>t("contentResize",f)),l({scrollEl:a}),(m,g)=>(j(),W("div",{class:L(["scrollbar__wrapper",e.wrapperClass]),style:B(e.wrapperStyle)},[C("div",ce({ref:(r,n)=>{n.wrapperEl=r,a.value=r},class:"scrollbar__scroller"},m.$attrs,{onWheel:O,onScroll:O}),[C("div",{ref:(r,n)=>{n.contentEl=r,i.value=r},class:L(["scrollbar__content",e.contentClass,{"scrollbar__content--fixedThumb":e.fixedThumb,[`scrollbar__content--${e.direction}`]:e.direction}]),style:B(e.contentStyle)},[se(m.$slots,"default")],6)],16),(j(),W(J,null,ue(o,(r,n)=>de(et,{ref:h=>u(h,n),key:n,autoExpand:e.autoExpand,autoHide:e.autoHide,autoHideDelay:e.autoHideDelay,fixedThumb:n===e.direction?!1:e.fixedThumb,type:n,scrollInfo:n==="vertical"?E.value:x.value,thumbWidth:e.thumbWidth,wrapperEl:a.value},null,8,["autoExpand","autoHide","autoHideDelay","fixedThumb","type","scrollInfo","thumbWidth","wrapperEl"])),64))],6))}const at=q(ne(k({},lt),{props:{wrapperClass:null,wrapperStyle:null,contentClass:null,contentStyle:null,direction:{default:"vertical"},thumbMinSize:{default:48},thumbMaxSize:{default:1/0},thumbWidth:{default:12},autoHide:{default:!0},autoHideDelay:{default:900},autoExpand:{default:!0},fixedThumb:null,throttleType:{default:"debounce"},throttleWait:{default:333},simulateScroll:null},emits:["wrapperResize","contentResize","scroll"],setup:nt}));export{at as _};
