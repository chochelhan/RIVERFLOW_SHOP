import{a as I,y as L,w as N,g as V,e as P,z as T}from"./apiService-6a3981ff.js";import{i as G,m as z,_ as M,r as D,o as r,c as f,a as t,b as u,j as w,t as c,w as C,e as S,p as U,f as E,F as $,g as x,k}from"./index-7c0b344a.js";import{c as j}from"./config-9369631b.js";import{m as H}from"./mobile-8dd88b05.js";import{U as v}from"./util-c02dbcf9.js";import{r as Y}from"./reviewRegist-585dc2db.js";import{d as q}from"./deliveryDialog-79c21960.js";import"./axios-c24e582b.js";import"./jquery-d0ecd42c.js";const J={computed:{...G(j,["pointName","pointUnit"])},data(){return{util:v,levelName:"",name:"",point:0,memberInfo:{},orderList:[],myFavorite:0,coupon:0,statusCount:{notpay:0,income:0,DR:0,DI:0,DC:0,OC:0,claim:0},imgData:{}}},created(){this.setClass("productView"),this.setTitle("마이쇼핑"),this.getData()},methods:{...z(H,["setClass","setTitle"]),getData(){const o={};I.post(L,o,s=>{this.point=v.numberFormat(s.data.point),this.coupon=s.data.coupon,this.levelName=s.data.levelName,this.myFavorite=v.numberFormat(s.data.wishCount),this.memberInfo=s.data.memberInfo,this.name=this.memberInfo.nick?this.memberInfo.nick:this.memberInfo.name,this.memberInfo.img&&(this.imgData={isfile:"yes",file:null,url:this.memberInfo.img});const n=s.data.statusData;let l=0;for(const e in n)switch(e.substring(0,1)){case"C":case"E":case"F":case"R":l=l+parseInt(n[e]);break}this.statusCount={notpay:n.notpay?v.numberFormat(n.notpay):0,income:n.income?v.numberFormat(n.income):0,DR:n.DR?v.numberFormat(n.DR):0,DI:n.DI?v.numberFormat(n.DI):0,DC:n.DC?v.numberFormat(n.DC):0,OC:n.OC?v.numberFormat(n.OC):0,claim:v.numberFormat(l)}})},insertImg(){this.$refs.img.click()},deleteImg(){},imgUpload(){const o=this.$refs.img.files;let s=o.length>0?o[0]:null;this.imgData={isfile:"",file:s,url:URL.createObjectURL(s)},this.$refs.img.value="";const n=new FormData;n.append("image",s),I.postFile(N,n,l=>{})},logOut(){I.post(V,{},o=>{o.status=="success"&&(P.logout(),location.reload())})},goMypage(o){sessionStorage.setItem("myOrderCode",""),this.$router.push("/mypage/"+o)},goMyOrder(o){sessionStorage.setItem("myOrderCode",o),this.$router.push("/mypage/orderList")}}},b=o=>(U("data-v-649a4b9d"),o=o(),E(),o),K={class:"mypage-container"},Q={class:"minfo-box"},W={class:"user-img"},X=["src"],Z={class:"user-info"},tt={class:"grade"},st={class:"name"},et=b(()=>t("span",null,"정보수정",-1)),ot={class:"summary-box"},it=b(()=>t("div",{class:"text"},"관심상품",-1)),nt={class:"value"},at=b(()=>t("li",{class:"divide"},null,-1)),lt={class:"text"},ct={class:"value"},dt={class:"order-box"},rt={class:"order-title"},ut=b(()=>t("span",{class:"tlt"},"주문/배송 조회",-1)),mt={class:"progress-ul"},_t={class:"count"},vt=b(()=>t("div",{class:"name"},"미입금",-1)),gt={class:"count"},pt=b(()=>t("div",{class:"name"},"배송중",-1)),ht={class:"count"},ft=b(()=>t("div",{class:"name"},"배송완료",-1)),bt={class:"count"},Ct=b(()=>t("div",{class:"name"},"구매확정",-1)),yt={class:"count"},Dt=b(()=>t("div",{class:"name"},"취소/교환/반품",-1)),wt={class:"menu-box"},kt={class:"menu-ul"},Rt=b(()=>t("div",{class:"name"},"상품후기",-1)),It={class:"arrow"},Ot=b(()=>t("div",{class:"name"},"배송지 관리",-1)),St={class:"arrow"},$t=b(()=>t("div",{class:"name"},"로그아웃",-1)),xt={class:"arrow"};function Mt(o,s,n,l,e,i){const d=D("font-awesome-icon"),p=D("v-btn");return r(),f("div",K,[t("div",Q,[t("input",{type:"file",style:{display:"none"},ref:"img",accept:"image/*",onChange:s[0]||(s[0]=(...m)=>i.imgUpload&&i.imgUpload(...m))},null,544),t("div",W,[t("div",{class:"pen-box",onClick:s[1]||(s[1]=m=>i.insertImg())},[u(d,{class:"write-icon",icon:"fa-solid fa-camera"})]),t("div",{class:"img-box",onClick:s[2]||(s[2]=m=>i.insertImg())},[e.imgData.url?(r(),f("img",{key:0,src:e.imgData.url},null,8,X)):(r(),w(d,{key:1,class:"icon",icon:"fa-solid fa-user"}))])]),t("div",Z,[t("div",tt,c(e.levelName),1),t("div",st,c(e.name),1)]),u(p,{type:"button",rounded:"",variant:"outlined",class:"whiteButton",onClick:s[3]||(s[3]=m=>i.goMypage("memberModify"))},{default:C(()=>[et]),_:1})]),t("ul",ot,[t("li",{onClick:s[4]||(s[4]=m=>o.$router.push("/wish"))},[u(d,{class:"icon",style:{color:"#E91E63"},icon:"fa-solid fa-heart"}),it,t("div",nt,c(e.myFavorite)+"개",1)]),at,t("li",{onClick:s[5]||(s[5]=m=>i.goMypage("pointList"))},[u(d,{class:"icon",style:{color:"#9C27B0"},icon:"fa-solid fa-coins"}),t("div",lt,c(o.pointName),1),t("div",ct,c(e.point)+c(o.pointUnit),1)])]),t("div",dt,[t("div",rt,[ut,t("span",{class:"arrow",onClick:s[6]||(s[6]=m=>i.goMypage("orderList"))},[S("전체 "),u(d,{class:"icon",icon:"fa-solid fa-angle-right"})])]),t("ul",mt,[t("li",{onClick:s[7]||(s[7]=m=>i.goMyOrder("notpay"))},[t("div",_t,c(e.statusCount.notpay),1),vt]),t("li",{onClick:s[8]||(s[8]=m=>i.goMyOrder("DI"))},[t("div",gt,c(e.statusCount.DI),1),pt]),t("li",{onClick:s[9]||(s[9]=m=>i.goMyOrder("DC"))},[t("div",ht,c(e.statusCount.DC),1),ft]),t("li",{onClick:s[10]||(s[10]=m=>i.goMyOrder("OC"))},[t("div",bt,c(e.statusCount.OC),1),Ct]),t("li",{onClick:s[11]||(s[11]=m=>i.goMyOrder("claim"))},[t("div",yt,c(e.statusCount.claim),1),Dt])])]),t("div",wt,[t("ul",kt,[t("li",{onClick:s[12]||(s[12]=m=>i.goMypage("reviewList"))},[Rt,t("div",It,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})])]),t("li",{onClick:s[13]||(s[13]=m=>i.goMypage("shippingList"))},[Ot,t("div",St,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})])]),t("li",{onClick:s[14]||(s[14]=m=>i.logOut())},[$t,t("div",xt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})])])])])])}const At=M(J,[["render",Mt],["__scopeId","data-v-649a4b9d"]]);const Ft={components:{reviewRegist:Y,deliveryDialog:q},data(){return{util:v,orderList:[],point:0,coupon:0,pointName:"",pointUnit:"",statusCount:{notpay:0,income:0,DR:0,DI:0,DC:0,OC:0,claim:0},claimDialogShow:!1,claimOid:"",reviewRegistData:{},reviewRegistShow:!1,deliveryDialogShow:!1,deliveryOid:""}},created(){this.getData(1)},methods:{getData(o){const s={};I.post(L,s,n=>{this.point=n.data.point,this.coupon=n.data.coupon,this.pointName=n.data.pointName,this.pointUnit=n.data.pointUnit;const l=n.data.statusData;let e=0;for(const i in l)switch(i.substring(0,1)){case"C":case"E":case"F":case"R":e=e+parseInt(l[i]);break}this.statusCount={notpay:l.notpay?v.numberFormat(l.notpay):0,income:l.income?v.numberFormat(l.income):0,DR:l.DR?v.numberFormat(l.DR):0,DI:l.DI?v.numberFormat(l.DI):0,DC:l.DC?v.numberFormat(l.DC):0,OC:l.OC?v.numberFormat(l.OC):0,claim:v.numberFormat(e)};for(const i of n.data.orderList.data){let d=[],p="",m="";switch(i.ostatus){case"notpay":case"income":m=n.data.ostatus[i.ostatus];break}let y={},O=!1,a=!1,h=!1,R=!1,A="";for(const _ of i.orderProducts){p||(p=_.listImg);let F=_.pname;switch(_.opt_name&&(F+="("+_.opt_name+")"),d.push({name:F,amt:_.oamt}),_.ostatus){case"notpay":case"income":break;default:switch(O=!0,_.ostatus.substring(0,1)){case"C":y[_.ostatus]=n.data.cancleStatus[_.ostatus];break;case"E":y[_.ostatus]=n.data.exchangeStatus[_.ostatus];break;case"F":y[_.ostatus]=n.data.refundStatus[_.ostatus];break;case"R":y[_.ostatus]=n.data.returnStatus[_.ostatus];break;default:switch(y[_.ostatus]=n.data.ostatus[_.ostatus],_.ostatus){case"OC":_.isReview||(A=_.pid,a=!0),R=!0;break;case"DC":h=!0,R=!0;break;case"DI":R=!0;break}break}break}}O&&(m=""),i.deliveryId||(R=!1);let B={orderCode:i.order_code,id:i.id,pid:A,img:p,options:d,price:i.price,ostatus:m,ostatusList:y,reviewAble:a,claimAble:h,deliveryAble:R};this.orderList.push(B)}})},goClaim(o,s){this.$router.push("/mypage/claim/"+o+"/"+s)},claimDialogOpen(o){this.claimOid=o,this.claimDialogShow=!0},claimAction(o){this.goClaim(o,this.claimOid)},reviewRegist(o){o.pid&&(this.reviewRegistData={oid:o.id,pid:o.pid},this.reviewRegistShow=!0)},saveReviewRegist(){this.reviewRegistShow=!1,this.getData(1)},goDeliveryPage(o){this.deliveryOid=o,this.deliveryDialogShow=!0},orderComplete(o){const s={id:o.id};this.$eventBus.$emit("overlay","open"),I.post(T,s,n=>{if(this.$eventBus.$emit("overlay","hide"),n.status=="success"){this.getData(1);let l={message:"구매확정 되었습니다"};this.$eventBus.$emit("modalOpen",l)}})},goOrderDetail(o){this.$router.push("/mypage/orderDetail/"+o)}}},g=o=>(U("data-v-64cecb76"),o=o(),E(),o),Lt={class:"mypage-container"},Ut={class:"order-box"},Et={class:"order-header"},Bt=g(()=>t("div",{class:"order-title"},"진행중인 주문",-1)),Nt={class:"progress-ul"},Vt=g(()=>t("div",{class:"name"},"미입금",-1)),Pt={class:"count"},Tt={class:"icon-box"},Gt=g(()=>t("div",{class:"name"},"결제완료",-1)),zt={class:"count"},jt={class:"icon-box"},Ht=g(()=>t("div",{class:"name"},"배송준비중",-1)),Yt={class:"count"},qt={class:"icon-box"},Jt=g(()=>t("div",{class:"name"},"배송중",-1)),Kt={class:"count"},Qt={class:"icon-box"},Wt=g(()=>t("div",{class:"name"},"배송완료",-1)),Xt={class:"count"},Zt={class:"icon-box"},ts=g(()=>t("div",{class:"name"},"구매확정",-1)),ss={class:"count"},es={class:"icon-box"},os=g(()=>t("div",{class:"name"},"취소/교환/반품",-1)),is={class:"count"},ns={class:"order-body"},as=["onClick"],ls=["src"],cs=["onClick"],ds={class:"order-code"},rs={class:"info-ul"},us={class:"amt"},ms={class:"price"},_s={class:"status-box"},vs={key:0,class:"status"},gs={class:"button-box"},ps=g(()=>t("span",null,"주문취소",-1)),hs={key:1,class:"status-list"},fs={key:0,class:"button-box"},bs=g(()=>t("span",null,"구매확정",-1)),Cs=g(()=>t("span",null,"교환/반품",-1)),ys=g(()=>t("span",null,"후기작성",-1)),Ds={key:1,class:"button-box"},ws=g(()=>t("span",null,"배송조회",-1)),ks={class:"modal-box"},Rs={class:"modal-title"},Is=g(()=>t("div",{class:"modal-desc"},"교환요청 또는 반품요청을 선택하세요",-1)),Os={class:"modal-button"},Ss=g(()=>t("span",null,"교환요청",-1)),$s=g(()=>t("span",null,"반품요청",-1));function xs(o,s,n,l,e,i){const d=D("font-awesome-icon"),p=D("v-btn"),m=D("reviewRegist"),y=D("v-dialog"),O=D("deliveryDialog");return r(),f("div",Lt,[t("div",Ut,[t("div",Et,[Bt,t("ul",Nt,[t("li",null,[Vt,t("div",Pt,c(e.statusCount.notpay),1)]),t("li",Tt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[Gt,t("div",zt,c(e.statusCount.income),1)]),t("li",jt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[Ht,t("div",Yt,c(e.statusCount.DR),1)]),t("li",qt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[Jt,t("div",Kt,c(e.statusCount.DI),1)]),t("li",Qt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[Wt,t("div",Xt,c(e.statusCount.DC),1)]),t("li",Zt,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[ts,t("div",ss,c(e.statusCount.OC),1)]),t("li",es,[u(d,{class:"icon",icon:"fa-solid fa-angle-right"})]),t("li",null,[os,t("div",is,c(e.statusCount.claim),1)])])]),t("ul",ns,[(r(!0),f($,null,x(e.orderList,a=>(r(),f("li",null,[t("div",{class:"img-box",onClick:h=>i.goOrderDetail(a.id)},[t("img",{src:a.img},null,8,ls)],8,as),t("div",{class:"product-info",onClick:h=>i.goOrderDetail(a.id)},[t("div",ds,"주문번호 "+c(a.orderCode),1),t("ul",rs,[(r(!0),f($,null,x(a.options,h=>(r(),f("li",null,[S(c(h.name)+" ",1),t("span",us,c(h.amt)+"개",1)]))),256))]),t("div",ms,c(e.util.numberFormat(a.price))+"원 ",1)],8,cs),t("div",_s,[a.ostatus?(r(),f("div",vs,[S(c(a.ostatus)+" ",1),t("div",gs,[u(p,{class:"whiteButton",onClick:h=>i.goClaim("CR",a.id),rounded:"",variant:"outlined"},{default:C(()=>[ps]),_:2},1032,["onClick"])])])):(r(),f("div",hs,[t("ul",null,[(r(!0),f($,null,x(a.ostatusList,(h,R)=>(r(),f("li",null,c(h),1))),256))]),a.reviewAble||a.claimAble?(r(),f("div",fs,[a.claimAble?(r(),w(p,{key:0,class:"blackButton",rounded:"",variant:"outlined",onClick:h=>i.orderComplete(a)},{default:C(()=>[bs]),_:2},1032,["onClick"])):k("",!0),a.claimAble?(r(),w(p,{key:1,class:"whiteButton",rounded:"",variant:"outlined",onClick:h=>i.claimDialogOpen(a.id)},{default:C(()=>[Cs]),_:2},1032,["onClick"])):k("",!0),a.reviewAble?(r(),w(p,{key:2,class:"blackButton",onClick:h=>i.reviewRegist(a),rounded:"",depressed:""},{default:C(()=>[ys]),_:2},1032,["onClick"])):k("",!0)])):k("",!0),a.deliveryAble?(r(),f("div",Ds,[u(p,{class:"whiteButton",rounded:"",variant:"outlined",onClick:h=>i.goDeliveryPage(a.id)},{default:C(()=>[ws]),_:2},1032,["onClick"])])):k("",!0)]))])]))),256))])]),u(y,{modelValue:e.reviewRegistShow,"onUpdate:modelValue":s[1]||(s[1]=a=>e.reviewRegistShow=a),width:"600",persistent:"",style:{"z-index":"100"}},{default:C(()=>[e.reviewRegistShow?(r(),w(m,{key:0,onHideEvent:s[0]||(s[0]=a=>e.reviewRegistShow=!1),onSaveRegist:i.saveReviewRegist,registData:e.reviewRegistData},null,8,["onSaveRegist","registData"])):k("",!0)]),_:1},8,["modelValue"]),u(y,{modelValue:e.deliveryDialogShow,"onUpdate:modelValue":s[3]||(s[3]=a=>e.deliveryDialogShow=a),width:"800",persistent:"",style:{"z-index":"100"}},{default:C(()=>[e.deliveryDialogShow?(r(),w(O,{key:0,onHideEvent:s[2]||(s[2]=a=>e.deliveryDialogShow=!1),oid:e.deliveryOid},null,8,["oid"])):k("",!0)]),_:1},8,["modelValue"]),u(y,{modelValue:e.claimDialogShow,"onUpdate:modelValue":s[7]||(s[7]=a=>e.claimDialogShow=a),width:"350",style:{"z-index":"100"}},{default:C(()=>[t("div",ks,[t("div",Rs,[S(" 교환/반품 "),u(d,{class:"icon",onClick:s[4]||(s[4]=a=>e.claimDialogShow=!1),icon:"fa-solid fa-xmark"})]),Is,t("div",Os,[u(p,{class:"whiteButton",rounded:"",depressed:"",onClick:s[5]||(s[5]=a=>i.claimAction("ER"))},{default:C(()=>[Ss]),_:1}),u(p,{onClick:s[6]||(s[6]=a=>i.claimAction("RR")),class:"blackButton",rounded:"",depressed:""},{default:C(()=>[$s]),_:1})])])]),_:1},8,["modelValue"])])}const Ms=M(Ft,[["render",xs],["__scopeId","data-v-64cecb76"]]);const As={name:"mypageMain",components:{mobileMain:At,pcMain:Ms},data(){return{mobile:!1}},created(){this.mobile=this.$isMobile()}},Fs={class:"page-container"};function Ls(o,s,n,l,e,i){const d=D("mobileMain"),p=D("pcMain");return r(),f("div",Fs,[e.mobile?(r(),w(d,{key:0})):(r(),w(p,{key:1}))])}const Hs=M(As,[["render",Ls],["__scopeId","data-v-af43dbd2"]]);export{Hs as default};
