import{C as S,p as k,a as V,b as w,L as A,c as E,d as P,P as G,e as N}from"./index-a000231a.js";import{a as b,b7 as B,b8 as R}from"./apiService-0aea4262.js";import"./jquery-d0ecd42c.js";import{_ as U,r,o as p,c as _,a as l,b as n,w as c,n as f,j as D,e as u,p as F,f as O}from"./index-7c0b344a.js";import"./axios-c24e582b.js";S.register(k,V,w,A,E,P,G);const M={components:{LineChartGenerator:N},watch:{cmd(a){this.setInit()}},data(){return{cmd:0,chartData:{labels:[],datasets:[]},chartOptions:{responsive:!0,maintainAspectRatio:!1},chartShow:!1,height:600,dateClass:{year:"",month:"",day:"active"},dateType:"day",month:"",yearList:[],styear:"",enyear:"",dayList:[],menu1:!1,label:"",colorList:["#C62828","#4A148C","#3949AB","#1E88E5","#00ACC1","#00897B","#43A047","#827717","#FFB300","#F4511E"],productList:[{title:"상위 10위 상품들",value:""}],productId:"",productNames:{}}},created(){this.setInit()},methods:{setInit(){const a=new Date,t=a.getFullYear();for(let o=t;o>=2010;o--)this.yearList.push({title:o+"년",value:o});this.styear=t-5,this.enyear=a.getFullYear();let e=parseInt(a.getMonth())+1;e<10&&(e="0"+e),this.month=t+"-"+e,this.getData()},getData(){const a=this.setDataParams();b.post(B,a,t=>{for(const e of t.data.productList)this.productList.push({title:e.pname,value:e.id}),this.productNames[e.id]=e.pname;this.setGraph(t.data.list)})},getDataList(){const a=this.setDataParams();b.post(R,a,t=>{this.setGraph(t.data)})},setDataParams(){return this.chartShow=!1,this.setDateList(),{dateType:this.dateType,styear:this.styear,enyear:this.enyear,month:this.month,pid:this.productId,type:this.cmd<1?"price":"count"}},setDateList(){let a,t;switch(this.dateType){case"day":const e=this.month.split("-");a=new Date(e[0],e[1],0).getDate(),t=1,this.label=this.month+"월 주문 현황";break;case"month":a=12,t=1,this.styear==this.enyear?this.label=this.styear+"년 월별 주문 현황":this.label=this.styear+"년 ~ "+this.enyear+"년까지 월별 주문 현황";break;case"year":this.styear==this.enyear?this.label=this.styear+"년 주문 현황":this.label=this.styear+"년 ~ "+this.enyear+"년까지 연도별 주문 현황",a=this.enyear,t=this.styear;break}this.dayList=[];for(let e=t;e<=a;e++){let o=e<10?"0"+e:e;this.dayList.push(o)}},setDateType(a){this.dateType=a;for(const t in this.dateClass)t==a?this.dateClass[t]="active":this.dateClass[t]=""},search(){this.getDataList()},setGraph(a){this.chartData.labels=[];for(const o of this.dayList)this.chartData.labels.push(o);this.chartData.datasets=[];let t=0,e=[];if(a.length>0)for(const o of a){e=[];let s={};for(const d of o.datas)s[d.dateGroup]=d.total;for(const d of this.dayList)s[d]?e.push(s[d]):e.push(0);let h={label:this.productNames[o.pid],backgroundColor:this.colorList[t],data:e};this.chartData.datasets.push(h),t++}else{for(const s of this.dayList)e.push(0);let o={label:"",backgroundColor:this.colorList[0],data:e};this.chartData.datasets.push(o)}this.chartShow=!0}}},y=a=>(F("data-v-27555abd"),a=a(),O(),a),z={class:"page-container"},Y={class:"tab-box"},j=y(()=>l("span",{class:"bold"},"주문금액별 통계",-1)),K=y(()=>l("span",{class:"bold"},"주문건수별 통계",-1)),q={class:"product-container"},H=y(()=>l("div",{class:"statis-title"},"[구매확정된 주문만 통계에 반영합니다]",-1)),J={style:{display:"flex"}},Q={class:"date-box"},W={key:0,class:"month-box"},X={key:1,class:"year-box"},Z=y(()=>l("span",null,"-",-1)),$={class:"member-box",style:{"padding-left":"40px"}},tt={class:"button-box"},et={class:"graph-box"};function st(a,t,e,o,s,h){const d=r("v-tab"),g=r("v-tabs"),m=r("v-btn"),C=r("v-text-field"),v=r("v-select"),L=r("v-autocomplete"),T=r("font-awesome-icon"),I=r("LineChartGenerator"),x=r("v-progress-circular");return p(),_("div",z,[l("div",Y,[n(g,{modelValue:s.cmd,"onUpdate:modelValue":t[0]||(t[0]=i=>s.cmd=i)},{default:c(()=>[n(d,{class:"tab"},{default:c(()=>[j]),_:1}),n(d,{class:"tab"},{default:c(()=>[K]),_:1})]),_:1},8,["modelValue"])]),l("div",q,[H,l("div",J,[l("div",Q,[n(m,{variant:"outlined",class:f("white-button "+s.dateClass.year),onClick:t[1]||(t[1]=i=>h.setDateType("year"))},{default:c(()=>[u("년도별 ")]),_:1},8,["class"]),n(m,{variant:"outlined",class:f("white-button "+s.dateClass.month),onClick:t[2]||(t[2]=i=>h.setDateType("month"))},{default:c(()=>[u("월별 ")]),_:1},8,["class"]),n(m,{variant:"outlined",class:f("white-button "+s.dateClass.day),onClick:t[3]||(t[3]=i=>h.setDateType("day"))},{default:c(()=>[u(" 일별 ")]),_:1},8,["class"])]),s.dateClass.day=="active"?(p(),_("div",W,[n(C,{type:"date",density:"compact",variant:"outlined",modelValue:s.month,"onUpdate:modelValue":t[4]||(t[4]=i=>s.month=i)},null,8,["modelValue"])])):(p(),_("div",X,[n(v,{class:"year-item",modelValue:s.styear,"onUpdate:modelValue":t[5]||(t[5]=i=>s.styear=i),density:"compact",variant:"outlined",items:s.yearList},null,8,["modelValue","items"]),Z,n(v,{class:"year-item",density:"compact",variant:"outlined",modelValue:s.enyear,"onUpdate:modelValue":t[6]||(t[6]=i=>s.enyear=i),items:s.yearList},null,8,["modelValue","items"])])),l("div",$,[n(L,{"auto-select-first":"",density:"compact",variant:"outlined",solo:"",modelValue:s.productId,"onUpdate:modelValue":t[7]||(t[7]=i=>s.productId=i),items:s.productList},null,8,["modelValue","items"])]),l("div",tt,[n(m,{variant:"outlined",class:"white-button submit-button",onClick:t[8]||(t[8]=i=>h.search())},{default:c(()=>[n(T,{icon:"fa-solid fa-magnifying-glass",style:{"margin-right":"6px"}}),u(" 검색 ")]),_:1})])]),l("div",et,[s.chartShow?(p(),D(I,{key:0,options:s.chartOptions,data:s.chartData,height:s.height},null,8,["options","data","height"])):(p(),D(x,{key:1,size:100,class:"progress-box",color:"#880E4F",indeterminate:""}))])])])}const rt=U(M,[["render",st],["__scopeId","data-v-27555abd"]]);export{rt as default};
