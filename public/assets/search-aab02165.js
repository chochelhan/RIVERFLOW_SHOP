import{e as F,a as f,a4 as x,U as B,a5 as O}from"./apiService-6a3981ff.js";import{U as T}from"./util-c02dbcf9.js";import{l as E}from"./layerList-af76dc69.js";import{n as Q,g as J,a as j}from"./galleryList-3a80590a.js";import{a as z}from"./articleUpass-b2e5ca65.js";import{m as M,_ as D,r as u,o as n,c as l,b as p,w as L,a as i,d as W,F as k,g as w,e as b,t as m,k as h,j as _,p as P,f as Y}from"./index-7c0b344a.js";import{m as X}from"./mobile-8dd88b05.js";import{_ as q}from"./empty_heart-d5f42d80.js";import{_ as $}from"./sm_heart-055da75c.js";import"./axios-c24e582b.js";import"./jquery-d0ecd42c.js";const H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAATCAYAAACUef2IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEiSURBVHgBrZLLbYNAEIZnl4izS6AEckQ8IipIOohTQZIKQjqgBKggJcQCIY5QgkvgwAkEeMYCCdsYFrO/tLCPbz+tRsOgT5Zlu7Isvxhjr7jU++1cURTfMIwQRonj2EPuped2xOEI67oOXNctiGH0SdNUa9v2v+s6DSaCkiPn3KU5cn/I6XMcPuTIlqTjS/QX4aqqen5qmuYN17OwiHDMqar6yXH+DpKDFdiTWAfJwXJoJC5AfgoS5yA/Ocdi/4L8BNy27QMWOwR58S3LCtmwiqIowObe2iEBSj9owocdx3H2G1/uD9IL8RY5tpeH0u+LvSlwTVlIaprmTQPwKZheThfgQen5bO5ikiQ/2I7eWumi+J58SSokvpaLSFeF5DRE+RN0VIzU94KFYAAAAABJRU5ErkJggg==";const K={name:"pcSearch",components:{layerList:E,normalList:Q,galleryList:J,articleUpassComponent:z},data(){return{form:null,util:T,keyword:"",boardList:[],productList:[],categoryListNames:{},memberInfo:{},serverFlag:!1,boardImageSize:{},passDialogShow:!1,articleId:"",bid:"",searchResult:!1}},created(){this.setClass("sub"),this.setTitle("검색");const t=F.getSession();t&&t.memberInfo&&(this.memberInfo=t.memberInfo),this.getData()},methods:{...M(X,["setClass","setTitle"]),getData(){f.post(x,{},t=>{var s,c;for(const o of t.data.categoryList)if(this.categoryListNames[o.id]=o.cname,((s=o.subList)==null?void 0:s.length)>0){for(const e of o.subList)if(this.categoryListNames[e.id]=e.cname,((c=e.subList)==null?void 0:c.length)>0)for(const d of e.subList)this.categoryListNames[d.id]=d.cname}})},setDataList(t){this.productList=[];for(let s of t.productList.data){let c="",o=s.category1.split(",");c=this.categoryListNames[o[0]],o[1]&&(c+=" > "+this.categoryListNames[o[1]]),o[2]&&(c+=" > "+this.categoryListNames[o[2]]);let e;this.memberInfo.id?e=s.myWish?"heart":"empty":e="empty",s.wishIcon=e,s.category=c,this.productList.push(s)}this.boardImageSize=t.imageset.blist,this.boardList=[];for(let s of t.boards){let c={};if(s.info.categoryUse=="yes")for(let o of JSON.parse(s.info.categoryList))c[o.code]=o.name;if(s.categoryNames=c,s.info.btype=="faq"||s.info.btype=="notice")for(let o of s.list)o.open=!1;else{let o=0;for(let e of s.list)t.memberset&&t.memberset.nickUse=="yes"&&e.nick?e.userName=e.nick:e.name?e.userName=e.name:e.userName=e.user_name,s.list[o]=e,o++}this.boardList.push(s)}},productDetail(t){this.$router.push("/product/productView/"+t+"/default")},productWish(t){const s=this.productList[t].id;if(!this.memberInfo.id){let o={type:"confirm",message:"회원만 사용 가능합니다<br>로그인 하시겠습니까",doAction:()=>{this.$router.push("/memberLogin")}};this.emitter.emit("modalOpen",o);return}const c={pid:s};f.post(B,c,o=>{let e=this.productList[t];e.wish=o.data.total,o.data.rtype=="delete"?e.wishIcon="empty":e.wishIcon="heart",this.productList[t]=e})},search(){if(!this.serverFlag&&this.form){let t={keyword:this.keyword};this.emitter.emit("overlay","open"),this.serverFlag=!0,f.post(O,t,s=>{this.searchResult=!0,this.keywordResult=this.keyword,this.emitter.emit("overlay","hide"),this.serverFlag=!1,this.setDataList(s.data)})}},boardAction(t){switch(t.type){case"view":this.articelView(t.item);break}},articelView(t){this.bid=t.bid;let s=!1;if(t.secret=="yes")if(t.user_id)t.user_id==this.memberInfo.id&&(s=!0);else{this.articleId=t.id,this.passDialogShow=!0;return}else s=!0;s&&this.$router.push("/board/articleView/"+this.bid+"/"+t.id)}}},I=t=>(P("data-v-09d4e968"),t=t(),Y(),t),G={class:"page-container"},Z={class:"search-info"},ee={class:"field-box"},te={class:"flex-area"},se=I(()=>i("input",{type:"submit",style:{display:"none"}},null,-1)),oe={key:0,class:"list-container"},ie=I(()=>i("div",{class:"p-title"},"상품목록",-1)),re={class:"product-list"},ae={class:"img"},ne=["onClick","src"],ce=["onClick"],le={key:0,src:H},de={key:1,src:q},me=["onClick"],ue={class:"category"},pe={class:"like-box"},he=I(()=>i("img",{src:$},null,-1)),_e={class:"pname string-cut"},fe={class:"price"},ye={key:0},ge={style:{"text-decoration":"line-through","padding-right":"10px"}},be={key:1},ve={key:0,class:"no-data"},Le=I(()=>i("div",{class:"p-title",style:{"margin-bottom":"0"}},"게시판",-1)),ke={class:"board-container"},we={class:"btitle"},Ie={key:0,class:"no-data"};function Ae(t,s,c,o,e,d){const y=u("font-awesome-icon"),g=u("v-text-field"),A=u("v-form"),N=u("layerList"),S=u("galleryList"),U=u("normalList"),C=u("articleUpassComponent");return n(),l("div",G,[p(A,{modelValue:e.form,"onUpdate:modelValue":s[2]||(s[2]=r=>e.form=r),novalidate:"",onSubmit:s[3]||(s[3]=W(r=>d.search(),["prevent"]))},{default:L(()=>[i("ul",Z,[i("li",null,[i("div",ee,[i("div",te,[p(g,{modelValue:e.keyword,"onUpdate:modelValue":s[1]||(s[1]=r=>e.keyword=r),ref:"keyword",rules:[()=>!!e.keyword||"검색어를 입력하세요"],placeholder:"검색어를 입력하세요",rounded:"",variant:"outlined"},{append:L(()=>[p(y,{onClick:s[0]||(s[0]=r=>d.search()),class:"icon",icon:"fa-solid fa-magnifying-glass"})]),_:1},8,["modelValue","rules"])])])])]),se]),_:1},8,["modelValue"]),e.searchResult?(n(),l("div",oe,[ie,i("ul",re,[(n(!0),l(k,null,w(e.productList,(r,a)=>(n(),l("li",null,[i("div",ae,[i("img",{onClick:v=>d.productDetail(r.id),class:"list-img",src:r.listImg,style:{"max-width":"100%"}},null,8,ne),i("div",{class:"icon-box",onClick:v=>d.productWish(a)},[r.wishIcon=="heart"?(n(),l("img",le)):(n(),l("img",de))],8,ce)]),i("div",{class:"content",onClick:v=>d.productDetail(r.id)},[i("div",ue,[b(m(r.category)+" ",1),i("div",pe,[he,b(" "+m(e.util.numberFormat(r.wish)),1)])]),i("div",_e,m(r.pname),1),i("div",fe,[r.dcprice>0&&parseInt(r.price)>parseInt(r.dcprice)?(n(),l("span",ye,[i("span",ge,m(e.util.numberFormat(r.price))+"원",1),i("span",null,m(e.util.numberFormat(r.dcprice))+"원",1)])):(n(),l("span",be,m(e.util.numberFormat(r.price))+"원 ",1))])],8,me)]))),256)),e.productList.length<1?(n(),l("li",ve,' "'+m(t.keywordResult)+'"로 검색된 상품이 없습니다 ',1)):h("",!0)]),Le,(n(!0),l(k,null,w(e.boardList,r=>(n(),l("div",ke,[i("div",we,m(r.info.bname),1),r.info.btype=="faq"||r.info.btype=="notice"?(n(),_(N,{key:0,articleList:r.list,boardCategoryUse:r.info.categoryUse=="yes",categoryNames:r.categoryNames},null,8,["articleList","boardCategoryUse","categoryNames"])):r.info.btype=="photo"?(n(),_(S,{key:1,onBoardAction:d.boardAction,imageSize:e.boardImageSize,categoryNames:r.categoryNames,boardCategoryUse:r.info.categoryUse=="yes",articleData:r.list},null,8,["onBoardAction","imageSize","categoryNames","boardCategoryUse","articleData"])):r.info.btype=="list"?(n(),_(U,{key:2,onBoardAction:d.boardAction,categoryNames:r.categoryNames,boardCategoryUse:r.info.categoryUse=="yes",articleData:r.list},null,8,["onBoardAction","categoryNames","boardCategoryUse","articleData"])):h("",!0)]))),256)),e.boardList.length<1?(n(),l("div",Ie,' "'+m(t.keywordResult)+'"로 검색된 게시판글이 없습니다 ',1)):h("",!0),p(C,{bid:e.bid,articleId:e.articleId,modelOpen:e.passDialogShow,onParentOpenFalse:s[4]||(s[4]=r=>e.passDialogShow=!1)},null,8,["bid","articleId","modelOpen"])])):h("",!0)])}const Ne=D(K,[["render",Ae],["__scopeId","data-v-09d4e968"]]);const Se={name:"pcSearch",components:{layerList:E,normalList:Q,galleryList:j,articleUpassComponent:z},data(){return{form:null,util:T,keyword:"",boardList:[],productList:[],categoryListNames:{},memberInfo:{},serverFlag:!1,boardImageSize:{},passDialogShow:!1,articleId:"",bid:"",searchResult:!1}},created(){const t=F.getSession();t&&t.memberInfo&&(this.memberInfo=t.memberInfo),this.getData()},methods:{getData(){f.post(x,{},t=>{var s,c;for(const o of t.data.categoryList)if(this.categoryListNames[o.id]=o.cname,((s=o.subList)==null?void 0:s.length)>0){for(const e of o.subList)if(this.categoryListNames[e.id]=e.cname,((c=e.subList)==null?void 0:c.length)>0)for(const d of e.subList)this.categoryListNames[d.id]=d.cname}})},setDataList(t){this.productList=[];for(let s of t.productList.data){let c="",o=s.category1.split(",");c=this.categoryListNames[o[0]],o[1]&&(c+=" > "+this.categoryListNames[o[1]]),o[2]&&(c+=" > "+this.categoryListNames[o[2]]);let e;this.memberInfo.id?e=s.myWish?"heart":"empty":e="empty",s.wishIcon=e,s.category=c,this.productList.push(s)}this.boardImageSize=t.imageset.blist,this.boardList=[];for(let s of t.boards){let c={};if(s.info.categoryUse=="yes")for(let o of JSON.parse(s.info.categoryList))c[o.code]=o.name;if(s.categoryNames=c,s.info.btype=="faq"||s.info.btype=="notice")for(let o of s.list)o.open=!1;else{let o=0;for(let e of s.list)t.memberset&&t.memberset.nickUse=="yes"&&e.nick?e.userName=e.nick:e.name?e.userName=e.name:e.userName=e.user_name,s.list[o]=e,o++}this.boardList.push(s)}},productDetail(t){this.$router.push("/product/productView/"+t+"/default")},productWish(t){const s=this.productList[t].id;if(!this.memberInfo.id){let o={type:"confirm",message:"회원만 사용 가능합니다<br>로그인 하시겠습니까",doAction:()=>{this.$router.push("/memberLogin")}};this.emitter.emit("modalOpen",o);return}const c={pid:s};f.post(B,c,o=>{let e=this.productList[t];e.wish=o.data.total,o.data.rtype=="delete"?e.wishIcon="empty":e.wishIcon="heart",this.productList[t]=e})},search(){if(this.form){let t={keyword:this.keyword};this.emitter.emit("overlay","open"),this.serverFlag=!0,f.post(O,t,s=>{this.searchResult=!0,this.keywordResult=this.keyword,this.emitter.emit("overlay","hide"),this.serverFlag=!1,this.setDataList(s.data)})}},boardAction(t){switch(t.type){case"view":this.articelView(t.item);break}},articelView(t){this.bid=t.bid;let s=!1;if(t.secret=="yes")if(t.user_id)t.user_id==this.memberInfo.id&&(s=!0);else{this.articleId=t.id,this.passDialogShow=!0;return}else s=!0;s&&this.$router.push("/board/articleView/"+this.bid+"/"+t.id)}}},R=t=>(P("data-v-1c5b1ae4"),t=t(),Y(),t),Ue={class:"page-container"},Ce={class:"search-info"},De={class:"field-box"},Re={class:"flex-area"},Ve={key:0,class:"list-container"},Fe=R(()=>i("div",{class:"p-title"},"상품목록",-1)),xe={class:"product-list"},Be={class:"img"},Oe=["onClick","src"],Te=["onClick"],Ee={key:0,src:H},Qe={key:1,src:q},ze=["onClick"],We={class:"category"},Pe={class:"like-box"},Ye=R(()=>i("img",{src:$},null,-1)),qe={class:"pname string-cut"},$e={class:"price"},He={key:0},Je={style:{"text-decoration":"line-through","padding-right":"10px"}},je={key:1},Me={key:0,class:"no-data"},Xe=R(()=>i("div",{class:"p-title",style:{"margin-bottom":"0"}},"게시판",-1)),Ke={class:"board-container"},Ge={class:"btitle"},Ze={key:0,class:"no-data"};function et(t,s,c,o,e,d){const y=u("v-text-field"),g=u("font-awesome-icon"),A=u("v-btn"),N=u("v-form"),S=u("layerList"),U=u("galleryList"),C=u("normalList"),r=u("articleUpassComponent");return n(),l("div",Ue,[p(N,{modelValue:e.form,"onUpdate:modelValue":s[1]||(s[1]=a=>e.form=a),novalidate:"",onSubmit:s[2]||(s[2]=W(a=>d.search(),["prevent"]))},{default:L(()=>[i("ul",Ce,[i("li",null,[i("div",De,[i("div",Re,[p(y,{modelValue:e.keyword,"onUpdate:modelValue":s[0]||(s[0]=a=>e.keyword=a),ref:"keyword",rules:[()=>!!e.keyword||"검색어를 입력하세요"],placeholder:"검색어를 입력하세요",rounded:"",variant:"outlined"},null,8,["modelValue","rules"]),p(A,{class:"blackButton",type:"submit",variant:"outlined",rounded:""},{default:L(()=>[i("span",null,[p(g,{class:"icon",icon:"fa-solid fa-magnifying-glass"}),b(" 검색")])]),_:1})])])])])]),_:1},8,["modelValue"]),e.searchResult?(n(),l("div",Ve,[Fe,i("ul",xe,[(n(!0),l(k,null,w(e.productList,(a,v)=>(n(),l("li",null,[i("div",Be,[i("img",{onClick:V=>d.productDetail(a.id),class:"list-img",src:a.listImg,style:{"max-width":"100%"}},null,8,Oe),i("div",{class:"icon-box",onClick:V=>d.productWish(v)},[a.wishIcon=="heart"?(n(),l("img",Ee)):(n(),l("img",Qe))],8,Te)]),i("div",{class:"content",onClick:V=>d.productDetail(a.id)},[i("div",We,[b(m(a.category)+" ",1),i("div",Pe,[Ye,b(" "+m(e.util.numberFormat(a.wish)),1)])]),i("div",qe,m(a.pname),1),i("div",$e,[a.dcprice>0&&parseInt(a.price)>parseInt(a.dcprice)?(n(),l("span",He,[i("span",Je,m(e.util.numberFormat(a.price))+"원",1),i("span",null,m(e.util.numberFormat(a.dcprice))+"원",1)])):(n(),l("span",je,m(e.util.numberFormat(a.price))+"원 ",1))])],8,ze)]))),256)),e.productList.length<1?(n(),l("li",Me,' "'+m(t.keywordResult)+'"로 검색된 상품이 없습니다 ',1)):h("",!0)]),Xe,(n(!0),l(k,null,w(e.boardList,a=>(n(),l("div",Ke,[i("div",Ge,m(a.info.bname),1),a.info.btype=="faq"||a.info.btype=="notice"?(n(),_(S,{key:0,articleList:a.list,boardCategoryUse:a.info.categoryUse=="yes",categoryNames:a.categoryNames},null,8,["articleList","boardCategoryUse","categoryNames"])):a.info.btype=="photo"?(n(),_(U,{key:1,onBoardAction:d.boardAction,imageSize:e.boardImageSize,categoryNames:a.categoryNames,boardCategoryUse:a.info.categoryUse=="yes",articleData:a.list},null,8,["onBoardAction","imageSize","categoryNames","boardCategoryUse","articleData"])):a.info.btype=="list"?(n(),_(C,{key:2,onBoardAction:d.boardAction,categoryNames:a.categoryNames,boardCategoryUse:a.info.categoryUse=="yes",articleData:a.list},null,8,["onBoardAction","categoryNames","boardCategoryUse","articleData"])):h("",!0)]))),256)),e.boardList.length<1?(n(),l("div",Ze,' "'+m(t.keywordResult)+'"로 검색된 게시판글이 없습니다 ',1)):h("",!0),p(r,{bid:e.bid,articleId:e.articleId,modelOpen:e.passDialogShow,onParentOpenFalse:s[3]||(s[3]=a=>e.passDialogShow=!1)},null,8,["bid","articleId","modelOpen"])])):h("",!0)])}const tt=D(Se,[["render",et],["__scopeId","data-v-1c5b1ae4"]]);const st={components:{mobileSearch:Ne,pcSearch:tt},data(){return{mobile:!1}},created(){this.mobile=this.$isMobile()}},ot={class:"page-container"};function it(t,s,c,o,e,d){const y=u("mobileSearch"),g=u("pcSearch");return n(),l("div",ot,[e.mobile?(n(),_(y,{key:0})):(n(),_(g,{key:1}))])}const ft=D(st,[["render",it],["__scopeId","data-v-3632caae"]]);export{ft as default};
