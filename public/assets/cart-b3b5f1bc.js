import{e as P,a as A,a0 as R,a1 as D,a2 as F}from"./apiService-6a3981ff.js";import{U as T}from"./util-c02dbcf9.js";import{m as S,_ as L,r as C,o as c,c as r,a as t,e as m,k as u,F as b,g as y,t as a,b as f,w as x,p as w,f as N,j as O}from"./index-7c0b344a.js";import{m as U}from"./mobile-8dd88b05.js";import"./axios-c24e582b.js";import"./jquery-d0ecd42c.js";const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABySURBVHgB7ZLRCYAwDESv4h7WTXSqfmSCTKWb1BG6geZDoUiVGlQUfT+h13BcSIDPYfY+nXNeil3JAzPX0CCGY44WY6LGTkoDHb2kbpGbaotUb4GTuddQRrLzppe3J6JKbajhN7yAxx12mdDCgZQBr2MCuJkkUqws0zkAAAAASUVORK5CYII=";const B={name:"cart",data(){return{util:T,productList:[],memberInfo:{},totalOrderPrice:0,totalOrderAmt:0,insertFlag:!1,totalReservePoint:0}},created(){this.setClass("sub"),this.setTitle("장바구니");const s=P.getSession();s&&s.memberInfo&&(this.memberInfo=s.memberInfo),this.getData()},methods:{...S(U,["setClass","setTitle"]),getData(){A.get(R,{},s=>{this.productList=[];for(let o of s.data.data){const n=o.categoryNames;let d=[];for(const i of n)d.push(i.cname);if(o.categoryName=d.join(" > "),o.optionResult){let i=[];for(const l of o.optionResult)l.required!="Y"&&i.push(l);o.singleOptionList=i}this.productList.push(o)}this.totalOrderAmt=s.data.totalOrderAmt,this.totalOrderPrice=s.data.totalPrice,this.totalReservePoint=s.data.totalReservePoint})},productDetail(s){this.$router.push("/product/productView/"+s+"/default")},updateAmt(s,o){let n=this.productList[o],d=parseInt(n.camt);switch(s){case"plus":d=d+1;break;case"minus":if(d>1)d=d-1;else return;break}const i={id:n.id,camt:d};A.post(D,i,l=>{if(l.status=="success"){n.camt=d;const p=n.dcprice?n.dcprice:n.price;n.sellprice=parseInt(p)*parseInt(d),this.setTotalPrice()}else{let p="";switch(l.data){case"overAmt":p="판매가능 재고보다 구매수량이 많습니다";break;case"reload":p="현재 이 상품은 판매불가능한 상품입니다 정보를 RELOAD 합니다",this.getData();break}let g={message:p};this.emitter.emit("modalOpen",g)}})},setTotalPrice(){let s=0,o=0;for(const n of this.productList)if(n.status=="sale"){if(n.optionResult&&n.singleOptionList.length>0)for(const d of n.singleOptionList)o+=parseInt(d.sellprice);s+=parseInt(n.camt),o+=parseInt(n.sellprice)}this.totalOrderAmt=s,this.totalOrderPrice=o},deleteCart(s){const o={type:"confirm",message:"선택된 상품을 장바구니에서 삭제하시겠습니까?",doAction:()=>{this.deleteAction("part",s)}};this.emitter.emit("modalOpen",o)},deleteAllCart(){const s={type:"confirm",message:"장바구니에 담긴 상품을 모두 삭제하시겠습니까?",doAction:()=>{this.deleteAction("all")}};this.emitter.emit("modalOpen",s)},deleteAction(s,o){if(this.insertFlag)return;this.insertFlag=!0;let n="";s=="part"&&(n=this.productList[o].id);const d={id:n,type:s};this.emitter.emit("overlay","open"),A.post(F,d,i=>{this.insertFlag=!1,this.emitter.emit("overlay","hide"),this.productList.splice(o,1),this.setTotalPrice()})},order(){let s=[];for(const o of this.productList)o.status=="sale"&&s.push(o.id);if(s.length<1){const o={message:"주문할 상품이 존재하지 않습니다"};this.emitter.emit("modalOpen",o);return}this.$router.push("/order/"+s.join(",")+"/cart")}}},v=s=>(w("data-v-c096d5e3"),s=s(),N(),s),E={class:"page-container"},Y={class:"product-container"},V={class:"sub-title-box"},G=v(()=>t("img",{src:I},null,-1)),j={class:"product-list"},Q={key:0,class:"empty-box"},X={class:"img"},q=["onClick","src"],J={class:"content"},K={class:"category"},M=["onClick"],W=["onClick"],z=v(()=>t("img",{src:I},null,-1)),H=[z],Z={key:0},tt=["onClick"],et={key:0},st=["onClick"],ot={key:0},it={style:{"text-decoration":"line-through","padding-right":"10px"},class:"dcprice"},ct={key:1},nt={key:2,class:"reserve-point"},rt=v(()=>t("span",{class:"reserve-point-icon"},"적립",-1)),at={key:1},lt=["onClick"],dt={key:0},_t=["onClick"],pt={key:0},ut={style:{"text-decoration":"line-through","padding-right":"10px"},class:"dcprice"},ht={key:1},mt={key:0,class:"single-option-box"},vt=v(()=>t("div",{class:"single-title"},"추가옵션",-1)),gt={class:"single-option-ul"},ft={class:"sopt-name"},kt={key:0,class:"sopt-price"},At={key:1,class:"sopt-soldout"},Ct=["onClick"],bt={key:3,class:"counter-body"},yt={class:"counter"},It=["onClick"],$t={class:"amount"},Lt=["onClick"],Ot={class:"counter-price"},Pt={class:"cart-container"},Rt=v(()=>t("div",{class:"cart-divide"},null,-1)),Dt={class:"cart-box"},Ft=v(()=>t("div",{class:"cart-title"}," 주문정보 ",-1)),Tt={class:"cart-content"},xt=v(()=>t("div",{class:"c-name"},"상품수",-1)),wt={class:"c-value"},Nt={key:0},St=v(()=>t("div",{class:"c-name"},"총 적립금",-1)),Ut={class:"c-value"},Bt=v(()=>t("div",{class:"c-name"},"총 주문금액",-1)),Et={class:"c-value total-price"},Yt=v(()=>t("span",null,"주문하기",-1));function Vt(s,o,n,d,i,l){const p=C("font-awesome-icon"),g=C("v-btn");return c(),r("div",E,[t("div",Y,[t("div",V,[t("span",{onClick:o[0]||(o[0]=e=>l.deleteAllCart())},[G,m(" 전체삭제 ")])]),t("ul",j,[i.productList.length<1?(c(),r("li",Q," 장바구니에 상품이 없습니다 ")):u("",!0),(c(!0),r(b,null,y(i.productList,(e,k)=>(c(),r("li",{key:e.id},[t("div",X,[t("img",{onClick:_=>l.productDetail(e.pid),class:"list-img",src:e.listImg},null,8,q)]),t("div",J,[t("div",K,[t("div",{class:"category-name",onClick:_=>l.productDetail(e.pid)},a(e.categoryName),9,M),t("div",{class:"del-box",onClick:_=>l.deleteCart(k)},H,8,W)]),e.optionResult?(c(),r("div",at,[t("div",{class:"pname string-cut",onClick:_=>l.productDetail(e.pid)},[m(a(e.pname)+" ",1),e.option_name?(c(),r("span",dt,"("+a(e.option_name)+")",1)):u("",!0)],8,lt),t("div",{class:"price",onClick:_=>l.productDetail(e.pid)},[e.dcprice>0&&parseInt(e.price)>parseInt(e.dcprice)?(c(),r("span",pt,[t("span",ut,a(i.util.numberFormat(e.price))+"원",1),t("span",null,a(i.util.numberFormat(e.dcprice))+"원",1)])):(c(),r("span",ht,a(i.util.numberFormat(e.price))+"원 ",1))],8,_t),e.singleOptionList.length>0?(c(),r("div",mt,[vt,t("ul",gt,[(c(!0),r(b,null,y(e.singleOptionList,(_,$)=>(c(),r("li",{key:"spt"+$},[t("div",ft,a(_.option_parent_name)+":"+a(_.option_name),1),_.status=="sale"?(c(),r("div",kt,[t("span",null,a(_.camt)+"개, "+a(i.util.numberFormat(_.sellprice))+"원 ",1)])):(c(),r("div",At," [품절] "))]))),128))])])):u("",!0)])):(c(),r("div",Z,[t("div",{class:"pname string-cut",onClick:_=>l.productDetail(e.pid)},[m(a(e.pname)+" ",1),e.option_name?(c(),r("span",et,"("+a(e.option_name)+")",1)):u("",!0)],8,tt),t("div",{class:"price",onClick:_=>l.productDetail(e.pid)},[e.dcprice>0&&parseInt(e.price)>parseInt(e.dcprice)?(c(),r("span",ot,[t("span",it,a(i.util.numberFormat(e.price))+"원",1),t("span",null,a(i.util.numberFormat(e.dcprice))+"원",1)])):(c(),r("span",ct,a(i.util.numberFormat(e.price))+"원 ",1)),e.reservePoint>0?(c(),r("div",nt,[rt,m(" "+a(i.util.numberFormat(e.reservePoint))+"원 ",1)])):u("",!0)],8,st)])),e.status=="soldout"?(c(),r("div",{key:2,class:"soldout",onClick:_=>l.productDetail(e.pid)}," [품절] ",8,Ct)):(c(),r("div",bt,[t("ul",yt,[t("li",{onClick:_=>l.updateAmt("minus",k)},[f(p,{icon:"fa-solid fa-minus"})],8,It),t("li",$t,a(e.camt),1),t("li",{onClick:_=>l.updateAmt("plus",k)},[f(p,{icon:"fa-solid fa-plus"})],8,Lt)]),t("div",Ot,[f(p,{class:"icon",icon:"fa-solid fa-won-sign"}),m(" "+a(i.util.numberFormat(e.sellprice)),1)])]))])]))),128))])]),t("div",Pt,[Rt,t("div",Dt,[Ft,t("ul",Tt,[t("li",null,[xt,t("div",wt,a(i.totalOrderAmt)+"개",1)]),i.totalReservePoint>0?(c(),r("li",Nt,[St,t("div",Ut,a(i.util.numberFormat(i.totalReservePoint))+"원",1)])):u("",!0),t("li",null,[Bt,t("div",Et,a(i.util.numberFormat(i.totalOrderPrice))+"원",1)])]),f(g,{class:"blackButton",onClick:o[1]||(o[1]=e=>l.order()),variant:"tonal",rounded:""},{default:x(()=>[Yt]),_:1})])])])}const Gt=L(B,[["render",Vt],["__scopeId","data-v-c096d5e3"]]);const jt={name:"cart",data(){return{util:T,productList:[],memberInfo:{},totalOrderPrice:0,totalOrderAmt:0,insertFlag:!1,totalReservePoint:0}},created(){const s=P.getSession();s&&s.memberInfo&&(this.memberInfo=s.memberInfo),this.getData()},methods:{getData(){A.get(R,{},s=>{this.productList=[];for(let o of s.data.data){const n=o.categoryNames;let d=[];for(const i of n)d.push(i.cname);if(o.categoryName=d.join(" > "),o.optionResult){let i=[];for(const l of o.optionResult)l.required!="Y"&&i.push(l);o.singleOptionList=i}this.productList.push(o)}this.totalOrderAmt=s.data.totalOrderAmt,this.totalOrderPrice=s.data.totalPrice,this.totalReservePoint=s.data.totalReservePoint})},productDetail(s){this.$router.push("/product/productView/"+s+"/default")},updateAmt(s,o){let n=this.productList[o];console.log(n);let d=parseInt(n.camt);switch(s){case"plus":d=d+1;break;case"minus":if(d>1)d=d-1;else return;break}const i={id:n.id,camt:d};A.post(D,i,l=>{if(l.status=="success"){n.camt=d;const p=n.dcprice?n.dcprice:n.price;n.sellprice=parseInt(p)*parseInt(d),this.setTotalPrice()}else{let p="";switch(l.data){case"overAmt":p="판매가능 재고보다 구매수량이 많습니다";break;case"reload":p="현재 이 상품은 판매불가능한 상품입니다 정보를 RELOAD 합니다",this.getData();break}let g={message:p};this.emitter.emit("modalOpen",g)}})},setTotalPrice(){let s=0,o=0;for(const n of this.productList)if(n.status=="sale"){if(n.optionResult&&n.singleOptionList.length>0)for(const d of n.singleOptionList)o+=parseInt(d.sellprice);s+=parseInt(n.camt),o+=parseInt(n.sellprice)}this.totalOrderAmt=s,this.totalOrderPrice=o},deleteCart(s){const o={type:"confirm",message:"선택된 상품을 장바구니에서 삭제하시겠습니까?",doAction:()=>{this.deleteAction("part",s)}};this.emitter.emit("modalOpen",o)},deleteAllCart(){const s={type:"confirm",message:"장바구니에 담긴 상품을 모두 삭제하시겠습니까?",doAction:()=>{this.deleteAction("all")}};this.emitter.emit("modalOpen",s)},deleteAction(s,o){if(this.insertFlag)return;this.insertFlag=!0;let n="";s=="part"&&(n=this.productList[o].id);const d={id:n,type:s};this.emitter.emit("overlay","open"),A.post(F,d,i=>{this.insertFlag=!1,this.emitter.emit("overlay","hide"),this.productList.splice(o,1),this.setTotalPrice()})},order(){let s=[];for(const o of this.productList)o.status=="sale"&&s.push(o.id);if(s.length<1){const o={message:"주문할 상품이 존재하지 않습니다"};this.emitter.emit("modalOpen",o);return}this.$router.push("/order/"+s.join(",")+"/cart")}}},h=s=>(w("data-v-25fc3560"),s=s(),N(),s),Qt={class:"page-container"},Xt={class:"product-container"},qt={class:"sub-title-box"},Jt=h(()=>t("div",{class:"sub-title"}," 장바구니 ",-1)),Kt=h(()=>t("img",{src:I},null,-1)),Mt={class:"product-list"},Wt={class:"img"},zt=["onClick","src"],Ht={class:"content"},Zt={class:"category"},te=["onClick"],ee=["onClick"],se=h(()=>t("img",{src:I},null,-1)),oe=[se],ie={key:0},ce=["onClick"],ne={key:0},re=["onClick"],ae={key:0},le={style:{"text-decoration":"line-through","padding-right":"10px"},class:"dcprice"},de={key:1},_e={key:2,class:"reserve-point"},pe=h(()=>t("span",{class:"reserve-point-icon"},"적립",-1)),ue={key:1},he=["onClick"],me={key:0},ve=["onClick"],ge={key:0},fe={style:{"text-decoration":"line-through","padding-right":"10px"},class:"dcprice"},ke={key:1},Ae={key:0,class:"single-option-box"},Ce=h(()=>t("div",{class:"single-title"},"추가옵션",-1)),be={class:"single-option-ul"},ye={class:"sopt-name"},Ie={key:0,class:"sopt-price"},$e={key:1,class:"sopt-soldout"},Le=["onClick"],Oe={key:3,class:"counter-body"},Pe={class:"counter"},Re=["onClick"],De={class:"amount"},Fe=["onClick"],Te={class:"counter-price"},xe={class:"cart-container"},we=h(()=>t("div",{class:"cart-divide"},null,-1)),Ne={class:"cart-box"},Se=h(()=>t("div",{class:"cart-title"}," 주문정보 ",-1)),Ue={class:"cart-content"},Be=h(()=>t("div",{class:"c-name"},"상품수",-1)),Ee={class:"c-value"},Ye={key:0},Ve=h(()=>t("div",{class:"c-name"},"총 적립금",-1)),Ge={class:"c-value"},je=h(()=>t("div",{class:"c-name"},"총 주문금액",-1)),Qe={class:"c-value total-price"},Xe=h(()=>t("span",null,"주문하기",-1));function qe(s,o,n,d,i,l){const p=C("font-awesome-icon"),g=C("v-btn");return c(),r("div",Qt,[t("div",Xt,[t("div",qt,[Jt,t("span",{onClick:o[0]||(o[0]=e=>l.deleteAllCart())},[Kt,m(" 전체삭제 ")])]),t("ul",Mt,[(c(!0),r(b,null,y(i.productList,(e,k)=>(c(),r("li",{key:e.id},[t("div",Wt,[t("img",{onClick:_=>l.productDetail(e.pid),class:"list-img",src:e.listImg},null,8,zt)]),t("div",Ht,[t("div",Zt,[t("div",{class:"category-name",onClick:_=>l.productDetail(e.pid)},a(e.categoryName),9,te),t("div",{class:"del-box",onClick:_=>l.deleteCart(k)},oe,8,ee)]),e.optionResult?(c(),r("div",ue,[t("div",{class:"pname string-cut",onClick:_=>l.productDetail(e.pid)},[m(a(e.pname)+" ",1),e.option_name?(c(),r("span",me,"("+a(e.option_name)+")",1)):u("",!0)],8,he),t("div",{class:"price",onClick:_=>l.productDetail(e.pid)},[e.dcprice>0&&parseInt(e.price)>parseInt(e.dcprice)?(c(),r("span",ge,[t("span",fe,a(i.util.numberFormat(e.price))+"원",1),t("span",null,a(i.util.numberFormat(e.dcprice))+"원",1)])):(c(),r("span",ke,a(i.util.numberFormat(e.price))+"원 ",1))],8,ve),e.singleOptionList.length>0?(c(),r("div",Ae,[Ce,t("ul",be,[(c(!0),r(b,null,y(e.singleOptionList,(_,$)=>(c(),r("li",{key:"spt"+$},[t("div",ye,a(_.option_parent_name)+":"+a(_.option_name),1),_.status=="sale"?(c(),r("div",Ie,[t("span",null,a(_.camt)+"개, "+a(i.util.numberFormat(_.sellprice))+"원 ",1)])):(c(),r("div",$e," [품절] "))]))),128))])])):u("",!0)])):(c(),r("div",ie,[t("div",{class:"pname string-cut",onClick:_=>l.productDetail(e.pid)},[m(a(e.pname)+" ",1),e.option_name?(c(),r("span",ne,"("+a(e.option_name)+")",1)):u("",!0)],8,ce),t("div",{class:"price",onClick:_=>l.productDetail(e.pid)},[e.dcprice>0&&parseInt(e.price)>parseInt(e.dcprice)?(c(),r("span",ae,[t("span",le,a(i.util.numberFormat(e.price))+"원",1),t("span",null,a(i.util.numberFormat(e.dcprice))+"원",1)])):(c(),r("span",de,a(i.util.numberFormat(e.price))+"원 ",1)),e.reservePoint>0?(c(),r("div",_e,[pe,m(" "+a(i.util.numberFormat(e.reservePoint))+"원 ",1)])):u("",!0)],8,re)])),e.status=="soldout"?(c(),r("div",{key:2,class:"soldout",onClick:_=>l.productDetail(e.pid)}," [품절] ",8,Le)):(c(),r("div",Oe,[t("ul",Pe,[t("li",{onClick:_=>l.updateAmt("minus",k)},[f(p,{icon:"fa-solid fa-minus"})],8,Re),t("li",De,a(e.camt),1),t("li",{onClick:_=>l.updateAmt("plus",k)},[f(p,{icon:"fa-solid fa-plus"})],8,Fe)]),t("div",Te,[f(p,{class:"icon",icon:"fa-solid fa-won-sign"}),m(" "+a(i.util.numberFormat(e.sellprice)),1)])]))])]))),128))])]),t("div",xe,[we,t("div",Ne,[Se,t("ul",Ue,[t("li",null,[Be,t("div",Ee,a(i.totalOrderAmt)+"개",1)]),i.totalReservePoint>0?(c(),r("li",Ye,[Ve,t("div",Ge,a(i.util.numberFormat(i.totalReservePoint))+"원",1)])):u("",!0),t("li",null,[je,t("div",Qe,a(i.util.numberFormat(i.totalOrderPrice))+"원",1)])]),f(g,{class:"blackButton",onClick:o[1]||(o[1]=e=>l.order()),variant:"flat",rounded:""},{default:x(()=>[Xe]),_:1})])])])}const Je=L(jt,[["render",qe],["__scopeId","data-v-25fc3560"]]);const Ke={name:"cart",components:{mobileCart:Gt,pcCart:Je},data(){return{mobile:!1}},created(){this.mobile=this.$isMobile()}},Me={class:"page-container"};function We(s,o,n,d,i,l){const p=C("mobileCart"),g=C("pcCart");return c(),r("div",Me,[i.mobile?(c(),O(p,{key:0})):(c(),O(g,{key:1}))])}const os=L(Ke,[["render",We],["__scopeId","data-v-d4ae8637"]]);export{os as default};
