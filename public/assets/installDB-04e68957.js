import{a as m,A as V,b as g,c as I,d as w}from"./apiService-6a3981ff.js";import{_ as A,r as c,o as f,c as _,a as e,b as i,w as p,d as v,e as n,p as U,f as P}from"./index-7c0b344a.js";import"./axios-c24e582b.js";const S={data(){return{form1:null,form2:null,name:"",uid:"",upass:"",reUpass:"",dbName:"",dbHost:"localhost",dbPort:"3306",dbId:"",dbPass:"",step:1,buttonTitle:"다음 단계"}},created(){this.getData()},methods:{getData(){m.post(V,{},t=>{t.status!="success"&&(t.data=="noTable"?this.step=2:t.data=="already"?window.location.href="/":t.data=="wrong")})},nameError(t){return t?!0:"관리자명을 입력하세요"},upassError(t){return t?!0:"비밀번호를 입력하세요"},reUpassError(t){return t?t!=this.upass?"비밀번호와 비밀번호확인이 다릅니다":!0:"비밀번호 확인을 입력하세요"},validate(){if(this.form1){if(this.reUpass!=this.upass)return;let t={dbName:this.dbName,dbHost:this.dbHost,dbPort:this.dbPort,dbId:this.dbId,dbPw:this.dbPass};if(this.serverFlag)return;this.serverFlag=!0,this.emitter.emit("overlay","open"),m.post(g,t,s=>{if(s.status=="success")this.checkDb();else{this.serverFlag=!1,this.emitter.emit("overlay","hide");const d={message:"이미 설치파일이 존재합니다"};this.emitter.emit("modalOpen",d)}})}},checkDb(){m.post(I,{},t=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),t.status=="success")this.step=2;else{let s={};t.data=="complete"?s={message:"사이트 설정이 완료되었습니다",doAction:()=>{window.location.href="/"}}:t.data=="dirChangeError"?(s={message:"디렉토리 및 파일 퍼미션 변경 에러 입니다 디렉토리및 파일을 확인하세요"},this.emitter.emit("modalOpen",s)):s={message:"잘못된 데이타베이스 정보 입니다"},this.emitter.emit("modalOpen",s)}})},installAction(){if(this.form2){if(this.serverFlag)return;const t={adminName:this.name,adminId:this.uid,adminPw:this.upass};this.serverFlag=!0,this.emitter.emit("overlay","open"),m.post(w,t,s=>{this.serverFlag=!1,this.emitter.emit("overlay","hide");let d={};s.status=="success"?d={message:"사이트 설정이 완료되었습니다",doAction:()=>{window.location.href="/"}}:d={message:"사이트 설정에 실패하였습니다"},this.emitter.emit("modalOpen",d)})}}}},r=t=>(U("data-v-eda13974"),t=t(),P(),t),y={class:"page-container"},E=r(()=>e("div",{class:"install-header"},[e("h2",null,"RIVERFLOW SHOP DB INSTALL")],-1)),N={class:"install-container"},L={class:"install-regist"},x={key:0,class:"install-form"},F=r(()=>e("div",{class:"install-title"},"데이타 베이스 설정",-1)),T={class:"ul-box"},q=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("데이타베이스 이름")],-1)),D=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("데이타베이스 호스트")],-1)),B=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("데이타베이스 포트")],-1)),H=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("계정 아이디")],-1)),k=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("계정 비밀번호")],-1)),O={class:"flex"},C={class:"button-row"},R={key:1,class:"install-form"},G=r(()=>e("div",{class:"install-title"},"관리자 정보 설정",-1)),K={class:"ul-box"},M=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("관리자명 ")],-1)),W=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("아이디")],-1)),j=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("비밀번호")],-1)),z=r(()=>e("li",null,[e("span",{class:"required-icon"},"*"),n("비밀번호 확인")],-1)),J={class:"button-row"};function Q(t,s,d,X,o,u){const a=c("v-text-field"),h=c("v-btn"),b=c("v-form");return f(),_("div",y,[E,e("div",N,[e("div",L,[o.step==1?(f(),_("div",x,[i(b,{modelValue:o.form1,"onUpdate:modelValue":s[5]||(s[5]=l=>o.form1=l),novalidate:"",onSubmit:v(u.validate,["prevent"])},{default:p(()=>[F,e("div",T,[e("ul",null,[q,e("li",null,[i(a,{modelValue:o.dbName,"onUpdate:modelValue":s[0]||(s[0]=l=>o.dbName=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[l=>!!l||"데이타베이스 이름를 입력하세요"],placeholder:"데이타베이스 이름을 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[D,e("li",null,[i(a,{modelValue:o.dbHost,"onUpdate:modelValue":s[1]||(s[1]=l=>o.dbHost=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[l=>!!l||"데이타베이스 호스트를 입력하세요"],placeholder:"데이타베이스 호스트를 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[B,e("li",null,[i(a,{modelValue:o.dbPort,"onUpdate:modelValue":s[2]||(s[2]=l=>o.dbPort=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[l=>!!l||"데이타베이스 포트를 입력하세요"],placeholder:"데이타베이스 포트를 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[H,e("li",null,[i(a,{modelValue:o.dbId,"onUpdate:modelValue":s[3]||(s[3]=l=>o.dbId=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[l=>!!l||"계정 아이디를 입력하세요"],placeholder:"계정 아이디를 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[k,e("li",O,[i(a,{modelValue:o.dbPass,"onUpdate:modelValue":s[4]||(s[4]=l=>o.dbPass=l),rules:[l=>!!l||"계정 비밀번호를 입력하세요"],variant:"outlined","bg-color":"#fff",placeholder:"계정 비밀번호를 입력해주세요",rounded:""},null,8,["modelValue","rules"])])])]),e("div",C,[i(h,{class:"submit-button",type:"submit"},{default:p(()=>[n("다음 단계")]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):(f(),_("div",R,[i(b,{modelValue:o.form2,"onUpdate:modelValue":s[10]||(s[10]=l=>o.form2=l),novalidate:"",onSubmit:v(u.installAction,["prevent"])},{default:p(()=>[G,e("div",K,[e("ul",null,[M,e("li",null,[i(a,{modelValue:o.name,"onUpdate:modelValue":s[6]||(s[6]=l=>o.name=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[u.nameError],placeholder:"관리자명을 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[W,e("li",null,[i(a,{modelValue:o.uid,"onUpdate:modelValue":s[7]||(s[7]=l=>o.uid=l),variant:"outlined",rounded:"","bg-color":"#fff",rules:[l=>!!l||"아이디를 입력하세요"],placeholder:"아이디를 입력해주세요"},null,8,["modelValue","rules"])])]),e("ul",null,[j,e("li",null,[i(a,{modelValue:o.upass,"onUpdate:modelValue":s[8]||(s[8]=l=>o.upass=l),type:"password","bg-color":"#fff",rules:[u.upassError],variant:"outlined",placeholder:"비밀번호를 입력해주세요",rounded:""},null,8,["modelValue","rules"])])]),e("ul",null,[z,e("li",null,[i(a,{modelValue:o.reUpass,"onUpdate:modelValue":s[9]||(s[9]=l=>o.reUpass=l),type:"password","bg-color":"#fff",rules:[u.reUpassError],variant:"outlined",placeholder:"비밀번호 확인을 입력해주세요",rounded:""},null,8,["modelValue","rules"])])])]),e("div",J,[i(h,{class:"submit-button",type:"submit"},{default:p(()=>[n("설치하기")]),_:1})])]),_:1},8,["modelValue","onSubmit"])]))])])])}const ee=A(S,[["render",Q],["__scopeId","data-v-eda13974"]]);export{ee as default};
