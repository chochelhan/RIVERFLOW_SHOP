import{a as v,E as N,F as O,G as x,H as S,I as V}from"./apiService-0aea4262.js";import{_ as E,r as p,o as r,c as u,a as s,b as n,w as m,F as A,g as y,t as b,d as T,k as D,e as I,n as P,j as g,s as F,W as k,p as U,f as R}from"./index-7c0b344a.js";import"./axios-c24e582b.js";const M={data(){return{baseAddInfoId:"newAddInfo",addInfoList:[],addInfoRegistTitle:"추가정보 상세설정",addInfoId:"",bname:"",buse:"yes",buttonTitle:"저장",serverFlag:!1,addInfoItemList:[],form:null}},created(){this.getData(),this.setAddInfoList()},methods:{bnameErrors(t){return t?!0:"추가정보명을 입력하세요"},getData(){this.serverFlag||(this.serverFlag=!0,v.post(N,{},t=>{this.serverFlag=!1,this.addInfoList=[];for(let e of t.data)e.active="",this.addInfoList.push(e);this.addInfoList[0]&&this.choiceAddInfo(this.addInfoList[0].id)}))},setAddInfoList(){this.addInfoItemList=[],this.addInfoItemList.push({name:""})},deleteAddInfoList(t){this.addInfoItemList.splice(t,1)},addAddInfoList(){if(this.addInfoItemList.length>10){const t={message:"더이상 항목을 추가할수 없습니다"};this.emitter.emit("modalOpen",t);return}this.addInfoItemList.push({name:""})},choiceAddInfo(t){let e={};for(let i of this.addInfoList)i.id==t?(i.active="active",e=i):i.active="";this.addInfoId=e.id,this.bname=e.bname,this.buse=e.buse,this.addInfoItemList=[];for(let i of JSON.parse(e.itemList))this.addInfoItemList.push({name:i.name})},addAddInfo(){if(this.addInfoList.length>20){const e={message:"더이상 추가정보를 추가할수 없습니다"};this.emitter.emit("modalOpen",e);return}if(this.serverFlag)return;const t=this.baseAddInfoId;for(let e of this.addInfoList)e.active="";this.addInfoList.push({bname:"새 추가정보",id:t,active:"active"}),this.addInfoId=t,this.bname="새 추가정보",this.buse="no",this.addInfoItemList=[],this.addInfoItemList.push({name:""}),this.validate()},checkItemName(t){let e=this.addInfoItemList[t];return e.name?(e.error=!1,!0):"항목명을 입력하세요"},deleteAddInfo(t,e){this.deleteConfirm(t,e)},deleteConfirm(t,e){const i={type:"confirm",message:"선택된 추가정보를 삭제하시겠습니까?",doAction:()=>{this.deleteAction(t,e)}};this.emitter.emit("modalOpen",i)},deleteAction(t,e){this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),v.post(O,{id:t},i=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),i.status=="success"){const a={message:"선택된 추가정보가 삭제되었습니다"};this.emitter.emit("modalOpen",a),this.addInfoList.splice(e,1),this.addInfoId==t&&this.addInfoList[0]&&this.choiceAddInfo(this.addInfoList[0].id)}else{const a={message:"선택된 추가정보에 상품이 존재하므로 삭제할수 없습니다"};this.emitter.emit("modalOpen",a)}}))},validate(){if(this.form){let t={bname:this.bname,buse:this.buse},e=S;if(this.addInfoId&&this.addInfoId!=this.baseAddInfoId){let i=!1;for(let a of this.addInfoItemList)a.name||(a.error=!0,i=!0);if(i)return;e=V,t.id=this.addInfoId}if(t.itemList=JSON.stringify(this.addInfoItemList),this.serverFlag)return;this.serverFlag=!0,this.emitter.emit("overlay","open"),v.post(e,t,i=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),i.data){if(t.id){let a={message:"추가정보정보가 수정 되었습니다"};this.emitter.emit("modalOpen",a)}this.updateSet(t.id,i.data)}})}},updateSet(t,e){let i=0;for(let a of this.addInfoList){if(a.id==this.addInfoId){const o=this.updateDataSet(a,t,e);this.addInfoList[i]=o;break}i++}},updateDataSet(t,e,i){return e?(t.bname=this.bname,t.buse=this.buse,t.itemList=JSON.stringify(this.addInfoItemList)):(t=i,t.active="active",this.addInfoId=t.id),t},upDownAddInfo(t){this.addInfoId&&(this.serverFlag||(this.serverFlag=!0,v.post(x,{id:this.addInfoId,cmd:t},e=>{if(this.serverFlag=!1,e.data){if(e.data=="stay")return;this.addInfoList=[];for(let i of e.data)i.id==this.addInfoId?i.active="active":i.active="",this.addInfoList.push(i)}})))}}},C=t=>(U("data-v-98dee7fc"),t=t(),R(),t),B={class:"page-container"},J={class:"addInfo-container"},j={class:"addInfo-list"},z={class:"addInfo-list-header"},G={class:"up-down"},H={class:"add"},Q={class:"addInfo-list-body"},W={class:"main-addInfo"},q={class:"main-li"},K=["onClick"],X=["onClick"],Y={class:"addInfo-regist"},Z={key:0},$={class:"addInfo-title"},ee={class:"table-ul"},te={class:"label-input"},se={class:"input-box"},ie=C(()=>s("div",{class:"label"}," 추가정보 항목 ",-1)),de={style:{"padding-top":"15px","text-align":"right"}},oe={class:"label",style:{"text-align":"center",color:"#E53935","font-size":"19px","margin-top":"-3px"}},ae={class:"label-input"},ne={class:"input-box",style:{width:"200px","text-align":"right"}},le=C(()=>s("div",{class:"label"}," 추가정보 사용여부 ",-1)),re={class:"label-input"},fe={class:"radio-box"},ce={class:"radio-box"},ue={class:"button-row"};function me(t,e,i,a,o,l){const f=p("font-awesome-icon"),h=p("v-btn"),L=p("v-text-field"),w=p("v-form");return r(),u("div",B,[s("div",J,[s("div",j,[s("div",z,[s("div",G,[n(h,{class:"white-button",onClick:e[0]||(e[0]=d=>l.upDownAddInfo("up")),variant:"outlined"},{default:m(()=>[n(f,{icon:"fa-solid fa-angle-up"})]),_:1}),n(h,{class:"white-button",onClick:e[1]||(e[1]=d=>l.upDownAddInfo("down")),variant:"outlined"},{default:m(()=>[n(f,{icon:"fa-solid fa-angle-down"})]),_:1})]),s("div",H,[n(h,{class:"white-button",onClick:e[2]||(e[2]=d=>l.addAddInfo()),variant:"outlined"},{default:m(()=>[n(f,{icon:"fa-solid fa-plus"}),I(" 추가정보 추가 ")]),_:1})])]),s("div",Q,[(r(!0),u(A,null,y(o.addInfoList,(d,c)=>(r(),u("ul",W,[s("li",q,[s("div",{class:P("main-data "+d.active)},[s("div",{class:"gname",onClick:_=>l.choiceAddInfo(d.id)},[I(b(d.bname)+" ",1),d.buse=="yes"?(r(),g(f,{key:0,icon:"fa-solid fa-eye"})):(r(),g(f,{key:1,icon:"fa-solid fa-eye-slash"}))],8,K),s("div",{class:"btn",onClick:_=>l.deleteAddInfo(d.id,c)},[n(f,{icon:"fa-solid fa-circle-minus"})],8,X)],2)])]))),256))])]),s("div",Y,[o.addInfoId?(r(),u("div",Z,[s("div",$,b(o.addInfoRegistTitle),1),n(w,{modelValue:o.form,"onUpdate:modelValue":e[7]||(e[7]=d=>o.form=d),novalidate:"",onSubmit:T(l.validate,["prevent"])},{default:m(()=>[s("ul",ee,[s("li",null,[s("div",te,[s("div",se,[n(L,{modelValue:o.bname,"onUpdate:modelValue":e[3]||(e[3]=d=>o.bname=d),rules:[l.bnameErrors],label:"추가정보명",density:"compact",variant:"outlined",placeholder:"추가정보명을 입력해주세요"},null,8,["modelValue","rules"])])])]),s("li",null,[ie,s("div",de,[n(h,{class:"white-button",onClick:e[4]||(e[4]=d=>l.addAddInfoList()),style:{width:"80px"},variant:"outlined",type:"button"},{default:m(()=>[I("항목추가 ")]),_:1})])]),(r(!0),u(A,null,y(o.addInfoItemList,(d,c)=>(r(),u("li",{key:"itm"+c},[s("div",oe,[c>0?(r(),g(f,{key:0,onClick:_=>l.deleteAddInfoList(c),style:{cursor:"pointer"},icon:"fa-solid fa-circle-minus"},null,8,["onClick"])):D("",!0)]),s("div",ae,[s("div",ne,[n(L,{modelValue:d.name,"onUpdate:modelValue":_=>d.name=_,density:"compact",variant:"outlined",rules:[l.checkItemName(c)],label:"항목명",ref_for:!0,ref:"item"+(c+1),placeholder:"항목명을 입력해주세요"},null,8,["modelValue","onUpdate:modelValue","rules"])])])]))),128)),s("li",null,[le,s("div",re,[s("div",fe,[s("div",ce,[s("label",null,[F(s("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=d=>o.buse=d),value:"yes"},null,512),[[k,o.buse]]),I(" 사용 ")]),s("label",null,[F(s("input",{type:"radio","onUpdate:modelValue":e[6]||(e[6]=d=>o.buse=d),value:"no"},null,512),[[k,o.buse]]),I(" 사용안함 ")])])])])])]),s("div",ue,[n(h,{class:"submit-button",type:"submit"},{default:m(()=>[I("추가정보정보 "+b(o.buttonTitle),1)]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):D("",!0)])])])}const ve=E(M,[["render",me],["__scopeId","data-v-98dee7fc"]]);export{ve as default};
