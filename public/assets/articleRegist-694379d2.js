import{A as S,a as x,a3 as T,a4 as N,a5 as E,a6 as R}from"./apiService-aee0d783.js";import{Q as C}from"./vue-quill.esm-bundler-7d17deec.js";import{J as j}from"./jquery-331624d0.js";import{U as k}from"./util-5fdb7bcf.js";import{m as M,_ as A,r as m,o as n,c as r,a as e,d as a,w as I,e as v,q as $,v as P,g as h,F,b as z,t as V,u as O,p as D,f as H,j as q}from"./index-e9ed42ea.js";import{m as Q}from"./mobile-9de1c1d4.js";import"./axios-c24e582b.js";const B={components:{QuillEditor:C},data(){return{bid:"",id:"",info:{},boardInfo:{},boardList:[],bidList:[],subject:"",content:"",editorOption:{placeholder:"내용을 입력하세요",theme:"snow",modules:{toolbar:{container:[["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:[]}]]}}},btype:"",category:"",categoryList:[],categoryUse:"no",secretUse:"no",secret:"",bidDisabled:!1,imgs:[{isfile:"",file:null,url:""}],imgIndex:0,imgSize:{width:640,height:640,text:"640×640"},formHasErrors:!1,serverFlag:!1,boardName:"",memberInfo:{},isLogin:!1,wAuth:"user",userName:"",userPass:"",uploadImgType:"list",form:null}},created(){this.setClass("sub"),this.setTitle("글쓰기"),this.bid=this.$route.params.bid,this.$route.params.id!="regist"&&(this.id=this.$route.params.id);const i=S.getSession();i&&(i!=null&&i.memberInfo)&&(this.memberInfo=i.memberInfo,this.isLogin=!0),this.getData()},methods:{...M(Q,["setClass","setTitle"]),getData(){const i={bid:this.bid,id:this.id};x.get(T,i,t=>{var o;if(t.data){if(this.imgSize.width=t.data.imageset.blist.width,this.imgSize.height=t.data.imageset.blist.height,this.imgSize.text=this.imgSize.width+"×"+this.imgSize.height,(o=t.data.articleInfo)!=null&&o.id&&(this.info=t.data.articleInfo,this.subject=this.info.subject,this.$refs.myQuillEditor.setHTML(this.info.content)),this.boardInfo=t.data.boardInfo,this.boardInfo.wauth=="user"&&!this.isLogin){this.$router.back();return}this.wAuth=this.boardInfo.wauth,this.boardName=this.boardInfo.bname,this.setAddInfo()}})},setAddInfo(){if(this.boardInfo.categoryUse=="yes"){this.categoryUse="yes";for(let i of JSON.parse(this.boardInfo.categoryList))this.categoryList.push({text:i.name,value:i.code});this.info.category&&(this.category=this.info.category)}this.boardInfo.secret=="yes"&&(this.secretUse="yes",this.info.secret=="yes"&&(this.secret=!0)),this.wAuth=="all"&&!this.isLogin&&(this.userName=this.info.user_name),this.btype=this.boardInfo.btype,this.boardInfo.btype=="photo"&&this.info.img&&(this.imgs=[],this.imgs.push({isfile:"yes",file:null,url:this.info.img}))},editorImageHandler(){this.uploadImgType="contentEditor",this.$refs.img.click()},deleteImg(i){this.imgs.splice(i,1),this.imgs.push({isfile:"",file:null,url:""})},insertImg(i){this.uploadImgType="list",this.$refs.img.click()},imgUpload(){const i=this.$refs.img.files;let t=i.length>0?i[0]:null;switch(this.uploadImgType){case"contentEditor":const o=new FormData;o.append("image",t),x.postFile(N,o,s=>{const d=this.editor.getSelection();this.editor.insertEmbed(d.index,"image",s.data)});break;default:let u={isfile:"",file:t,url:URL.createObjectURL(t)};this.imgs.splice(0,1,u);break}this.$refs.img.value=""},validate(){var i,t;if(this.form){const o=new FormData,u=this.$refs.myQuillEditor.getHTML(),s=k.stripTags(u);if(!k.isImgTags(u)&&!s){let c={message:"내용을 입력하세요"};this.emitter.emit("modalOpen",c);return}if(o.append("subject",this.subject),o.append("category",this.category),o.append("user_name",this.userName),o.append("user_pass",this.userPass),o.append("bid",this.bid),o.append("content",u),o.append("secret",this.secret?"yes":"no"),o.append("btype",this.boardInfo.btype),this.btype=="photo"){if(this.imgs[0].file)o.append("img",this.imgs[0].file);else if(this.imgs[0].isfile!="yes"){let c={message:"이미지를 등록하세요"};this.emitter.emit("modalOpen",c);return}}if(this.serverFlag)return;this.serverFlag=!0,(i=this.info)!=null&&i.id&&o.append("id",this.info.id),this.emitter.emit("overlay","open");const p=(t=this.info)!=null&&t.id?E:R;x.postFile(p,o,c=>{var b;if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),c.data){let g="저장";(b=this.info)!=null&&b.id&&(g="수정");let y={message:"게시글 정보가 "+g+" 되었습니다",doAction:()=>{this.$router.back()}};this.emitter.emit("modalOpen",y)}})}}},mounted(){j(".quill-content-box .ql-editor").css("min-height","400px")}},f=i=>(D("data-v-8ddbe7b2"),i=i(),H(),i),J={class:"page-container"},G={class:"product-container"},K={class:"product-regist"},W={class:"product-form",style:{"max-width":"100%"}},X={class:"input-ul"},Y={key:0},Z=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("작성자명")],-1)),ee={class:"input-box",id:"userName-required"},te={key:1},se=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("비밀번호")],-1)),ie={class:"input-box",id:"userPass-required"},oe={key:2},le=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("카테고리")],-1)),ne={class:"select-box",id:"category-required"},re={key:3,style:{"margin-top":"40px"}},ae=f(()=>e("div",{class:"label"},"비밀글 여부",-1)),de={class:"radio-box"},ce={style:{"font-weight":"bold",cursor:"pointer"}},ue={style:{"margin-top":"30px"}},me=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("제목")],-1)),he={class:"input-box",id:"subject-required"},pe=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("내용")],-1)),ge={class:"quill-content-box",style:{width:"100%","padding-bottom":"12px"}},fe={key:0,class:"product-form",style:{"margin-top":"40px"}},_e={class:"input-ul"},be=f(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("목록 이미지")],-1)),ye={class:"detail-img-box",style:{"padding-top":"5px"}},ve={class:"add-detial-img-ul"},xe={class:"reg-img-box"},Ie={key:0,class:"is-img"},we=["onClick"],ke=["src"],Le=["onClick"],Ue={class:"guide-img-icon"},Ve=f(()=>e("div",{class:"guide-img-title"},"이미지",-1)),Ae={class:"guide-img-size"},qe={class:"button-row",style:{display:"flex","justify-content":"space-between",width:"300px","max-width":"300px"}},Se=f(()=>e("span",null,"취소",-1)),Te=f(()=>e("span",null,"게시글 저장",-1));function Ne(i,t,o,u,s,d){const p=m("v-text-field"),c=m("v-select"),b=m("quill-editor"),g=m("font-awesome-icon"),y=m("v-btn"),L=m("v-form");return n(),r("div",J,[e("div",G,[a(L,{modelValue:s.form,"onUpdate:modelValue":t[7]||(t[7]=l=>s.form=l),novalidate:"",onSubmit:O(d.validate,["prevent"])},{default:I(()=>[e("input",{type:"file",style:{display:"none"},ref:"img",accept:"image/*",onChange:t[0]||(t[0]=(...l)=>d.imgUpload&&d.imgUpload(...l))},null,544),e("div",K,[e("div",W,[e("ul",X,[s.wAuth=="all"&&!s.isLogin?(n(),r("li",Y,[Z,e("div",ee,[a(p,{modelValue:s.userName,"onUpdate:modelValue":t[1]||(t[1]=l=>s.userName=l),rules:[()=>!!s.userName||"작성자명을 입력하세요"],variant:"outlined",rounded:"",ref:"userName",maxLength:"20"},null,8,["modelValue","rules"])])])):v("",!0),s.wAuth=="all"&&!s.isLogin?(n(),r("li",te,[se,e("div",ie,[a(p,{modelValue:s.userPass,"onUpdate:modelValue":t[2]||(t[2]=l=>s.userPass=l),rules:[()=>!!s.userPass||"비밀번호를 입력하세요"],variant:"outlined",ref:"userPass",type:"password",maxLength:"10",rounded:""},null,8,["modelValue","rules"])])])):v("",!0),s.categoryUse=="yes"?(n(),r("li",oe,[le,e("div",ne,[a(c,{modelValue:s.category,"onUpdate:modelValue":t[3]||(t[3]=l=>s.category=l),rounded:"",variant:"outlined",rules:[()=>!!s.category||"카테고리를 선택하세요"],ref:"category",label:"카테고리를 선택하세요",style:{"max-width":"500px"},items:s.categoryList},null,8,["modelValue","rules","items"])])])):v("",!0),s.secretUse=="yes"?(n(),r("li",re,[ae,e("div",de,[e("label",ce,[$(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>s.secret=l),value:"yes"},null,512),[[P,s.secret]]),h(" 비밀글 ")])])])):v("",!0),e("li",ue,[me,e("div",he,[a(p,{modelValue:s.subject,"onUpdate:modelValue":t[5]||(t[5]=l=>s.subject=l),rules:[()=>!!s.subject||"제목을 입력하세요"],variant:"outlined",ref:"subject",maxLength:"45",rounded:""},null,8,["modelValue","rules"])])]),e("li",null,[pe,e("div",ge,[a(b,{ref:"myQuillEditor",options:s.editorOption},null,8,["options"])])])])]),s.btype=="photo"?(n(),r("div",fe,[e("ul",_e,[e("li",null,[be,e("div",ye,[e("ul",ve,[(n(!0),r(F,null,z(s.imgs,(l,w)=>(n(),r("li",xe,[l.url?(n(),r("div",Ie,[e("div",{class:"is-img-close",onClick:U=>d.deleteImg(w)},[a(g,{icon:"fa-solid fa-xmark"})],8,we),e("img",{src:l.url},null,8,ke)])):(n(),r("div",{key:1,class:"guide-img",onClick:U=>d.insertImg(w)},[e("div",Ue,[a(g,{icon:"fa-solid fa-plus"})]),Ve,e("div",Ae,"권장 "+V(s.imgSize.text),1)],8,Le))]))),256))])])])])])):v("",!0)]),e("div",qe,[a(y,{style:{width:"48%","min-width":"48%","max-width":"48%"},class:"whiteButton",onClick:t[6]||(t[6]=l=>i.$router.back()),depressed:"",rounded:"",type:"button"},{default:I(()=>[Se]),_:1}),a(y,{style:{width:"48%","min-width":"48%","max-width":"48%"},class:"blackButton",depressed:"",rounded:"",type:"submit"},{default:I(()=>[Te]),_:1})])]),_:1},8,["modelValue","onSubmit"])])])}const Ee=A(B,[["render",Ne],["__scopeId","data-v-8ddbe7b2"]]);const Re={components:{QuillEditor:C},data(){return{bid:"",id:"",info:{},boardInfo:{},boardList:[],bidList:[],subject:"",content:"",editorOption:{placeholder:"내용을 입력하세요",theme:"snow",modules:{toolbar:{container:[[{header:1},{header:2}],["bold","italic","underline","strike"],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{align:[]}],["image"],["clean"]],handlers:{image:this.editorImageHandler}}}},btype:"",category:"",categoryList:[],categoryUse:"no",secretUse:"no",secret:"",bidDisabled:!1,imgs:[{isfile:"",file:null,url:""}],imgIndex:0,imgSize:{width:640,height:640,text:"640×640"},formHasErrors:!1,serverFlag:!1,boardName:"",memberInfo:{},isLogin:!1,wAuth:"user",userName:"",userPass:"",uploadImgType:"list",editor:null,form:null}},created(){this.bid=this.$route.params.bid,this.$route.params.id!="regist"&&(this.id=this.$route.params.id);const i=S.getSession();i&&(i!=null&&i.memberInfo)&&(this.memberInfo=i.memberInfo,this.isLogin=!0),this.getData()},methods:{onEditorReady(i){this.editor=i},getData(){const i={bid:this.bid,id:this.id};x.get(T,i,t=>{var o;if(t.data){if(this.imgSize.width=t.data.imageset.blist.width,this.imgSize.height=t.data.imageset.blist.height,this.imgSize.text=this.imgSize.width+"×"+this.imgSize.height,(o=t.data.articleInfo)!=null&&o.id&&(this.info=t.data.articleInfo,this.subject=this.info.subject,this.$refs.myQuillEditor.setHTML(this.info.content)),this.boardInfo=t.data.boardInfo,this.boardInfo.wauth=="user"&&!this.isLogin){this.$router.back();return}this.wAuth=this.boardInfo.wauth,this.boardName=this.boardInfo.bname,this.setAddInfo()}})},setAddInfo(){if(this.boardInfo.categoryUse=="yes"){this.categoryUse="yes";for(let i of JSON.parse(this.boardInfo.categoryList))this.categoryList.push({text:i.name,value:i.code});this.info.category&&(this.category=this.info.category)}this.boardInfo.secret=="yes"&&(this.secretUse="yes",this.info.secret=="yes"&&(this.secret=!0)),this.wAuth=="all"&&!this.isLogin&&(this.userName=this.info.user_name),this.btype=this.boardInfo.btype,this.boardInfo.btype=="photo"&&this.info.img&&(this.imgs=[],this.imgs.push({isfile:"yes",file:null,url:this.info.img}))},editorImageHandler(){this.uploadImgType="contentEditor",this.$refs.img.click()},deleteImg(i){this.imgs.splice(i,1),this.imgs.push({isfile:"",file:null,url:""})},insertImg(i){this.uploadImgType="list",this.$refs.img.click()},imgUpload(){const i=this.$refs.img.files;let t=i.length>0?i[0]:null;switch(this.uploadImgType){case"contentEditor":const o=new FormData;o.append("image",t),x.postFile(N,o,s=>{const d=this.editor.getSelection();this.editor.insertEmbed(d.index,"image",s.data)});break;default:let u={isfile:"",file:t,url:URL.createObjectURL(t)};this.imgs.splice(0,1,u);break}this.$refs.img.value=""},onEditorChange({quill:i,html:t,text:o}){this.content=t},validate(){var i,t;if(this.form){const o=new FormData,u=this.$refs.myQuillEditor.getHTML(),s=k.stripTags(u);if(!k.isImgTags(u)&&!s){let c={message:"내용을 입력하세요"};this.emitter.emit("modalOpen",c);return}if(o.append("subject",this.subject),o.append("category",this.category),o.append("user_name",this.userName),o.append("user_pass",this.userPass),o.append("bid",this.bid),o.append("content",u),o.append("secret",this.secret?"yes":"no"),o.append("btype",this.boardInfo.btype),this.btype=="photo"){if(this.imgs[0].file)o.append("img",this.imgs[0].file);else if(this.imgs[0].isfile!="yes"){let c={message:"이미지를 등록하세요"};this.emitter.emit("modalOpen",c);return}}if(this.serverFlag)return;this.serverFlag=!0,(i=this.info)!=null&&i.id&&o.append("id",this.info.id),this.emitter.emit("overlay","open");const p=(t=this.info)!=null&&t.id?E:R;x.postFile(p,o,c=>{var b;if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),c.data){let g="저장";(b=this.info)!=null&&b.id&&(g="수정");let y={message:"게시글 정보가 "+g+" 되었습니다",doAction:()=>{this.$router.back()}};this.emitter.emit("modalOpen",y)}})}}},mounted(){j(".quill-content-box .ql-editor").css("min-height","400px")}},_=i=>(D("data-v-4c147af3"),i=i(),H(),i),Ce={class:"page-container"},je={class:"product-container"},$e={class:"board-title"},Pe={class:"product-regist"},Fe={class:"product-form",style:{"max-width":"100%"}},ze={class:"input-ul"},Oe={key:0,class:"flex-box"},De={class:"left"},He=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("작성자명")],-1)),Me={class:"input-box",style:{width:"350px"},id:"userName-required"},Qe={class:"right"},Be=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("비밀번호")],-1)),Je={class:"input-box",id:"userPass-required",style:{width:"350px"}},Ge={key:1},Ke=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("카테고리")],-1)),We={class:"select-box",id:"category-required"},Xe={key:2,style:{"margin-top":"40px"}},Ye=_(()=>e("div",{class:"label"},"비밀글 여부",-1)),Ze={class:"radio-box",style:{"max-height":"40px"}},et={style:{"font-weight":"bold",cursor:"pointer"}},tt={style:{"margin-top":"30px"}},st=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("제목")],-1)),it={class:"input-box",id:"subject-required"},ot=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("내용")],-1)),lt={class:"quill-content-box",style:{width:"100%","padding-bottom":"12px"}},nt={key:0,class:"product-form",style:{"margin-top":"40px"}},rt={class:"input-ul"},at=_(()=>e("div",{class:"label"},[e("span",{class:"required-icon"},"*"),h("목록 이미지")],-1)),dt={class:"detail-img-box",style:{"padding-top":"5px"}},ct={class:"add-detial-img-ul"},ut={class:"reg-img-box"},mt={key:0,class:"is-img"},ht=["onClick"],pt=["src"],gt=["onClick"],ft={class:"guide-img-icon"},_t=_(()=>e("div",{class:"guide-img-title"},"이미지",-1)),bt={class:"guide-img-size"},yt={class:"button-row"},vt=_(()=>e("span",null,"취소",-1)),xt=_(()=>e("span",null,"게시글 저장",-1));function It(i,t,o,u,s,d){const p=m("v-text-field"),c=m("v-select"),b=m("quill-editor"),g=m("font-awesome-icon"),y=m("v-btn"),L=m("v-form");return n(),r("div",Ce,[e("div",je,[e("div",$e,V(s.boardName)+" 글쓰기",1),a(L,{modelValue:s.form,"onUpdate:modelValue":t[7]||(t[7]=l=>s.form=l),novalidate:"",onSubmit:O(d.validate,["prevent"])},{default:I(()=>[e("input",{type:"file",style:{display:"none"},ref:"img",accept:"image/*",onChange:t[0]||(t[0]=(...l)=>d.imgUpload&&d.imgUpload(...l))},null,544),e("div",Pe,[e("div",Fe,[e("ul",ze,[s.wAuth=="all"&&!s.isLogin?(n(),r("li",Oe,[e("div",De,[He,e("div",Me,[a(p,{modelValue:s.userName,"onUpdate:modelValue":t[1]||(t[1]=l=>s.userName=l),rules:[()=>!!s.userName||"작성자명을 입력하세요"],density:"compact",variant:"outlined",rounded:"",ref:"userName",maxLength:"20"},null,8,["modelValue","rules"])])]),e("div",Qe,[Be,e("div",Je,[a(p,{modelValue:s.userPass,"onUpdate:modelValue":t[2]||(t[2]=l=>s.userPass=l),rules:[()=>!!s.userPass||"비밀번호를 입력하세요"],density:"compact",variant:"outlined",ref:"userPass",type:"password",maxLength:"10",rounded:""},null,8,["modelValue","rules"])])])])):v("",!0),s.categoryUse=="yes"?(n(),r("li",Ge,[Ke,e("div",We,[a(c,{modelValue:s.category,"onUpdate:modelValue":t[3]||(t[3]=l=>s.category=l),rounded:"",rules:[()=>!!s.category||"카테고리를 선택하세요"],density:"compact",variant:"outlined",ref:"category",label:"카테고리를 선택하세요",style:{"max-width":"500px"},items:s.categoryList},null,8,["modelValue","rules","items"])])])):v("",!0),s.secretUse=="yes"?(n(),r("li",Xe,[Ye,e("div",Ze,[e("label",et,[$(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>s.secret=l),value:"yes"},null,512),[[P,s.secret]]),h(" 비밀글 ")])])])):v("",!0),e("li",tt,[st,e("div",it,[a(p,{modelValue:s.subject,"onUpdate:modelValue":t[5]||(t[5]=l=>s.subject=l),rules:[()=>!!s.subject||"제목을 입력하세요"],variant:"outlined",ref:"subject",maxLength:"45",rounded:""},null,8,["modelValue","rules"])])]),e("li",null,[ot,e("div",lt,[a(b,{ref:"myQuillEditor",onReady:d.onEditorReady,options:s.editorOption},null,8,["onReady","options"])])])])]),s.btype=="photo"?(n(),r("div",nt,[e("ul",rt,[e("li",null,[at,e("div",dt,[e("ul",ct,[(n(!0),r(F,null,z(s.imgs,(l,w)=>(n(),r("li",ut,[l.url?(n(),r("div",mt,[e("div",{class:"is-img-close",onClick:U=>d.deleteImg(w)},[a(g,{icon:"fa-solid fa-xmark"})],8,ht),e("img",{src:l.url},null,8,pt)])):(n(),r("div",{key:1,class:"guide-img",onClick:U=>d.insertImg(w)},[e("div",ft,[a(g,{icon:"fa-solid fa-plus"})]),_t,e("div",bt,"권장 "+V(s.imgSize.text),1)],8,gt))]))),256))])])])])])):v("",!0)]),e("div",yt,[a(y,{style:{width:"250px",margin:"auto","margin-right":"20px"},class:"whiteButton",onClick:t[6]||(t[6]=l=>i.$router.back()),depressed:"",rounded:"",type:"button"},{default:I(()=>[vt]),_:1}),a(y,{style:{width:"250px",margin:"auto"},class:"blackButton",depressed:"",rounded:"",type:"submit"},{default:I(()=>[xt]),_:1})])]),_:1},8,["modelValue","onSubmit"])])])}const wt=A(Re,[["render",It],["__scopeId","data-v-4c147af3"]]);const kt={components:{mobileArticleRegist:Ee,pcArticleRegist:wt},data(){return{mobile:!1}},created(){this.mobile=this.$isMobile()}},Lt={class:"page-container"};function Ut(i,t,o,u,s,d){const p=m("mobileArticleRegist"),c=m("pcArticleRegist");return n(),r("div",Lt,[s.mobile?(n(),q(p,{key:0})):(n(),q(c,{key:1}))])}const Rt=A(kt,[["render",Ut],["__scopeId","data-v-bb08c7df"]]);export{Rt as default};
