import{a as m,y as C,z as A,B as w,C as F,D as N}from"./apiService-0aea4262.js";import{_ as k,r as _,o as c,c as v,a as s,b as d,w as u,F as R,g as T,t as f,d as S,k as E,e as b,n as P,j as p,s as g,W as I,p as V,f as U}from"./index-7c0b344a.js";import"./axios-c24e582b.js";const x={data(){return{form:null,baseBrandId:"newBrand",brandList:[],brandRegistTitle:"브랜드 상세설정",brandId:"",bname:"",buse:"yes",buttonTitle:"저장",serverFlag:!1}},created(){this.getData()},methods:{bnameErrors(t){return t?!0:"브랜드명을 입력하세요"},getData(){this.serverFlag||(this.serverFlag=!0,m.post(C,{},t=>{this.serverFlag=!1,this.brandList=[];for(let e of t.data)e.active="",this.brandList.push(e);this.brandList[0]&&this.choiceBrand(this.brandList[0].id)}))},choiceBrand(t){let e={};for(let i of this.brandList)i.id==t?(i.active="active",e=i):i.active="";this.brandId=e.id,this.bname=e.bname,this.buse=e.buse},addBrand(){if(this.brandList.length>99){const e={message:"더이상 브랜드를 추가할수 없습니다"};this.emitter.emit("modalOpen",e);return}if(this.serverFlag)return;const t=this.baseBrandId;for(let e of this.brandList)e.active="";this.brandList.push({bname:"새 브랜드",id:t,active:"active"}),this.brandId=t,this.bname="새 브랜드",this.buse="no",this.validate()},deleteBrand(t,e){this.deleteConfirm(t,e)},deleteConfirm(t,e){const i={type:"confirm",message:"선택된 브랜드를 삭제하시겠습니까?",doAction:()=>{this.deleteAction(t,e)}};this.emitter.emit("modalOpen",i)},deleteAction(t,e){this.serverFlag||(this.serverFlag=!0,this.emitter.emit("overlay","open"),m.post(A,{id:t},i=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),i.status=="success"){const r={message:"선택된 브랜드가 삭제되었습니다"};this.emitter.emit("modalOpen",r),this.brandList.splice(e,1),this.brandId==t&&this.brandList[0]&&this.choiceBrand(this.brandList[0].id)}else{const r={message:"선택된 브랜드에 상품이 존재하므로 삭제할수 없습니다"};this.emitter.emit("modalOpen",r)}}))},validate(){if(this.form){let t={bname:this.bname,buse:this.buse},e=F;if(this.brandId&&this.brandId!=this.baseBrandId&&(e=N,t.id=this.brandId),this.serverFlag)return;this.serverFlag=!0,this.emitter.emit("overlay","open"),m.post(e,t,i=>{if(this.serverFlag=!1,this.emitter.emit("overlay","hide"),i.data){if(t.id){let r={message:"브랜드정보가 수정 되었습니다"};this.emitter.emit("modalOpen",r)}this.updateSet(t.id,i.data)}})}},updateSet(t,e){let i=0;for(let r of this.brandList){if(r.id==this.brandId){const n=this.updateDataSet(r,t,e);this.brandList[i]=n;break}i++}},updateDataSet(t,e,i){return e?(t.bname=this.bname,t.buse=this.buse):(t=i,t.active="active",this.brandId=t.id),t},upDownBrand(t){this.brandId&&(this.serverFlag||(this.serverFlag=!0,m.post(w,{id:this.brandId,cmd:t},e=>{if(this.serverFlag=!1,e.data){if(e.data=="stay")return;this.brandList=[];for(let i of e.data)i.id==this.brandId?i.active="active":i.active="",this.brandList.push(i)}})))}}},O=t=>(V("data-v-25999728"),t=t(),U(),t),M={class:"page-container"},j={class:"brand-container"},z={class:"brand-list"},G={class:"brand-list-header"},Q={class:"up-down"},W={class:"add"},q={class:"brand-list-body"},H={class:"main-brand"},J={class:"main-li"},K=["onClick"],X=["onClick"],Y={class:"brand-regist"},Z={key:0},$={class:"brand-title"},ee={class:"table-ul"},te={class:"label-input"},se={class:"input-box"},ie=O(()=>s("div",{class:"label"}," 브랜드 사용여부 ",-1)),ae={class:"label-input"},ne={class:"radio-box"},de={class:"button-row"};function re(t,e,i,r,n,o){const l=_("font-awesome-icon"),h=_("v-btn"),D=_("v-text-field"),B=_("v-form");return c(),v("div",M,[s("div",j,[s("div",z,[s("div",G,[s("div",Q,[d(h,{class:"white-button",onClick:e[0]||(e[0]=a=>o.upDownBrand("up")),variant:"outlined"},{default:u(()=>[d(l,{icon:"fa-solid fa-angle-up"})]),_:1}),d(h,{class:"white-button",onClick:e[1]||(e[1]=a=>o.upDownBrand("down")),variant:"outlined"},{default:u(()=>[d(l,{icon:"fa-solid fa-angle-down"})]),_:1})]),s("div",W,[d(h,{class:"white-button",onClick:e[2]||(e[2]=a=>o.addBrand()),variant:"outlined"},{default:u(()=>[d(l,{icon:"fa-solid fa-plus"}),b(" 브랜드 추가 ")]),_:1})])]),s("div",q,[(c(!0),v(R,null,T(n.brandList,(a,y)=>(c(),v("ul",H,[s("li",J,[s("div",{class:P("main-data "+a.active)},[s("div",{class:"gname",onClick:L=>o.choiceBrand(a.id)},[b(f(a.bname)+" ",1),a.buse=="yes"?(c(),p(l,{key:0,icon:"fa-solid fa-eye"})):(c(),p(l,{key:1,icon:"fa-solid fa-eye-slash"}))],8,K),s("div",{class:"btn",onClick:L=>o.deleteBrand(a.id,y)},[d(l,{icon:"fa-solid fa-circle-minus"})],8,X)],2)])]))),256))])]),s("div",Y,[n.brandId?(c(),v("div",Z,[s("div",$,f(n.brandRegistTitle),1),d(B,{modelValue:n.form,"onUpdate:modelValue":e[6]||(e[6]=a=>n.form=a),novalidate:"",onSubmit:S(o.validate,["prevent"])},{default:u(()=>[s("ul",ee,[s("li",null,[s("div",te,[s("div",se,[d(D,{modelValue:n.bname,"onUpdate:modelValue":e[3]||(e[3]=a=>n.bname=a),rules:[o.bnameErrors],label:"브랜드명",density:"compact",variant:"outlined",placeholder:"브랜드명을 입력해주세요"},null,8,["modelValue","rules"])])])]),s("li",null,[ie,s("div",ae,[s("div",ne,[s("label",null,[g(s("input",{type:"radio","onUpdate:modelValue":e[4]||(e[4]=a=>n.buse=a),value:"yes"},null,512),[[I,n.buse]]),b(" 사용 ")]),s("label",null,[g(s("input",{type:"radio","onUpdate:modelValue":e[5]||(e[5]=a=>n.buse=a),value:"no"},null,512),[[I,n.buse]]),b(" 사용안함 ")])])])])]),s("div",de,[d(h,{class:"submit-button",type:"submit"},{default:u(()=>[b("브랜드정보 "+f(n.buttonTitle),1)]),_:1})])]),_:1},8,["modelValue","onSubmit"])])):E("",!0)])])])}const ue=k(x,[["render",re],["__scopeId","data-v-25999728"]]);export{ue as default};
