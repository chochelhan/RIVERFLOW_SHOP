import{a as _,ad as L,ae as x}from"./apiService-0aea4262.js";import{U as g}from"./util-5fdb7bcf.js";import{s as w}from"./shopTable-d56388e3.js";import{_ as C,r as f,o as k,c as V,a as s,u as S,q as m,v as h,g as y,d as r,w as v,t as D,p as I,f as P}from"./index-e9ed42ea.js";const T={components:{shopTable:w},watch:{datalimit(i){this.getDataList(1)},cate1(i){this.subCategoryList=[];let e={title:"2차카테고리 선택",value:""};this.subCategoryList.push(e),this.subSubCategoryList=[];let l={title:"3차카테고리 선택",value:""};if(this.subSubCategoryList.push(l),this.cate2="",this.cate3="",this.orgSubCategoryList=[],i){for(let a of this.orgCategoryList)if(a.id==i&&a.subList&&a.subList.length>0)for(let t of a.subList)e={text:t.cname,value:t.id},this.subCategoryList.push(e),this.orgSubCategoryList.push(t)}},cate2(i){this.subSubCategoryList=[];let e={title:"3차카테고리 선택",value:""};if(this.subSubCategoryList.push(e),this.cate3="",i){for(let l of this.orgSubCategoryList)if(l.id==i&&l.subList&&l.subList.length>0)for(let a of l.subList)e={text:a.cname,value:a.id},this.subSubCategoryList.push(e)}},selectedProduct(i){if(i){let e={};for(let l of this.productList)this.productIds[l.id]&&(e[l.id]=l);this.$emit("eventData",e)}}},props:["accept","selectedProduct"],data(){return{util:g,columns:[{name:"이미지",id:"listImg",width:100,type:"image"},{name:"상품명",id:"pname",width:300,sort:!0},{name:"판매상태",id:"pstatus",width:100},{name:"카테고리",id:"category",width:300},{name:"브랜드",id:"brandId",width:200},{name:"정가",id:"price",width:100},{name:"할인가",id:"dcprice",width:100},{name:"재고",id:"gamt",width:100},{name:"묶음배송여부",id:"deliveryGroup",width:100},{name:"배송비",id:"deliveryPrice",width:100},{name:"등록일",id:"created_at",sort:!0,width:100}],fixed:4,productList:[],paging:{total:"",links:[],currentPage:1,lastPage:1},categoryListNames:{},categoryList:[],subCategoryList:[],subSubCategoryList:[],orgCategoryList:[],orgSubCategoryList:[],cate1:"",cate2:"",cate3:"",brandList:[],brandListNames:{},page:1,datalimit:20,pstatusList:{sale:"정상판매",hidden:"노출금지",soldout:"품절"},serviceTypeList:{normal:"배송상품군",service:"서비스상품군"},yesNoList:{yes:"가능",no:"불가능"},platform:[],pstatus:[],keywordCmd:"pname",keywordCmdList:[{title:"상품명",value:"pname"},{title:"키워드",value:"keyword"}],keyword:"",brand:"",stdate:"",endate:"",vmenu1:!1,vmenu2:!1,dateCmd:"created_at",dateCmdList:[{title:"상품등록일",value:"created_at"},{title:"판매시작일",value:"periodStdate"},{title:"판매종료일",value:"periodEndate"}],datalimitList:[{title:"10개",value:10},{title:"20개",value:20},{title:"30개",value:30},{title:"50개",value:50},{title:"100개",value:100}],productIds:{},stickyTop:0,dataSort:{field:"id",sort:"desc"},pstatusDisabled:!1}},created(){this.setHeader(),this.getData(1)},methods:{setHeader(){if(this.accept=="couponRegist"){this.pstatus=["sale"],this.pstatusDisabled=!0,this.stickyTop="-20px";let i={name:"선택",id:"id",sort:!1,width:90,type:"allCheckbox"};this.columns.unshift(i)}else{let i={name:"수정",id:"modify",width:80,type:"button",action:"productModify"};this.columns.unshift(i),i={name:"번호",id:"number",sort:!1,width:60},this.columns.unshift(i)}},searchReset(){this.keywordCmd="pname",this.keyword="",this.brand="",this.stdate="",this.endate="",this.dateCmd="created_at",this.cate1="",this.cate2="",this.cate3="",this.platform=[],this.pstatus=[]},getSearchParams(i){let e=[];this.cate1&&e.push(this.cate1),this.cate2&&e.push(this.cate2),this.cate3&&e.push(this.cate3);let l={orderByField:this.dataSort.field,orderBySort:this.dataSort.sort,limit:this.datalimit,page:i,keywordCmd:this.keywordCmd,keyword:this.keyword,brand:this.brand,stdate:this.stdate,endate:this.endate,dateCmd:this.dateCmd,category:e.length>0?e.join(","):""};return this.platform.length>0&&(l.platform=this.platform.join(",")),this.pstatus.length>0&&(l.pstatus=this.pstatus.join(",")),l},getData(i){const e=this.getSearchParams(i);_.post(L,e,l=>{this.orgCategoryList=l.data.categoryList;let a={title:"1차카테고리 선택",value:""};this.categoryList.push(a);let t={title:"2차카테고리 선택",value:""};this.subCategoryList.push(t);let u={title:"3차카테고리 선택",value:""};this.subSubCategoryList.push(u),this.categoryListNames={};for(let d of l.data.categoryList)if(a={title:d.cname,value:d.id},this.categoryList.push(a),this.categoryListNames[d.id]=d.cname,d.subList){for(let c of d.subList)if(this.categoryListNames[c.id]=c.cname,c.subList)for(let b of c.subList)this.categoryListNames[b.id]=b.cname}this.brandListNames={};let p={title:"브랜드 선택",value:""};this.brandList.push(p);for(let d of l.data.brandList){let c={title:d.bname,value:d.id};this.brandList.push(c),this.brandListNames[d.id]=d.bname}this.setDataList(l.data.productList)})},getDataList(i){const e=this.getSearchParams(i);_.post(x,e,l=>{this.setDataList(l.data)})},setDataList(i){this.productList=[],this.paging={total:i.total,links:i.links,currentPage:i.current_page,lastPage:i.last_page};const e=parseInt(i.total)-this.datalimit*(parseInt(i.current_page)-1);let l=0;for(let a of i.data){a.number=e-l,a.created_at=a.created_at.substring(0,10),parseInt(a.gamt)<1&&(a.pstatus="soldout");let t=a.category1.split(","),u=this.categoryListNames[t[0]];t[1]&&(u+=" > "+this.categoryListNames[t[1]]),t[2]&&(u+=" > "+this.categoryListNames[t[2]]),a.category=u,a.pstatus=this.pstatusList[a.pstatus],a.serviceType=this.serviceTypeList[a.serviceType],a.price=g.numberFormat(a.price),a.dcprice=g.numberFormat(a.dcprice),a.gamt=g.numberFormat(a.gamt),a.deliveryGroup=this.yesNoList[a.deliveryGroup],a.brandId=this.brandListNames[a.brandId],this.productList.push(a),l++}},pageMove(i){this.getDataList(i.page)},productModify(i){this.$router.push("/admin/product/productModify/"+i.id)},search(){this.getDataList(1)},tableEventAction(i){switch(i.type){case"dataSort":this.dataSort=i.sort,this.getDataList(1);break}},checkDataList(i){this.productIds=i}}},n=i=>(I("data-v-165aba92"),i=i(),P(),i),N={class:"page-container"},U={class:"table-box"},M={class:"search-box"},A={class:"table-search",cellspacing:"0",cellpadding:"0",border:"0"},E=n(()=>s("th",null,"판매상태",-1)),R={style:{width:"40%"}},B={class:"radio-box",style:{display:"flex"}},F=["disabled"],G=n(()=>s("div",{style:{width:"20px"}},null,-1)),j=["disabled"],O=n(()=>s("div",{style:{width:"20px"}},null,-1)),H=["disabled"],q=n(()=>s("th",null,"플랫폼",-1)),z={class:"radio-box",style:{display:"flex"}},J=n(()=>s("div",{style:{width:"20px"}},null,-1)),K=n(()=>s("th",null,"검색어",-1)),Q={class:"select-box",style:{display:"flex"}},W={style:{"margin-left":"20px","min-width":"300px"}},X=n(()=>s("th",null,"브랜드",-1)),Y={class:"select-box"},Z=n(()=>s("th",null,"카테고리",-1)),$={colspan:"3"},tt={class:"select-box",style:{display:"flex"}},et=n(()=>s("div",{style:{width:"20px"}},null,-1)),st=n(()=>s("div",{style:{width:"20px"}},null,-1)),it=n(()=>s("th",{style:{"border-radius":"5px"}},"기간검색",-1)),at={colspan:"3"},ot={style:{display:"flex"}},lt={class:"select-box",style:{display:"flex"}},dt={style:{display:"flex","margin-left":"20px"}},nt={class:"input-box",style:{width:"160px"}},ut=n(()=>s("div",{style:{width:"30px","text-align":"center","line-height":"50px",height:"50px"}},"~ ",-1)),rt={class:"input-box",style:{width:"160px"}},pt={class:"button-row"},ct=n(()=>s("span",null,"초기화",-1)),mt=n(()=>s("span",null,"검색",-1)),ht={style:{display:"flex",padding:"0 10px","justify-content":"space-between","z-index":"20"}},yt=n(()=>s("div",{class:"sub-title"},"상품 리스트",-1)),bt={class:"select-box",style:{display:"flex","max-height":"40px","padding-top":"4px"}},gt={class:"total"};function ft(i,e,l,a,t,u){const p=f("v-select"),d=f("v-text-field"),c=f("v-btn"),b=f("shopTable");return k(),V("div",N,[s("div",U,[s("form",{novalidate:"",onSubmit:e[15]||(e[15]=S((...o)=>u.search&&u.search(...o),["prevent"]))},[s("div",M,[s("table",A,[s("tbody",null,[s("tr",null,[E,s("td",R,[s("div",B,[s("label",null,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=o=>t.pstatus=o),disabled:t.pstatusDisabled,value:"sale"},null,8,F),[[h,t.pstatus]]),y(" 정상판매 ")]),G,s("label",null,[m(s("input",{type:"checkbox",disabled:t.pstatusDisabled,"onUpdate:modelValue":e[1]||(e[1]=o=>t.pstatus=o),value:"hidden"},null,8,j),[[h,t.pstatus]]),y(" 노출중지 ")]),O,s("label",null,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=o=>t.pstatus=o),disabled:t.pstatusDisabled,value:"soldout"},null,8,H),[[h,t.pstatus]]),y(" 품절 ")])])]),q,s("td",null,[s("div",z,[s("label",null,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>t.platform=o),value:"pc"},null,512),[[h,t.platform]]),y(" PC ")]),J,s("label",null,[m(s("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=o=>t.platform=o),value:"mw"},null,512),[[h,t.platform]]),y(" 모바일 웹 ")])])])]),s("tr",null,[K,s("td",null,[s("div",Q,[r(p,{modelValue:t.keywordCmd,"onUpdate:modelValue":e[5]||(e[5]=o=>t.keywordCmd=o),density:"compact",variant:"outlined",style:{width:"110px"},items:t.keywordCmdList},null,8,["modelValue","items"]),s("div",W,[r(d,{density:"compact",variant:"outlined",modelValue:t.keyword,"onUpdate:modelValue":e[6]||(e[6]=o=>t.keyword=o)},null,8,["modelValue"])])])]),X,s("td",null,[s("div",Y,[r(p,{modelValue:t.brand,"onUpdate:modelValue":e[7]||(e[7]=o=>t.brand=o),density:"compact",variant:"outlined",style:{"max-width":"200px"},items:t.brandList},null,8,["modelValue","items"])])])]),s("tr",null,[Z,s("td",$,[s("div",tt,[r(p,{modelValue:t.cate1,"onUpdate:modelValue":e[8]||(e[8]=o=>t.cate1=o),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:t.categoryList},null,8,["modelValue","items"]),et,r(p,{modelValue:t.cate2,"onUpdate:modelValue":e[9]||(e[9]=o=>t.cate2=o),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:t.subCategoryList},null,8,["modelValue","items"]),st,r(p,{modelValue:t.cate3,"onUpdate:modelValue":e[10]||(e[10]=o=>t.cate3=o),density:"compact",variant:"outlined",style:{"max-width":"230px"},items:t.subSubCategoryList},null,8,["modelValue","items"])])])]),s("tr",null,[it,s("td",at,[s("div",ot,[s("div",lt,[r(p,{modelValue:t.dateCmd,"onUpdate:modelValue":e[11]||(e[11]=o=>t.dateCmd=o),density:"compact",variant:"outlined",style:{"max-width":"140px"},items:t.dateCmdList},null,8,["modelValue","items"])]),s("div",dt,[s("div",nt,[r(d,{density:"compact",variant:"outlined",modelValue:t.stdate,"onUpdate:modelValue":e[12]||(e[12]=o=>t.stdate=o),type:"date"},null,8,["modelValue"])]),ut,s("div",rt,[r(d,{type:"date",modelValue:t.endate,"onUpdate:modelValue":e[13]||(e[13]=o=>t.endate=o),density:"compact",variant:"outlined"},null,8,["modelValue"])])])])])])])])]),s("div",pt,[r(c,{class:"white-button",variant:"outlined",onClick:e[14]||(e[14]=o=>u.searchReset())},{default:v(()=>[ct]),_:1}),r(c,{class:"search-button",type:"submit",variant:"outlined"},{default:v(()=>[mt]),_:1})])],32),s("div",ht,[yt,s("div",bt,[s("div",gt,"전체상품수 "+D(t.util.numberFormat(t.paging.total))+"개",1),r(p,{modelValue:t.datalimit,"onUpdate:modelValue":e[16]||(e[16]=o=>t.datalimit=o),density:"compact","bg-color":"#fff",style:{"max-width":"100px"},items:t.datalimitList},null,8,["modelValue","items"])])]),r(b,{datas:t.productList,updateStickyTop:t.stickyTop,fixed:t.fixed,onPageMove:u.pageMove,onParentEvent:u.tableEventAction,onProductModify:u.productModify,columns:t.columns,paging:t.paging,onCheckDataList:u.checkDataList},null,8,["datas","updateStickyTop","fixed","onPageMove","onParentEvent","onProductModify","columns","paging","onCheckDataList"])])])}const wt=C(T,[["render",ft],["__scopeId","data-v-165aba92"]]);export{wt as P};
